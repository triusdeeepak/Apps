require(['all-ga-events']);var _ttrefo={MAX_FUNNELS:10,push:function(){var a=0;for(var b=0;b<arguments.length;b++){var c=arguments[b];if(!(c instanceof Array)||c.length<1){a++;continue}var d=c[0],e=c.slice(1);if(typeof d!='string'){a++;continue}switch(d){case'_trackEvent':this.trackEvent(e)||a++;break;case'_trackEventNoCookie':this.trackEventNoCookie(e)||a++;break;case'_trackAction':this.trackAction(e)||a++;break;case'_setCookie':this.setCookie(e)||a++;break;case'_setEntrypoint':this.setCookie(e)||a++;break;case'_clearEntrypoint':this.clearEntrypoint(e)||a++;break;default:a++}}return a},trackEvent:function(a){if(!(a instanceof Array)||a.length<2)return!1;var b=a[0],c=a[1],d=a[2]||'',e,f,g,h;a.length>4?(g=a[3]||'',h=a[4]||a[4]===0?a[4]:'',e=a[5]||'',f=a[6]||a[6]===0?a[6]:''):(f=a[3]||a[3]===0?a[3]:'',e='',g='',h='');var i=this.getDataFromCookie();for(var j=0;j<i.length;j++){var k=this.splitTigerTeamEntrypoint(i[j]);if(k.tt===b)return this.pushToTracking(b,c,k.entrypoint,d,f,e,g,h)}var l=this.pushToQTS('ttref:ev',{tt:b,event:c,entrypoint:'others',label:d,value:f,name:e,reference:g,reference_id:h});return l},trackAction:function(a){if(!(a instanceof Array)||a.length<3)return!1;var b=a[0],c=a[1],d=a[2],e=parseInt(a[3])||0;return typeof b!='string'||typeof c!='string'||typeof d!='string'||typeof e!='number'?!1:this.pushToQTS('ttref:action',{tt:b,event:c,action_point:d,action_page:document.location.pathname,source_id:e})},getDataFromCookie:function(){if(typeof JSON=='undefined')return!1;var a=getCookie(flns.config.cookie_base+'_TTREF');if(typeof a!='string'||a==='')return[];try{return JSON.parse(a)}catch(b){return[]}},trackEventNoCookie:function(a){if(!(a instanceof Array)||a.length<3)return!1;var b=a[0],c=a[1],d=a[2],e=a[3]||'',f,g,h,i;return a.length>5?(h=a[4]||'',i=a[5]||a[5]===0?a[5]:'',f=a[6]||'',g=a[7]||a[7]===0?a[7]:''):(g=a[4]||a[4]===0?a[4]:'',f='',h='',i=''),this.pushToTracking(b,c,d,e,g,f,h,i)},pushToTracking:function(a,b,c,d,e,f,g,h){try{var i=this.pushToQTS('ttref:ev',{tt:a,event:b,entrypoint:c,label:d,value:e,name:f||'',reference:g||'',reference_id:h||''});return i}catch(j){return!1}},pushToQTS:function(a,b){return typeof _lt=='object'?(_lt.push([a,b]),!0):typeof _t=='object'?(_t.push([a,b]),!0):!1},setCookie:function(a){if(a instanceof Array){var b,c;a.length>0?(b=!1,c=a[0]):(b=!0,c=getQueryStringValueByName('ttref'));if(typeof c!='string'||c===''||typeof JSON=='undefined')return!1;var d=this.splitTigerTeamEntrypoint(c),e={section:d.tt,subsection:'ttref_set_entry_point',label:d.entrypoint,reference:a[1]||'',reference_id:a[2]||a[2]===0?a[2]:'',name:a[3]||'',value:a[4]||a[4]===0?a[4]:''};this.pushToQTS('user_action',e),b&&this.clearEntrypoint([d.tt]);if(this.getFunnel(d.tt))return!1;var f=this.getDataFromCookie();while(f.length>=this.MAX_FUNNELS)f.shift();return f.push(c),setCookie(flns.config.cookie_base+'_TTREF',JSON.stringify(f),1),!0}return!1},clearEntrypoint:function(a){if(a instanceof Array){if(a.length>0){var b=a[0];if(typeof b!='string')return!1;var c=this.getFunnel(b),d=this.getDataFromCookie(),e=d.indexOf(c.tt+'_'+c.entrypoint);e!==-1&&(d.splice(e,1),setCookie(flns.config.cookie_base+'_TTREF',JSON.stringify(d),1))}else setCookie(flns.config.cookie_base+'_TTREF','',-1);return!0}return!1},splitTigerTeamEntrypoint:function(a){if(typeof a!='string')return!1;var b=a.split('_');return b.length===2?{tt:b[0],entrypoint:b[1]}:!1},getFunnel:function(a){var b=this.getDataFromCookie();for(var c=0;c<b.length;c++){var d=this.splitTigerTeamEntrypoint(b[c]);if(a===d.tt)return d}return!1},pushReferrerToQTS:function(){if(typeof isReferrerExternal!='undefined'){var a=!1;try{a=getURLParameter('utm_referrer')}catch(b){}var c=isReferrerExternal();if(c||a){var d='',e='[\\?&]q=([^&#]*)',f=new RegExp(e),g=f.exec(document.referrer);g!==null&&(d=decodeURIComponent(g[1].replace(/\+/g,' ')));var h=!1,i=!1;try{var j=getCookie(flns.config.cookie_base+'_NOTNEW');j||(h=!0),i=flns.assets.lang}catch(b){h='error'}var k=document.referrer;!c&&a&&(k=a),this.pushToQTS('referrer',{url:k,q:d,new_user:h,language:i})}}if(typeof window.getQueryStringValueByName=='function'){var l=getQueryStringValueByName('mkwid'),m=getQueryStringValueByName('crid'),n=getQueryStringValueByName('mp_kw'),o=getQueryStringValueByName('mp_mt'),p=getQueryStringValueByName('gclid');(l!==''||m!==''||n!==''||o!==''||p!=='')&&this.pushToQTS('adwords:click',{mkwid:l,crid:m,mp_kw:n,mp_mt:o,gclid:p})}}},_ttref=_ttref||[],_ttreft=_ttref;_ttref=_ttrefo,_ttref.pushReferrerToQTS(),_ttref.push.apply(_ttref,_ttreft),function(){function b(a){var b=a.event;b&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push(a),window.dataLayerNew=window.dataLayerNew||[],window.dataLayerNew.push(a)),b=='NonHireMe Posted'?(gaTrackEvent('GoalNonHireMePosted'),_ttref.push(['_trackEvent','PostProject','Posted']),_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_PostProjectForm'])):b=='Project Reposted'?a.isHireMe?gaTrackEvent('GoalHireMeReposted'):gaTrackEvent('GoalNonHireMeReposted'):b=='Project Upgraded'?gaTrackEvent('GoalProjectUpgraded'):b=='HireMe Posted'?gaTrackEvent('GoalHireMePosted'):b=='Buy Exam'?(a.isFree?gaTrackEvent('GoalBuyFreeExam'):gaTrackEvent('GoalBuyPaidExam'),_ttref.push(['_trackEvent','Exams','ConfirmBuy',a.examName])):b=='Bid on Project'?(_ttref.push(['_trackEvent','Project','Bid','',0,!0,!0]),qtsv.push({label:'PlaceBid',amount:a.amount,currency:a.currency}),gaTrackEvent('GoalBidProject')):b=='User Registration'?a['user_type']=='Employer'?gaTrackEvent('GoalUserRegistrationEmployer'):gaTrackEvent('GoalUserRegistrationFreelancerBoth'):b=='Facebook Signup'?gaTrackEvent('GoalFacebookSignup'):b=='Membership Upgrade'?gaTrackEvent('GoalMembershipUpgrade'):b=='Contest Reposted'?(_ttref.push(['_setEntrypoint','Contest_RepostSuccessContest']),gaTrackEvent('GoalContestCreated')):b=='Contest Created'?gaTrackEvent(['_trackEvent','Goal','Contest Created']):b=='Contest Paid'?(_ttref.push(['_trackEvent','Contest','Posted']),_ttref.push(['_clearEntrypoint','Contest']),gaTrackEvent('GoalContestPaid')):b=='Entries Submitted'?(a.xp_contest&&(_ttref.push(['_trackEvent','Contest','SubmitEntry','XP Contest']),_ttref.push(['_clearEntrypoint','Contest'])),a.realtime_contest&&(_ttref.push(['_trackEvent','Contest','SubmitEntry','Realtime Notification Contest']),_ttref.push(['_clearEntrypoint','Contest'])),gaTrackEvent('GoalEntriesSubmitted')):b=='Services Bought'?gaTrackEvent('GoalServicesBought'):b=='Services Posted'?gaTrackEvent('GoalServicesPosted'):b=='Deposit Money'?gaTrackEvent('GoalDepositMoney'):b=='Suggestion Click'?(_t.push(['project_suggestion_redirect',{bidder_id:a.bidder_id,src_project_id:a.src_project_id,dst_project_id:a.dst_project_id,time:new Date}]),_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_Suggestion']),_ttref.push(['_trackEvent','Project','Suggestion','clicked',0])):b=='Service View'?_t.push(['user_action',{section:'ServiceViewPage',label:'ViewPage',action:'view'}]):b=='Service Order Modal Cancel'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderModal',label:'OrderModalCancel',action:'click'}]):b=='Service Order Button Click'?_t.push(['user_action',{section:'ServiceViewPage',label:'OrderButton',action:'click'}]):b=='Service Order Confirm Modal'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderModal',label:'OrderModal',action:'view'}]):b=='Service Order Button Click Logged Out'?_t.push(['user_action',{section:'ServiceViewPage',label:'OrderButtonLoggedOut',action:'click'}]):b=='Service Order Payment Verified'?_t.push(['user_action',{section:'ServiceViewPage',label:'OrderModalOkPaymentVerified',action:'click'}]):b=='Service Order Modal Purchase'?_t.push(['user_action',{section:'ServiceViewPage',label:'OrderModalOkPurchase',action:'click'}]):b=='Service Order Modal Ok'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderModal',label:'OrderModalOk',action:'click'}]):b=='Service Order Login Modal Login'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderLoginModal',label:'Login',action:'click'}]):b=='Service Order Login Modal FB Login'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderLoginModal',label:'FBLogin',action:'click'}]):b=='Service Order Login Modal Sign Up'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderLoginModal',label:'SignUp',action:'click'}]):b=='Service Order Deposit'?_t.push(['user_action',{section:'ServiceDepositPage',label:'OrderDepositPage',action:'view'}]):b=='Service Order Deposit Success'?_t.push(['user_action',{section:'ServiceProjectPage',label:'ServicePurchasedFromDeposit',action:'view'}]):b=='Dashboard MyProjects'?_t.push(['user_action',{section:'Dashboard',subsection:'Topnav',label:'MyProjects'}]):b=='Service Order Deposit Other Methods'?_t.push(['user_action',{section:'ServiceViewPage',subsection:'OrderDepositModal',label:'OrderDepositOtherMethods',action:'view'}]):b=='Showcase Upsell PVP'?(gaTrackEvent('GoalProjectShowcaseReposted'),_ttref.push(['_clearEntrypoint','Project']),_ttref.push(['_setEntrypoint','Project_ShowcaseUpsell']),_t.push(['user_action',{section:'ProjectShowcaseUpsell',subsection:'RepostButton',label:a.source,action:'click'}])):b=='Contest Email Upsell'?(_ttref.push(['_clearEntrypoint','Contest']),a.new_contest_upsell&&_ttref.push(['_setEntrypoint','Contest_EmailNewContestUpsell']),a.completed_contest_upsell&&_ttref.push(['_setEntrypoint','Contest_EmailCompletedContestUpsell'])):b=='Front Page Log In'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'FrontPageUpperRight',action:'click'}]):b=='Post Project Log In'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'PostProjectPage',action:'click'}]):b=='Post Contest Log In'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'PostContestPage',action:'click'}]):b=='Top Right Corner'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'TopRightCorner',action:'click'}]):b=='Hire Me Page'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'HireMePage',action:'click'}]):b=='User Login Page'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'UserLogInPage',action:'click'}]):b=='Repost Page'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'RepostPage',action:'click'}]):b=='Sign Up Modal'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'SignUpModal',action:'click'}]):b=='Find Freelancers Page'?_t.push(['user_action',{section:'Login',subsection:'LoginAttempt',label:'FindFreelancersPage',action:'click'}]):b=='Directory Page Search'?_t.push(['search',{section:'Directory',source:a.source,keyword:a.keyword,filters:a.filters,items_displayed:a.items_displayed,items_count:a.items_count,items_page:a.items_page}]):b=='Navigation Bar Search'?_t.push(['search',{section:'MainNav',keyword:a.keyword}]):b=='Jobs Page Search'?_t.push(['search',{section:'JobTable',source:a.source,keyword:a.keyword,filters:a.filters,items_displayed:a.items_displayed,items_count:a.items_count,items_page:a.items_page,sort:a.sort}]):b=='Work Search'?_t.push(['search',{section:'WorkTable',source:a.source,keyword:a.keyword,filters:a.filters,items_displayed:a.items_displayed,items_count:a.items_count,items_page:a.items_page,sort:a.sort}]):b=='Project View Page - Upsell Banner'?_t.push(['user_action',{section:'ProjectViewPage',subsection:a.eventOption.subsection,label:a.eventOption.label,action:a.eventOption.action}]):b==='Project View Page - Bid on this project'?_t.push(['user_action',{section:'Project',sub_section:'BidTheProject',label:a.label}]):_t.push(a)}var a=function(){function a(){this._events=[]}return a.prototype._save=function(){try{localStorage.setItem('LocalTracking',JSON.stringify(this._events))}catch(a){}},a.prototype._restore=function(){try{var a=JSON.parse(localStorage.getItem('LocalTracking'));for(var b=0,c=a.length;b<c;b++)event=a[b],this.push(event)}catch(d){}},a.prototype._process=function(a){var c=this._events;this._events=[];for(var d=0,e=c.length;d<e;d++)a=c[d],b(a);try{localStorage.removeItem('LocalTracking')}catch(f){}return 1},a.prototype.push=function(a,b){var c=5e3;typeof b=='object'&&(c=b.delay?b.delay:c),this._events.push(a),this._save();var d=this;return setTimeout(function(){d._process()},c),1},a.prototype.init=function(a){var b,c,d;this._restore(),a==null&&(a=[]);for(c=0,d=a.length;c<d;c++)b=a[c],this.push(b);return this},a}();window.LocalTracking=a}.call(this);var retargetingTracking=function(){var a=function(){var a=[];return a[1]='website',a[2]='mobile',a[3]='writing',a[4]='design',a[5]='data',a[6]='product',a[7]='sales',a[8]='business',a},b=function(a,b){window._pq=window._pq||[],b||(b='skill_cat_'),_pq.push(['track',b+a])},c=function(a,b){b||(b='SkillCategory'),window._fbq.push(['track',b,{cat:a}])},d=function(d){var e=a();typeof e[d]!='undefined'&&(b(e[d]),c(e[d]))},e=function(a,b){window._pq=window._pq||[];if(!a||typeof a!='string')a='track';_pq.push([a,b])},f=function(a,b,c){window._fbq=window._fbq||[];if(!a||typeof a!='string')a='track';c||(c={}),window._fbq.push([a,b,c])},g=function(){var a=[],b=[],c=function(b,c){jQuery.inArray(c,a)==-1&&(retargetingTracking.paTrack2('track','intent_'+b+'_'+c),retargetingTracking.fbTrack2('track',b,{intent:c}),a.push(c))},d=function(a,b,d,e){a.on(e,function(a){c(b,d)})},e=function(a,d,e){a.on(e,function(a){var e=jQuery(this).select2('val'),f=e.length,g=b.length;g>f?c(d,'skill_delete'):g<f&&c(d,'skill_add'),b=e})},f=function(a,b,d,e){a.on(e,function(a){jQuery(this).prop('checked')&&c(b,d)})};return{track:d,trackSkills:e,trackUpgrades:f}}();return{trackMappedCategory:d,paTrack2:e,fbTrack2:f,sendRetargetingEvents:g}}(),_lt=_lt||[]