(function(){var Tracking,create_cookie,guid,read_cookie,s4,which_edge,__slice=[].slice,__hasProp={}.hasOwnProperty;s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},guid=function(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()},create_cookie=function(name,value,days){var date,expires;return null==days&&(days=1),date=new Date,date.setTime(date.getTime()+1e3*3600*24*days),expires="; expires="+date.toGMTString(),document.cookie=""+name+"="+value+expires+"; path=/"},read_cookie=function(name){var c,ca,nameEq,v,_i,_len;for(nameEq=""+name+"=",ca=document.cookie.split(";"),_i=0,_len=ca.length;_len>_i;_i++){for(c=ca[_i],v=c;" "===v.charAt(0);)v=v.substring(1,v.length);if(0===v.indexOf(nameEq))return v.substring(nameEq.length,v.length)}return null},which_edge=function(){return read_cookie("lecdn")},Tracking=function(){function Tracking(image,account_id,defaults){this.image=image,this.account_id=account_id,this.defaults=null!=defaults?defaults:{},this._tracking_images=[],this._debug=!1,this.session_id=null,this.init_session()}return Tracking.prototype.replace_defaults=function(new_defaults){return this.defaults=new_defaults},Tracking.prototype.init_session=function(){return this.session_id||(this.session_id=read_cookie("_tracking_session")),this.session_id||(this.session_id=guid(),create_cookie("_tracking_session",this.session_id,365)),this},Tracking.prototype.log=function(){var msg,_ref;return msg=arguments.length>=1?__slice.call(arguments,0):[],this._debug&&alert.apply(null,msg),window.console&&(_ref=window.console).log.apply(_ref,msg),this},Tracking.prototype._load_image=function(url){var image;return image=document.createElement("img"),image.style.display="none",image.src=url,this._tracking_images.push(image),document.body.appendChild(image)},Tracking.prototype.last_image=function(){return 0===this._tracking_images.length?null:this._tracking_images[this._tracking_images.length-1].src},Tracking.prototype.push=function(event){var event_name,kvs,params;return event_name=event[0],params=event.length>=2?__slice.call(event,1):[],"string"==typeof event_name||event_name instanceof String?""===event_name?(this.log("Event name is empty"),this):"_replace_defaults"===event_name?(this.replace_defaults(params[0]),this):(kvs={},1===params.length&&(kvs=params[0]),kvs.page=window.location.pathname,kvs.location=""+window.location,kvs.title=document.title,kvs.edge=which_edge(),this.track(event_name,kvs),1):(this.log("Invalid event name pushed - "+event_name),this)},Tracking.prototype.init=function(_t){var event,_i,_len;for(null==_t&&(_t=[]),_i=0,_len=_t.length;_len>_i;_i++)event=_t[_i],this.push(event);return this},Tracking.prototype.track=function(event_name,kvs){var fragments,k,t,url,v,_ref;t=""+(new Date).getTime()+Math.random(),fragments=[];for(k in kvs)__hasProp.call(kvs,k)&&(v=kvs[k],fragments.push(""+k+"="+encodeURIComponent(v)));_ref=this.defaults;for(k in _ref)__hasProp.call(_ref,k)&&(v=_ref[k],fragments.push(""+k+"="+encodeURIComponent(v)));return fragments.push("session_id="+this.session_id),url=this.image+("?acct="+this.account_id+"&t="+t+"&en="+event_name+"&"),url+=fragments.join("&"),this._load_image(url)},Tracking.prototype.tracked_count=function(){return this._tracking_images.length},Tracking._guid=guid,Tracking}(),window.Tracking=Tracking}).call(this);
//@ sourceMappingURL=main.min.map