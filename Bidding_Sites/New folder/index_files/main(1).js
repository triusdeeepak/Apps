/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
/** @license
 * RequireJS plugin for async dependency load like JSONP and Google Maps
 * Author: Miller Medeiros
 * Version: 0.1.2 (2014/02/24)
 * Released under the MIT license
 */
define('jquery-wrapper',[],function(){return jQuery}),define('underscore-wrapper',['jquery-wrapper'],function(a){return _}),define('backbone-wrapper',['jquery-wrapper','underscore-wrapper'],function(a,b){return Backbone}),function(j,ra,p){j.fn.dataTableSettings=[];var D=j.fn.dataTableSettings;j.fn.dataTableExt={};var n=j.fn.dataTableExt;n.sVersion='1.7.6',n.sErrMode='alert',n.iApiIndex=0,n.oApi={},n.afnFiltering=[],n.aoFeatures=[],n.ofnSearch={},n.afnSortData=[],n.oStdClasses={sPagePrevEnabled:'paginate_enabled_previous',sPagePrevDisabled:'paginate_disabled_previous',sPageNextEnabled:'paginate_enabled_next',sPageNextDisabled:'paginate_disabled_next',sPageJUINext:'',sPageJUIPrev:'',sPageButton:'paginate_button',sPageButtonActive:'paginate_active',sPageButtonStaticDisabled:'paginate_button',sPageFirst:'first',sPagePrevious:'previous',sPageNext:'next',sPageLast:'last',sStripOdd:'odd',sStripEven:'even',sRowEmpty:'dataTables_empty',sWrapper:'dataTables_wrapper',sFilter:'dataTables_filter',sInfo:'dataTables_info',sPaging:'dataTables_paginate paging_',sLength:'dataTables_length',sProcessing:'dataTables_processing',sSortAsc:'sorting_asc',sSortDesc:'sorting_desc',sSortable:'sorting',sSortableAsc:'sorting_asc_disabled',sSortableDesc:'sorting_desc_disabled',sSortableNone:'sorting_disabled',sSortColumn:'sorting_',sSortJUIAsc:'',sSortJUIDesc:'',sSortJUI:'',sSortJUIAscAllowed:'',sSortJUIDescAllowed:'',sSortJUIWrapper:'',sScrollWrapper:'dataTables_scroll',sScrollHead:'dataTables_scrollHead',sScrollHeadInner:'dataTables_scrollHeadInner',sScrollBody:'dataTables_scrollBody',sScrollFoot:'dataTables_scrollFoot',sScrollFootInner:'dataTables_scrollFootInner',sFooterTH:''},n.oJUIClasses={sPagePrevEnabled:'fg-button ui-button ui-state-default ui-corner-left',sPagePrevDisabled:'fg-button ui-button ui-state-default ui-corner-left ui-state-disabled',sPageNextEnabled:'fg-button ui-button ui-state-default ui-corner-right',sPageNextDisabled:'fg-button ui-button ui-state-default ui-corner-right ui-state-disabled',sPageJUINext:'ui-icon ui-icon-circle-arrow-e',sPageJUIPrev:'ui-icon ui-icon-circle-arrow-w',sPageButton:'fg-button ui-button ui-state-default',sPageButtonActive:'fg-button ui-button ui-state-default ui-state-disabled',sPageButtonStaticDisabled:'fg-button ui-button ui-state-default ui-state-disabled',sPageFirst:'first ui-corner-tl ui-corner-bl',sPagePrevious:'previous',sPageNext:'next',sPageLast:'last ui-corner-tr ui-corner-br',sStripOdd:'odd',sStripEven:'even',sRowEmpty:'dataTables_empty',sWrapper:'dataTables_wrapper',sFilter:'dataTables_filter',sInfo:'dataTables_info',sPaging:'dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_',sLength:'dataTables_length',sProcessing:'dataTables_processing',sSortAsc:'ui-state-default',sSortDesc:'ui-state-default',sSortable:'ui-state-default',sSortableAsc:'ui-state-default',sSortableDesc:'ui-state-default',sSortableNone:'ui-state-default',sSortColumn:'sorting_',sSortJUIAsc:'css_right ui-icon ui-icon-triangle-1-n',sSortJUIDesc:'css_right ui-icon ui-icon-triangle-1-s',sSortJUI:'css_right ui-icon ui-icon-carat-2-n-s',sSortJUIAscAllowed:'css_right ui-icon ui-icon-carat-1-n',sSortJUIDescAllowed:'css_right ui-icon ui-icon-carat-1-s',sSortJUIWrapper:'DataTables_sort_wrapper',sScrollWrapper:'dataTables_scroll',sScrollHead:'dataTables_scrollHead ui-state-default',sScrollHeadInner:'dataTables_scrollHeadInner',sScrollBody:'dataTables_scrollBody',sScrollFoot:'dataTables_scrollFoot ui-state-default',sScrollFootInner:'dataTables_scrollFootInner',sFooterTH:'ui-state-default'},n.oPagination={two_button:{fnInit:function(a,b,c){var d,e,f;a.bJUI?(d=p.createElement('a'),e=p.createElement('a'),f=p.createElement('span'),f.className=a.oClasses.sPageJUINext,e.appendChild(f),f=p.createElement('span'),f.className=a.oClasses.sPageJUIPrev,d.appendChild(f)):(d=p.createElement('div'),e=p.createElement('div')),d.className=a.oClasses.sPagePrevDisabled,e.className=a.oClasses.sPageNextDisabled,d.title=a.oLanguage.oPaginate.sPrevious,e.title=a.oLanguage.oPaginate.sNext,b.appendChild(d),b.appendChild(e),j(d).bind('click.DT',function(){a.oApi._fnPageChange(a,'previous')&&c(a)}),j(e).bind('click.DT',function(){a.oApi._fnPageChange(a,'next')&&c(a)}),j(d).bind('selectstart.DT',function(){return!1}),j(e).bind('selectstart.DT',function(){return!1}),a.sTableId!==''&&typeof a.aanFeatures.p=='undefined'&&(b.setAttribute('id',a.sTableId+'_paginate'),d.setAttribute('id',a.sTableId+'_previous'),e.setAttribute('id',a.sTableId+'_next'))},fnUpdate:function(a){if(a.aanFeatures.p)for(var b=a.aanFeatures.p,c=0,d=b.length;c<d;c++)b[c].childNodes.length!==0&&(b[c].childNodes[0].className=a._iDisplayStart===0?a.oClasses.sPagePrevDisabled:a.oClasses.sPagePrevEnabled,b[c].childNodes[1].className=a.fnDisplayEnd()==a.fnRecordsDisplay()?a.oClasses.sPageNextDisabled:a.oClasses.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var d=p.createElement('span'),e=p.createElement('span'),f=p.createElement('span'),g=p.createElement('span'),h=p.createElement('span');d.innerHTML=a.oLanguage.oPaginate.sFirst,e.innerHTML=a.oLanguage.oPaginate.sPrevious,g.innerHTML=a.oLanguage.oPaginate.sNext,h.innerHTML=a.oLanguage.oPaginate.sLast;var i=a.oClasses;d.className=i.sPageButton+' '+i.sPageFirst,e.className=i.sPageButton+' '+i.sPagePrevious,g.className=i.sPageButton+' '+i.sPageNext,h.className=i.sPageButton+' '+i.sPageLast,b.appendChild(d),b.appendChild(e),b.appendChild(f),b.appendChild(g),b.appendChild(h),j(d).bind('click.DT',function(){a.oApi._fnPageChange(a,'first')&&c(a)}),j(e).bind('click.DT',function(){a.oApi._fnPageChange(a,'previous')&&c(a)}),j(g).bind('click.DT',function(){a.oApi._fnPageChange(a,'next')&&c(a)}),j(h).bind('click.DT',function(){a.oApi._fnPageChange(a,'last')&&c(a)}),j('span',b).bind('mousedown.DT',function(){return!1}).bind('selectstart.DT',function(){return!1}),a.sTableId!==''&&typeof a.aanFeatures.p=='undefined'&&(b.setAttribute('id',a.sTableId+'_paginate'),d.setAttribute('id',a.sTableId+'_first'),e.setAttribute('id',a.sTableId+'_previous'),g.setAttribute('id',a.sTableId+'_next'),h.setAttribute('id',a.sTableId+'_last'))},fnUpdate:function(a,b){if(a.aanFeatures.p){var c=n.oPagination.iFullNumbersShowPages,d=Math.floor(c/2),e=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),f=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,g='',h,i=a.oClasses;e<c?(d=1,h=e):f<=d?(d=1,h=c):f>=e-d?(d=e-c+1,h=e):(d=f-Math.ceil(c/2)+1,h=d+c-1);for(c=d;c<=h;c++)g+=f!=c?'<span class="'+i.sPageButton+'">'+c+'</span>':'<span class="'+i.sPageButtonActive+'">'+c+'</span>';h=a.aanFeatures.p;var k,l=function(){return a._iDisplayStart=(this.innerHTML*1-1)*a._iDisplayLength,b(a),!1},m=function(){return!1};c=0;for(d=h.length;c<d;c++)h[c].childNodes.length!==0&&(k=j('span:eq(2)',h[c]),k.html(g),j('span',k).bind('click.DT',l).bind('mousedown.DT',m).bind('selectstart.DT',m),k=h[c].getElementsByTagName('span'),k=[k[0],k[1],k[k.length-2],k[k.length-1]],j(k).removeClass(i.sPageButton+' '+i.sPageButtonActive+' '+i.sPageButtonStaticDisabled),f==1?(k[0].className+=' '+i.sPageButtonStaticDisabled,k[1].className+=' '+i.sPageButtonStaticDisabled):(k[0].className+=' '+i.sPageButton,k[1].className+=' '+i.sPageButton),e===0||f==e||a._iDisplayLength==-1?(k[2].className+=' '+i.sPageButtonStaticDisabled,k[3].className+=' '+i.sPageButtonStaticDisabled):(k[2].className+=' '+i.sPageButton,k[3].className+=' '+i.sPageButton))}}}},n.oSort={'string-asc':function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a<b?-1:a>b?1:0},'string-desc':function(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a<b?1:a>b?-1:0},'html-asc':function(a,b){return a=a.replace(/<.*?>/g,'').toLowerCase(),b=b.replace(/<.*?>/g,'').toLowerCase(),a<b?-1:a>b?1:0},'html-desc':function(a,b){return a=a.replace(/<.*?>/g,'').toLowerCase(),b=b.replace(/<.*?>/g,'').toLowerCase(),a<b?1:a>b?-1:0},'date-asc':function(a,b){a=Date.parse(a),b=Date.parse(b);if(isNaN(a)||a==='')a=Date.parse('01/01/1970 00:00:00');if(isNaN(b)||b==='')b=Date.parse('01/01/1970 00:00:00');return a-b},'date-desc':function(a,b){a=Date.parse(a),b=Date.parse(b);if(isNaN(a)||a==='')a=Date.parse('01/01/1970 00:00:00');if(isNaN(b)||b==='')b=Date.parse('01/01/1970 00:00:00');return b-a},'numeric-asc':function(a,b){return(a=='-'||a===''?0:a*1)-(b=='-'||b===''?0:b*1)},'numeric-desc':function(a,b){return(b=='-'||b===''?0:b*1)-(a=='-'||a===''?0:a*1)}},n.aTypes=[function(a){if(a.length===0)return'numeric';var b,c=!1;b=a.charAt(0);if('0123456789-'.indexOf(b)==-1)return null;for(var d=1;d<a.length;d++){b=a.charAt(d);if('0123456789.'.indexOf(b)==-1)return null;if(b=='.'){if(c)return null;c=!0}}return'numeric'},function(a){var b=Date.parse(a);return b!==null&&!isNaN(b)||a.length===0?'date':null},function(a){return a.indexOf('<')!=-1&&a.indexOf('>')!=-1?'html':null}],n.fnVersionCheck=function(a){var b=function(a,b){for(;a.length<b;)a+='0';return a},c=n.sVersion.split('.');a=a.split('.');for(var d='',e='',f=0,g=a.length;f<g;f++)d+=b(c[f],3),e+=b(a[f],3);return parseInt(d,10)>=parseInt(e,10)},n._oExternConfig={iNextUnique:0},j.fn.dataTable=function(g){function m(){this.fnRecordsTotal=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},this.fnRecordsDisplay=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},this.fnDisplayEnd=function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},this.sInstance=this.oInstance=null,this.oFeatures={bPaginate:!0,bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,bAutoWidth:!0,bProcessing:!1,bSortClasses:!0,bStateSave:!1,bServerSide:!1},this.oScroll={sX:'',sXInner:'',sY:'',bCollapse:!1,bInfinite:!1,iLoadGap:100,iBarWidth:0,bAutoCss:!0},this.aanFeatures=[],this.oLanguage={sProcessing:'Processing...',sLengthMenu:'Show _MENU_ entries',sZeroRecords:'No matching records found',sEmptyTable:'No data available in table',sInfo:T_('Showing <%= start_num %> to <%= end_num %> of <%= total_num %> entries',{start_num:'_START_',end_num:'_END_',total_num:'_TOTAL_'}),sInfoEmpty:T_('Showing 0 to 0 of 0 entries'),sInfoFiltered:'(filtered from _MAX_ total entries)',sInfoPostFix:'',sSearch:'Search:',sUrl:'',oPaginate:{sFirst:T_('First'),sPrevious:T_('Previous'),sNext:T_('Next'),sLast:T_('Last')},fnInfoCallback:null},this.aoData=[],this.aiDisplay=[],this.aiDisplayMaster=[],this.aoColumns=[],this.iNextId=0,this.asDataSearch=[],this.oPreviousSearch={sSearch:'',bRegex:!1,bSmart:!0},this.aoPreSearchCols=[],this.aaSorting=[[0,'asc',0]],this.aaSortingFixed=null,this.asStripClasses=[],this.asDestoryStrips=[],this.sDestroyWidth=0,this.fnFooterCallback=this.fnHeaderCallback=this.fnRowCallback=null,this.aoDrawCallback=[],this.fnInitComplete=null,this.sTableId='',this.nTableWrapper=this.nTBody=this.nTFoot=this.nTHead=this.nTable=null,this.bInitialised=!1,this.aoOpenRows=[],this.sDom='lfrtip',this.sPaginationType='two_button',this.iCookieDuration=7200,this.sCookiePrefix='SpryMedia_DataTables_',this.fnCookieCallback=null,this.aoStateSave=[],this.aoStateLoad=[],this.sAjaxSource=this.oLoadedState=null,this.bAjaxDataGet=!0,this.fnServerData=function(a,b,c){j.ajax({url:a,data:b,success:c,dataType:'json',cache:!1,error:function(a,b){b=='parsererror'&&alert('DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.')}})},this.fnFormatNumber=function(a){if(a<1e3)return a;var b=a+'';a=b.split('');var c='';b=b.length;for(var d=0;d<b;d++)d%3===0&&d!==0&&(c=','+c),c=a[b-d-1]+c;return c},this.aLengthMenu=[10,25,50,100],this.bDrawing=this.iDraw=0,this.iDrawError=-1,this._iDisplayLength=10,this._iDisplayStart=0,this._iDisplayEnd=10,this._iRecordsDisplay=this._iRecordsTotal=0,this.bJUI=!1,this.oClasses=n.oStdClasses,this.bSorted=this.bFiltered=!1,this.oInit=null}function r(a){return function(){var b=[A(this[n.iApiIndex])].concat(Array.prototype.slice.call(arguments));return n.oApi[a].apply(this,b)}}function s(a){var b,c;if(a.bInitialised===!1)setTimeout(function(){s(a)},200);else{sa(a),U(a),K(a,!0),a.oFeatures.bAutoWidth&&$(a),b=0;for(c=a.aoColumns.length;b<c;b++)a.aoColumns[b].sWidth!==null&&(a.aoColumns[b].nTh.style.width=v(a.aoColumns[b].sWidth));a.oFeatures.bSort?O(a):(a.aiDisplay=a.aiDisplayMaster.slice(),E(a),C(a)),a.sAjaxSource!==null&&!a.oFeatures.bServerSide?a.fnServerData.call(a.oInstance,a.sAjaxSource,[],function(c){for(b=0;b<c.aaData.length;b++)u(a,c.aaData[b]);a.iInitDisplayStart=a._iDisplayStart,a.oFeatures.bSort?O(a):(a.aiDisplay=a.aiDisplayMaster.slice(),E(a),C(a)),K(a,!1),w(a,c)}):a.oFeatures.bServerSide||(K(a,!1),w(a))}}function w(a,b){a._bInitComplete=!0,typeof a.fnInitComplete=='function'&&(typeof b!='undefined'?a.fnInitComplete.call(a.oInstance,a,b):a.fnInitComplete.call(a.oInstance,a))}function y(a,b,c){o(a.oLanguage,b,'sProcessing'),o(a.oLanguage,b,'sLengthMenu'),o(a.oLanguage,b,'sEmptyTable'),o(a.oLanguage,b,'sZeroRecords'),o(a.oLanguage,b,'sInfo'),o(a.oLanguage,b,'sInfoEmpty'),o(a.oLanguage,b,'sInfoFiltered'),o(a.oLanguage,b,'sInfoPostFix'),o(a.oLanguage,b,'sSearch'),typeof b.oPaginate!='undefined'&&(o(a.oLanguage.oPaginate,b.oPaginate,'sFirst'),o(a.oLanguage.oPaginate,b.oPaginate,'sPrevious'),o(a.oLanguage.oPaginate,b.oPaginate,'sNext'),o(a.oLanguage.oPaginate,b.oPaginate,'sLast')),typeof b.sEmptyTable=='undefined'&&typeof b.sZeroRecords!='undefined'&&o(a.oLanguage,b,'sZeroRecords','sEmptyTable'),c&&s(a)}function F(a,b){a.aoColumns[a.aoColumns.length++]={sType:null,_bAutoType:!0,bVisible:!0,bSearchable:!0,bSortable:!0,asSorting:['asc','desc'],sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,sTitle:b?b.innerHTML:'',sName:'',sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:!0,iDataSort:a.aoColumns.length-1,sSortDataType:'std',nTh:b?b:p.createElement('th'),nTf:null,anThExtra:[],anTfExtra:[]},b=a.aoColumns.length-1,typeof a.aoPreSearchCols[b]=='undefined'||a.aoPreSearchCols[b]===null?a.aoPreSearchCols[b]={sSearch:'',bRegex:!1,bSmart:!0}:(typeof a.aoPreSearchCols[b].bRegex=='undefined'&&(a.aoPreSearchCols[b].bRegex=!0),typeof a.aoPreSearchCols[b].bSmart=='undefined'&&(a.aoPreSearchCols[b].bSmart=!0)),x(a,b,null)}function x(a,b,c){b=a.aoColumns[b],typeof c!='undefined'&&c!==null&&(typeof c.sType!='undefined'&&(b.sType=c.sType,b._bAutoType=!1),o(b,c,'bVisible'),o(b,c,'bSearchable'),o(b,c,'bSortable'),o(b,c,'sTitle'),o(b,c,'sName'),o(b,c,'sWidth'),o(b,c,'sWidth','sWidthOrig'),o(b,c,'sClass'),o(b,c,'fnRender'),o(b,c,'bUseRendered'),o(b,c,'iDataSort'),o(b,c,'asSorting'),o(b,c,'sSortDataType')),a.oFeatures.bSort||(b.bSortable=!1),!b.bSortable||j.inArray('asc',b.asSorting)==-1&&j.inArray('desc',b.asSorting)==-1?(b.sSortingClass=a.oClasses.sSortableNone,b.sSortingClassJUI=''):j.inArray('asc',b.asSorting)!=-1&&j.inArray('desc',b.asSorting)==-1?(b.sSortingClass=a.oClasses.sSortableAsc,b.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):j.inArray('asc',b.asSorting)==-1&&j.inArray('desc',b.asSorting)!=-1&&(b.sSortingClass=a.oClasses.sSortableDesc,b.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function u(a,b){if(b.length!=a.aoColumns.length&&a.iDrawError!=a.iDraw)return H(a,0,'Added data (size '+b.length+') does not match known number of columns ('+a.aoColumns.length+')'),a.iDrawError=a.iDraw,-1;b=b.slice();var c=a.aoData.length;a.aoData.push({nTr:p.createElement('tr'),_iId:a.iNextId++,_aData:b,_anHidden:[],_sRowStripe:''});for(var d,e,f=0;f<b.length;f++)d=p.createElement('td'),b[f]===null&&(b[f]=''),typeof a.aoColumns[f].fnRender=='function'?(e=a.aoColumns[f].fnRender({iDataRow:c,iDataColumn:f,aData:b,oSettings:a}),d.innerHTML=e,a.aoColumns[f].bUseRendered&&(a.aoData[c]._aData[f]=e)):d.innerHTML=b[f],typeof b[f]!='string'&&(b[f]+=''),b[f]=j.trim(b[f]),a.aoColumns[f].sClass!==null&&(d.className=a.aoColumns[f].sClass),a.aoColumns[f]._bAutoType&&a.aoColumns[f].sType!='string'&&(e=aa(a.aoData[c]._aData[f]),a.aoColumns[f].sType===null?a.aoColumns[f].sType=e:a.aoColumns[f].sType!=e&&(a.aoColumns[f].sType='string')),a.aoColumns[f].bVisible?(a.aoData[c].nTr.appendChild(d),a.aoData[c]._anHidden[f]=null):a.aoData[c]._anHidden[f]=d;return a.aiDisplayMaster.push(c),c}function z(a){var b,c,d,e,f,g,h,i;if(a.sAjaxSource===null){h=a.nTBody.childNodes,b=0;for(c=h.length;b<c;b++)if(h[b].nodeName.toUpperCase()=='TR'){g=a.aoData.length,a.aoData.push({nTr:h[b],_iId:a.iNextId++,_aData:[],_anHidden:[],_sRowStripe:''}),a.aiDisplayMaster.push(g),i=a.aoData[g]._aData,g=h[b].childNodes,d=f=0;for(e=g.length;d<e;d++)g[d].nodeName.toUpperCase()=='TD'&&(i[f]=j.trim(g[d].innerHTML),f++)}}h=R(a),g=[],b=0;for(c=h.length;b<c;b++){d=0;for(e=h[b].childNodes.length;d<e;d++)f=h[b].childNodes[d],f.nodeName.toUpperCase()=='TD'&&g.push(f)}g.length!=h.length*a.aoColumns.length&&H(a,1,'Unexpected number of TD elements. Expected '+h.length*a.aoColumns.length+' and got '+g.length+'. DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.'),h=0;for(d=a.aoColumns.length;h<d;h++){a.aoColumns[h].sTitle===null&&(a.aoColumns[h].sTitle=a.aoColumns[h].nTh.innerHTML),e=a.aoColumns[h]._bAutoType,f=typeof a.aoColumns[h].fnRender=='function',i=a.aoColumns[h].sClass!==null;var k=a.aoColumns[h].bVisible,l,m;if(e||f||i||!k){b=0;for(c=a.aoData.length;b<c;b++)l=g[b*d+h],e&&a.aoColumns[h].sType!='string'&&(m=aa(a.aoData[b]._aData[h]),a.aoColumns[h].sType===null?a.aoColumns[h].sType=m:a.aoColumns[h].sType!=m&&(a.aoColumns[h].sType='string')),f&&(m=a.aoColumns[h].fnRender({iDataRow:b,iDataColumn:h,aData:a.aoData[b]._aData,oSettings:a}),l.innerHTML=m,a.aoColumns[h].bUseRendered&&(a.aoData[b]._aData[h]=m)),i&&(l.className+=' '+a.aoColumns[h].sClass),k?a.aoData[b]._anHidden[h]=null:(a.aoData[b]._anHidden[h]=l,l.parentNode.removeChild(l))}}}function U(a){var b,c,d,e,f,g=a.nTHead.getElementsByTagName('tr'),h=0,i;if(a.nTHead.getElementsByTagName('th').length!==0){b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh,a.aoColumns[b].sClass!==null&&j(c).addClass(a.aoColumns[b].sClass),e=1;for(f=g.length;e<f;e++)i=j(g[e]).children(),a.aoColumns[b].anThExtra.push(i[b-h]),a.aoColumns[b].bVisible||g[e].removeChild(i[b-h]);a.aoColumns[b].bVisible?a.aoColumns[b].sTitle!=c.innerHTML&&(c.innerHTML=a.aoColumns[b].sTitle):(c.parentNode.removeChild(c),h++)}}else{e=p.createElement('tr'),b=0;for(d=a.aoColumns.length;b<d;b++)c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,a.aoColumns[b].sClass!==null&&j(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].bVisible&&e.appendChild(c);j(a.nTHead).html('')[0].appendChild(e)}if(a.bJUI){b=0;for(d=a.aoColumns.length;b<d;b++)c=a.aoColumns[b].nTh,e=p.createElement('div'),e.className=a.oClasses.sSortJUIWrapper,j(c).contents().appendTo(e),e.appendChild(p.createElement('span')),c.appendChild(e)}d=function(){return this.onselectstart=function(){return!1},!1};if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)a.aoColumns[b].bSortable!==!1?(ba(a,a.aoColumns[b].nTh,b),j(a.aoColumns[b].nTh).bind('mousedown.DT',d)):j(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);if(a.nTFoot!==null){h=0,g=a.nTFoot.getElementsByTagName('tr'),c=g[0].getElementsByTagName('th'),b=0;for(d=c.length;b<d;b++)if(typeof a.aoColumns[b]!='undefined'){a.aoColumns[b].nTf=c[b-h],a.oClasses.sFooterTH!==''&&(a.aoColumns[b].nTf.className+=' '+a.oClasses.sFooterTH),e=1;for(f=g.length;e<f;e++)i=j(g[e]).children(),a.aoColumns[b].anTfExtra.push(i[b-h]),a.aoColumns[b].bVisible||g[e].removeChild(i[b-h]);a.aoColumns[b].bVisible||(c[b-h].parentNode.removeChild(c[b-h]),h++)}}}function C(a){var b,c,d=[],e=0,f=!1;b=a.asStripClasses.length,c=a.aoOpenRows.length,a.bDrawing=!0,typeof a.iInitDisplayStart!='undefined'&&a.iInitDisplayStart!=-1&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,E(a));if(!(!a.bDestroying&&a.oFeatures.bServerSide&&!ta(a))){a.oFeatures.bServerSide||a.iDraw++;if(a.aiDisplay.length!==0){var g=a._iDisplayStart,h=a._iDisplayEnd;a.oFeatures.bServerSide&&(g=0,h=a.aoData.length);for(g=g;g<h;g++){var i=a.aoData[a.aiDisplay[g]],k=i.nTr;if(b!==0){var l=a.asStripClasses[e%b];i._sRowStripe!=l&&(j(k).removeClass(i._sRowStripe).addClass(l),i._sRowStripe=l)}typeof a.fnRowCallback=='function'&&(k=a.fnRowCallback.call(a.oInstance,k,a.aoData[a.aiDisplay[g]]._aData,e,g),!k&&!f&&(H(a,0,'A node was not returned by fnRowCallback'),f=!0)),d.push(k),e++;if(c!==0)for(i=0;i<c;i++)k==a.aoOpenRows[i].nParent&&d.push(a.aoOpenRows[i].nTr)}}else d[0]=p.createElement('tr'),typeof a.asStripClasses[0]!='undefined'&&(d[0].className=a.asStripClasses[0]),f=p.createElement('td'),f.setAttribute('valign','top'),f.colSpan=S(a),f.className=a.oClasses.sRowEmpty,f.innerHTML=typeof a.oLanguage.sEmptyTable!='undefined'&&a.fnRecordsTotal()===0?a.oLanguage.sEmptyTable:a.oLanguage.sZeroRecords.replace('_MAX_',a.fnFormatNumber(a.fnRecordsTotal())),d[e].appendChild(f);typeof a.fnHeaderCallback=='function'&&a.fnHeaderCallback.call(a.oInstance,j('>tr',a.nTHead)[0],V(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay),typeof a.fnFooterCallback=='function'&&a.fnFooterCallback.call(a.oInstance,j('>tr',a.nTFoot)[0],V(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay),e=p.createDocumentFragment(),b=p.createDocumentFragment();if(a.nTBody){f=a.nTBody.parentNode,b.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){c=a.nTBody.childNodes;for(b=c.length-1;b>=0;b--)c[b].parentNode.removeChild(c[b])}b=0;for(c=d.length;b<c;b++)e.appendChild(d[b]);a.nTBody.appendChild(e),f!==null&&f.appendChild(a.nTBody)}for(b=a.aoDrawCallback.length-1;b>=0;b--)a.aoDrawCallback[b].fn.call(a.oInstance,a);a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1,a.oFeatures.bServerSide&&(K(a,!1),typeof a._bInitComplete=='undefined'&&w(a))}}function W(a){a.oFeatures.bSort?O(a,a.oPreviousSearch):a.oFeatures.bFilter?P(a,a.oPreviousSearch):(E(a),C(a))}function ta(a){if(a.bAjaxDataGet){K(a,!0);var b=a.aoColumns.length,c=[],d;a.iDraw++,c.push({name:'sEcho',value:a.iDraw}),c.push({name:'iColumns',value:b}),c.push({name:'sColumns',value:ca(a)}),c.push({name:'iDisplayStart',value:a._iDisplayStart}),c.push({name:'iDisplayLength',value:a.oFeatures.bPaginate!==!1?a._iDisplayLength:-1});if(a.oFeatures.bFilter!==!1){c.push({name:'sSearch',value:a.oPreviousSearch.sSearch}),c.push({name:'bRegex',value:a.oPreviousSearch.bRegex});for(d=0;d<b;d++)c.push({name:'sSearch_'+d,value:a.aoPreSearchCols[d].sSearch}),c.push({name:'bRegex_'+d,value:a.aoPreSearchCols[d].bRegex}),c.push({name:'bSearchable_'+d,value:a.aoColumns[d].bSearchable})}if(a.oFeatures.bSort!==!1){var e=a.aaSortingFixed!==null?a.aaSortingFixed.length:0,f=a.aaSorting.length;c.push({name:'iSortingCols',value:e+f});for(d=0;d<e;d++)c.push({name:'iSortCol_'+d,value:a.aaSortingFixed[d][0]}),c.push({name:'sSortDir_'+d,value:a.aaSortingFixed[d][1]});for(d=0;d<f;d++)c.push({name:'iSortCol_'+(d+e),value:a.aaSorting[d][0]}),c.push({name:'sSortDir_'+(d+e),value:a.aaSorting[d][1]});for(d=0;d<b;d++)c.push({name:'bSortable_'+d,value:a.aoColumns[d].bSortable})}return a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(b){ua(a,b)}),!1}return!0}function ua(a,b){if(typeof b.sEcho!='undefined'){if(b.sEcho*1<a.iDraw)return;a.iDraw=b.sEcho*1}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&da(a),a._iRecordsTotal=b.iTotalRecords,a._iRecordsDisplay=b.iTotalDisplayRecords;var c=ca(a);if(c=typeof b.sColumns!='undefined'&&c!==''&&b.sColumns!=c)var d=va(a,b.sColumns);for(var e=0,f=b.aaData.length;e<f;e++)if(c){for(var g=[],h=0,i=a.aoColumns.length;h<i;h++)g.push(b.aaData[e][d[h]]);u(a,g)}else u(a,b.aaData[e]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,C(a),a.bAjaxDataGet=!0,K(a,!1)}function sa(a){var b=p.createElement('div');a.nTable.parentNode.insertBefore(b,a.nTable),a.nTableWrapper=p.createElement('div'),a.nTableWrapper.className=a.oClasses.sWrapper,a.sTableId!==''&&a.nTableWrapper.setAttribute('id',a.sTableId+'_wrapper');for(var c=a.nTableWrapper,d=a.sDom.split(''),e,f,g,h,i,j,k,l=0;l<d.length;l++){f=0,g=d[l];if(g=='<'){h=p.createElement('div'),i=d[l+1];if(i=='\''||i=='"'){j='';for(k=2;d[l+k]!=i;)j+=d[l+k],k++;j=='H'?j='fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix':j=='F'&&(j='fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix'),j.indexOf('.')!=-1?(i=j.split('.'),h.setAttribute('id',i[0].substr(1,i[0].length-1)),h.className=i[1]):j.charAt(0)=='#'?h.setAttribute('id',j.substr(1,j.length-1)):h.className=j,l+=k}c.appendChild(h),c=h}else if(g=='>')c=c.parentNode;else if(g=='l'&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)e=wa(a),f=1;else if(g=='f'&&a.oFeatures.bFilter)e=xa(a),f=1;else if(g=='r'&&a.oFeatures.bProcessing)e=ya(a),f=1;else if(g=='t')e=za(a),f=1;else if(g=='i'&&a.oFeatures.bInfo)e=Aa(a),f=1;else if(g=='p'&&a.oFeatures.bPaginate)e=Ba(a),f=1;else if(n.aoFeatures.length!==0){h=n.aoFeatures,k=0;for(i=h.length;k<i;k++)if(g==h[k].cFeature){if(e=h[k].fnInit(a))f=1;break}}f==1&&e!==null&&(typeof a.aanFeatures[g]!='object'&&(a.aanFeatures[g]=[]),a.aanFeatures[g].push(e),c.appendChild(e))}b.parentNode.replaceChild(a.nTableWrapper,b)}function za(a){if(a.oScroll.sX===''&&a.oScroll.sY==='')return a.nTable;var b=p.createElement('div'),c=p.createElement('div'),d=p.createElement('div'),e=p.createElement('div'),f=p.createElement('div'),h=p.createElement('div'),i=a.nTable.cloneNode(!1),k=a.nTable.cloneNode(!1),l=a.nTable.getElementsByTagName('thead')[0],m=a.nTable.getElementsByTagName('tfoot').length===0?null:a.nTable.getElementsByTagName('tfoot')[0],o=typeof g.bJQueryUI!='undefined'&&g.bJQueryUI?n.oJUIClasses:n.oStdClasses;c.appendChild(d),f.appendChild(h),e.appendChild(a.nTable),b.appendChild(c),b.appendChild(e),d.appendChild(i),i.appendChild(l),m!==null&&(b.appendChild(f),h.appendChild(k),k.appendChild(m)),b.className=o.sScrollWrapper,c.className=o.sScrollHead,d.className=o.sScrollHeadInner,e.className=o.sScrollBody,f.className=o.sScrollFoot,h.className=o.sScrollFootInner,a.oScroll.bAutoCss&&(c.style.overflow='hidden',c.style.position='relative',f.style.overflow='hidden',e.style.overflow='auto'),c.style.border='0',c.style.width='100%',f.style.border='0',d.style.width='150%',i.removeAttribute('id'),i.style.marginLeft='0',a.nTable.style.marginLeft='0',m!==null&&(k.removeAttribute('id'),k.style.marginLeft='0'),d=j('>caption',a.nTable),h=0;for(k=d.length;h<k;h++)i.appendChild(d[h]);return a.oScroll.sX!==''&&(c.style.width=v(a.oScroll.sX),e.style.width=v(a.oScroll.sX),m!==null&&(f.style.width=v(a.oScroll.sX)),j(e).scroll(function(){c.scrollLeft=this.scrollLeft,m!==null&&(f.scrollLeft=this.scrollLeft)})),a.oScroll.sY!==''&&(e.style.height=v(a.oScroll.sY)),a.aoDrawCallback.push({fn:Ca,sName:'scrolling'}),a.oScroll.bInfinite&&j(e).scroll(function(){a.bDrawing||j(this).scrollTop()+j(this).height()>j(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(ea(a,'next'),E(a),C(a))}),a.nScrollHead=c,a.nScrollFoot=f,b}function Ca(a){var b=a.nScrollHead.getElementsByTagName('div')[0],c=b.getElementsByTagName('table')[0],d=a.nTable.parentNode,e,f,g,h,i,k,l,m,n=[];g=a.nTable.getElementsByTagName('thead'),g.length>0&&a.nTable.removeChild(g[0]),a.nTFoot!==null&&(i=a.nTable.getElementsByTagName('tfoot'),i.length>0&&a.nTable.removeChild(i[0])),g=a.nTHead.cloneNode(!0),a.nTable.insertBefore(g,a.nTable.childNodes[0]),a.nTFoot!==null&&(i=a.nTFoot.cloneNode(!0),a.nTable.insertBefore(i,a.nTable.childNodes[1]));var o=fa(g);e=0;for(f=o.length;e<f;e++)l=ga(a,e),o[e].style.width=a.aoColumns[l].sWidth;a.nTFoot!==null&&L(function(a){a.style.width=''},i.getElementsByTagName('tr')),e=j(a.nTable).outerWidth(),a.oScroll.sX===''?(a.nTable.style.width='100%',j.browser.msie&&j.browser.version<=7&&(a.nTable.style.width=v(j(a.nTable).outerWidth()-a.oScroll.iBarWidth))):a.oScroll.sXInner!==''?a.nTable.style.width=v(a.oScroll.sXInner):e==j(d).width()&&j(d).height()<j(a.nTable).height()?(a.nTable.style.width=v(e-a.oScroll.iBarWidth),j(a.nTable).outerWidth()>e-a.oScroll.iBarWidth&&(a.nTable.style.width=v(e))):a.nTable.style.width=v(e),e=j(a.nTable).outerWidth(),f=a.nTHead.getElementsByTagName('tr'),g=g.getElementsByTagName('tr'),L(function(a,b){k=a.style,k.paddingTop='0',k.paddingBottom='0',k.borderTopWidth='0',k.borderBottomWidth='0',k.height=0,m=j(a).width(),b.style.width=v(m),n.push(m)},g,f),j(g).height(0),a.nTFoot!==null&&(h=i.getElementsByTagName('tr'),i=a.nTFoot.getElementsByTagName('tr'),L(function(a,b){k=a.style,k.paddingTop='0',k.paddingBottom='0',k.borderTopWidth='0',k.borderBottomWidth='0',k.height=0,m=j(a).width(),b.style.width=v(m),n.push(m)},h,i),j(h).height(0)),L(function(a){a.innerHTML='',a.style.width=v(n.shift())},g),a.nTFoot!==null&&L(function(a){a.innerHTML='',a.style.width=v(n.shift())},h),j(a.nTable).outerWidth()<e&&(a.oScroll.sX===''?H(a,1,'The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn'):a.oScroll.sXInner!==''&&H(a,1,'The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation')),a.oScroll.sY===''&&j.browser.msie&&j.browser.version<=7&&(d.style.height=v(a.nTable.offsetHeight+a.oScroll.iBarWidth)),a.oScroll.sY!==''&&a.oScroll.bCollapse&&(d.style.height=v(a.oScroll.sY),h=a.oScroll.sX!==''&&a.nTable.offsetWidth>d.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<d.offsetHeight&&(d.style.height=v(j(a.nTable).height()+h))),h=j(a.nTable).outerWidth(),c.style.width=v(h),b.style.width=v(h+a.oScroll.iBarWidth),a.nTFoot!==null&&(b=a.nScrollFoot.getElementsByTagName('div')[0],c=b.getElementsByTagName('table')[0],b.style.width=v(a.nTable.offsetWidth+a.oScroll.iBarWidth),c.style.width=v(a.nTable.offsetWidth));if(a.bSorted||a.bFiltered)d.scrollTop=0}function X(a){if(a.oFeatures.bAutoWidth===!1)return!1;$(a);for(var b=0,c=a.aoColumns.length;b<c;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function xa(a){var b=p.createElement('div');a.sTableId!==''&&typeof a.aanFeatures.f=='undefined'&&b.setAttribute('id',a.sTableId+'_filter'),b.className=a.oClasses.sFilter,b.innerHTML=a.oLanguage.sSearch+(a.oLanguage.sSearch===''?'':' ')+'<input type="text" />';var c=j('input',b);return c.val(a.oPreviousSearch.sSearch.replace('"','&quot;')),c.bind('keyup.DT',function(){for(var b=a.aanFeatures.f,c=0,d=b.length;c<d;c++)b[c]!=this.parentNode&&j('input',b[c]).val(this.value);this.value!=a.oPreviousSearch.sSearch&&P(a,{sSearch:this.value,bRegex:a.oPreviousSearch.bRegex,bSmart:a.oPreviousSearch.bSmart})}),c.bind('keypress.DT',function(a){if(a.keyCode==13)return!1}),b}function P(a,b,c){Da(a,b.sSearch,c,b.bRegex,b.bSmart);for(b=0;b<a.aoPreSearchCols.length;b++)Ea(a,a.aoPreSearchCols[b].sSearch,b,a.aoPreSearchCols[b].bRegex,a.aoPreSearchCols[b].bSmart);n.afnFiltering.length!==0&&Fa(a),a.bFiltered=!0,a._iDisplayStart=0,E(a),C(a),ha(a,0)}function Fa(a){for(var b=n.afnFiltering,c=0,d=b.length;c<d;c++)for(var e=0,f=0,g=a.aiDisplay.length;f<g;f++){var h=a.aiDisplay[f-e];b[c](a,a.aoData[h]._aData,h)||(a.aiDisplay.splice(f-e,1),e++)}}function Ea(a,b,c,d,e){if(b!==''){var f=0;b=ia(b,d,e);for(d=a.aiDisplay.length-1;d>=0;d--)e=ja(a.aoData[a.aiDisplay[d]]._aData[c],a.aoColumns[c].sType),b.test(e)||(a.aiDisplay.splice(d,1),f++)}}function Da(a,b,c,d,e){var f=ia(b,d,e);if(typeof c=='undefined'||c===null)c=0;n.afnFiltering.length!==0&&(c=1);if(b.length<=0)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||a.oPreviousSearch.sSearch.length>b.length||c==1||b.indexOf(a.oPreviousSearch.sSearch)!==0){a.aiDisplay.splice(0,a.aiDisplay.length),ha(a,1);for(c=0;c<a.aiDisplayMaster.length;c++)f.test(a.asDataSearch[c])&&a.aiDisplay.push(a.aiDisplayMaster[c])}else{var g=0;for(c=0;c<a.asDataSearch.length;c++)f.test(a.asDataSearch[c])||(a.aiDisplay.splice(c-g,1),g++)}a.oPreviousSearch.sSearch=b,a.oPreviousSearch.bRegex=d,a.oPreviousSearch.bSmart=e}function ha(a,b){a.asDataSearch.splice(0,a.asDataSearch.length),b=typeof b!='undefined'&&b==1?a.aiDisplayMaster:a.aiDisplay;for(var c=0,d=b.length;c<d;c++)a.asDataSearch[c]=ka(a,a.aoData[b[c]]._aData)}function ka(a,b){for(var c='',d=p.createElement('div'),e=0,f=a.aoColumns.length;e<f;e++)a.aoColumns[e].bSearchable&&(c+=ja(b[e],a.aoColumns[e].sType)+'  ');return c.indexOf('&')!==-1&&(d.innerHTML=c,c=d.textContent?d.textContent:d.innerText,c=c.replace(/\n/g,' ').replace(/\r/g,'')),c}function ia(a,b,c){return c?(a=b?a.split(' '):la(a).split(' '),a='^(?=.*?'+a.join(')(?=.*?')+').*$',new RegExp(a,'i')):(a=b?a:la(a),new RegExp(a,'i'))}function ja(a,b){return typeof n.ofnSearch[b]=='function'?n.ofnSearch[b](a):b=='html'?a.replace(/\n/g,' ').replace(/<.*?>/g,''):typeof a=='string'?a.replace(/\n/g,' '):a}function O(a,b){var c,d,e,f,g,h,i=[],j=[],k=n.oSort,l=a.aoData,m=a.aoColumns;if(!a.oFeatures.bServerSide&&(a.aaSorting.length!==0||a.aaSortingFixed!==null)){i=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(e=0;e<i.length;e++){f=i[e][0],g=M(a,f),h=a.aoColumns[f].sSortDataType;if(typeof n.afnSortData[h]!='undefined'){var o=n.afnSortData[h](a,f,g);g=0;for(h=l.length;g<h;g++)l[g]._aData[f]=o[g]}}e=0;for(f=a.aiDisplayMaster.length;e<f;e++)j[a.aiDisplayMaster[e]]=e;var p=i.length;a.aiDisplayMaster.sort(function(a,b){var f;for(e=0;e<p;e++){c=m[i[e][0]].iDataSort,d=m[c].sType,f=k[d+'-'+i[e][1]](l[a]._aData[c],l[b]._aData[c]);if(f!==0)return f}return k['numeric-asc'](j[a],j[b])})}(typeof b=='undefined'||b)&&T(a),a.bSorted=!0,a.oFeatures.bFilter?P(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,E(a),C(a))}function ba(a,b,c,d){j(b).bind('click.DT',function(b){if(a.aoColumns[c].bSortable!==!1){var e=function(){var d,e;if(b.shiftKey){for(var g=!1,h=0;h<a.aaSorting.length;h++)if(a.aaSorting[h][0]==c){g=!0,d=a.aaSorting[h][0],e=a.aaSorting[h][2]+1,typeof a.aoColumns[d].asSorting[e]=='undefined'?a.aaSorting.splice(h,1):(a.aaSorting[h][1]=a.aoColumns[d].asSorting[e],a.aaSorting[h][2]=e);break}g===!1&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else a.aaSorting.length==1&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,typeof a.aoColumns[d].asSorting[e]=='undefined'&&(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));O(a)};a.oFeatures.bProcessing?(K(a,!0),setTimeout(function(){e(),a.oFeatures.bServerSide||K(a,!1)},0)):e(),typeof d=='function'&&d(a)}})}function T(a){var b,c,d,e,f,g=a.aoColumns.length,h=a.oClasses;for(b=0;b<g;b++)a.aoColumns[b].bSortable&&j(a.aoColumns[b].nTh).removeClass(h.sSortAsc+' '+h.sSortDesc+' '+a.aoColumns[b].sSortingClass);e=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){f=a.aoColumns[b].sSortingClass,d=-1;for(c=0;c<e.length;c++)if(e[c][0]==b){f=e[c][1]=='asc'?h.sSortAsc:h.sSortDesc,d=c;break}j(a.aoColumns[b].nTh).addClass(f),a.bJUI&&(c=j('span',a.aoColumns[b].nTh),c.removeClass(h.sSortJUIAsc+' '+h.sSortJUIDesc+' '+h.sSortJUI+' '+h.sSortJUIAscAllowed+' '+h.sSortJUIDescAllowed),c.addClass(d==-1?a.aoColumns[b].sSortingClassJUI:e[d][1]=='asc'?h.sSortJUIAsc:h.sSortJUIDesc))}else j(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);f=h.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){d=Z(a);if(d.length>=g)for(b=0;b<g;b++)if(d[b].className.indexOf(f+'1')!=-1){c=0;for(a=d.length/g;c<a;c++)d[g*c+b].className=j.trim(d[g*c+b].className.replace(f+'1',''))}else if(d[b].className.indexOf(f+'2')!=-1){c=0;for(a=d.length/g;c<a;c++)d[g*c+b].className=j.trim(d[g*c+b].className.replace(f+'2',''))}else if(d[b].className.indexOf(f+'3')!=-1){c=0;for(a=d.length/g;c<a;c++)d[g*c+b].className=j.trim(d[g*c+b].className.replace(' '+f+'3',''))}h=1;var i;for(b=0;b<e.length;b++){i=parseInt(e[b][0],10),c=0;for(a=d.length/g;c<a;c++)d[g*c+i].className+=' '+f+h;h<3&&h++}}}function Ba(a){if(a.oScroll.bInfinite)return null;var b=p.createElement('div');return b.className=a.oClasses.sPaging+a.sPaginationType,n.oPagination[a.sPaginationType].fnInit(a,b,function(a){E(a),C(a)}),typeof a.aanFeatures.p=='undefined'&&a.aoDrawCallback.push({fn:function(a){n.oPagination[a.sPaginationType].fnUpdate(a,function(a){E(a),C(a)})},sName:'pagination'}),b}function ea(a,b){var c=a._iDisplayStart;return b=='first'?a._iDisplayStart=0:b=='previous'?(a._iDisplayStart=a._iDisplayLength>=0?a._iDisplayStart-a._iDisplayLength:0,a._iDisplayStart<0&&(a._iDisplayStart=0)):b=='next'?a._iDisplayLength>=0?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0:b=='last'?a._iDisplayLength>=0?(b=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1,a._iDisplayStart=(b-1)*a._iDisplayLength):a._iDisplayStart=0:H(a,0,'Unknown paging action: '+b),c!=a._iDisplayStart}function Aa(a){var b=p.createElement('div');return b.className=a.oClasses.sInfo,typeof a.aanFeatures.i=='undefined'&&(a.aoDrawCallback.push({fn:Ga,sName:'information'}),a.sTableId!==''&&b.setAttribute('id',a.sTableId+'_info')),b}function Ga(a){if(!!a.oFeatures.bInfo&&a.aanFeatures.i.length!==0){var b=a._iDisplayStart+1,c=a.fnDisplayEnd(),d=a.fnRecordsTotal(),e=a.fnRecordsDisplay(),f=a.fnFormatNumber(b),g=a.fnFormatNumber(c),h=a.fnFormatNumber(d),i=a.fnFormatNumber(e);a.oScroll.bInfinite&&(f=a.fnFormatNumber(1)),f=a.fnRecordsDisplay()===0&&a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfoEmpty+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()===0?a.oLanguage.sInfoEmpty+' '+a.oLanguage.sInfoFiltered.replace('_MAX_',h)+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfo.replace('_START_',f).replace('_END_',g).replace('_TOTAL_',i)+a.oLanguage.sInfoPostFix:a.oLanguage.sInfo.replace('_START_',f).replace('_END_',g).replace('_TOTAL_',i)+' '+a.oLanguage.sInfoFiltered.replace('_MAX_',a.fnFormatNumber(a.fnRecordsTotal()))+a.oLanguage.sInfoPostFix,a.oLanguage.fnInfoCallback!==null&&(f=a.oLanguage.fnInfoCallback(a,b,c,d,e,f)),a=a.aanFeatures.i,b=0;for(c=a.length;b<c;b++)j(a[b]).html(f)}}function wa(a){if(a.oScroll.bInfinite)return null;var b='<select size="1" '+(a.sTableId===''?'':'name="'+a.sTableId+'_length"')+'>',c,d;if(a.aLengthMenu.length==2&&typeof a.aLengthMenu[0]=='object'&&typeof a.aLengthMenu[1]=='object'){c=0;for(d=a.aLengthMenu[0].length;c<d;c++)b+='<option value="'+a.aLengthMenu[0][c]+'">'+a.aLengthMenu[1][c]+'</option>'}else{c=0;for(d=a.aLengthMenu.length;c<d;c++)b+='<option value="'+a.aLengthMenu[c]+'">'+a.aLengthMenu[c]+'</option>'}b+='</select>';var e=p.createElement('div');return a.sTableId!==''&&typeof a.aanFeatures.l=='undefined'&&e.setAttribute('id',a.sTableId+'_length'),e.className=a.oClasses.sLength,e.innerHTML=a.oLanguage.sLengthMenu.replace('_MENU_',b),j('select option[value="'+a._iDisplayLength+'"]',e).attr('selected',!0),j('select',e).bind('change.DT',function(){var b=j(this).val(),e=a.aanFeatures.l;c=0;for(d=e.length;c<d;c++)e[c]!=this.parentNode&&j('select',e[c]).val(b);a._iDisplayLength=parseInt(b,10),E(a),a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,a._iDisplayStart<0&&(a._iDisplayStart=0)),a._iDisplayLength==-1&&(a._iDisplayStart=0),C(a)}),e}function ya(a){var b=p.createElement('div');return a.sTableId!==''&&typeof a.aanFeatures.r=='undefined'&&b.setAttribute('id',a.sTableId+'_processing'),b.innerHTML=a.oLanguage.sProcessing,b.className=a.oClasses.sProcessing,a.nTable.parentNode.insertBefore(b,a.nTable),b}function K(a,b){if(a.oFeatures.bProcessing){a=a.aanFeatures.r;for(var c=0,d=a.length;c<d;c++)a[c].style.visibility=b?'visible':'hidden'}}function ga(a,b){for(var c=-1,d=0;d<a.aoColumns.length;d++){a.aoColumns[d].bVisible===!0&&c++;if(c==b)return d}return null}function M(a,b){for(var c=-1,d=0;d<a.aoColumns.length;d++){a.aoColumns[d].bVisible===!0&&c++;if(d==b)return a.aoColumns[d].bVisible===!0?c:null}return null}function Q(a,b){var c,d;c=a._iDisplayStart;for(d=a._iDisplayEnd;c<d;c++)if(a.aoData[a.aiDisplay[c]].nTr==b)return a.aiDisplay[c];c=0;for(d=a.aoData.length;c<d;c++)if(a.aoData[c].nTr==b)return c;return null}function S(a){for(var b=0,c=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible===!0&&b++;return b}function E(a){a._iDisplayEnd=a.oFeatures.bPaginate===!1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||a._iDisplayLength==-1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Ha(a,b){if(!a||a===null||a==='')return 0;typeof b=='undefined'&&(b=p.getElementsByTagName('body')[0]);var c=p.createElement('div');return c.style.width=a,b.appendChild(c),a=c.offsetWidth,b.removeChild(c),a}function $(a){var b=0,c,d=0,e=a.aoColumns.length,f,g=j('th',a.nTHead);for(f=0;f<e;f++)a.aoColumns[f].bVisible&&(d++,a.aoColumns[f].sWidth!==null&&(c=Ha(a.aoColumns[f].sWidthOrig,a.nTable.parentNode),c!==null&&(a.aoColumns[f].sWidth=v(c)),b++));if(e==g.length&&b===0&&d==e&&a.oScroll.sX===''&&a.oScroll.sY==='')for(f=0;f<a.aoColumns.length;f++)c=j(g[f]).width(),c!==null&&(a.aoColumns[f].sWidth=v(c));else{b=a.nTable.cloneNode(!1),f=p.createElement('tbody'),c=p.createElement('tr'),b.removeAttribute('id'),b.appendChild(a.nTHead.cloneNode(!0)),a.nTFoot!==null&&(b.appendChild(a.nTFoot.cloneNode(!0)),L(function(a){a.style.width=''},b.getElementsByTagName('tr'))),b.appendChild(f),f.appendChild(c),f=j('thead th',b),f.length===0&&(f=j('tbody tr:eq(0)>td',b)),f.each(function(b){this.style.width='',b=ga(a,b),b!==null&&a.aoColumns[b].sWidthOrig!==''&&(this.style.width=a.aoColumns[b].sWidthOrig)});for(f=0;f<e;f++)a.aoColumns[f].bVisible&&(d=Ia(a,f),d!==null&&(d=d.cloneNode(!0),c.appendChild(d)));f=a.nTable.parentNode,f.appendChild(b),a.oScroll.sX!==''&&a.oScroll.sXInner!==''?b.style.width=v(a.oScroll.sXInner):a.oScroll.sX!==''?(b.style.width='',j(b).width()<f.offsetWidth&&(b.style.width=v(f.offsetWidth))):a.oScroll.sY!==''&&(b.style.width=v(f.offsetWidth)),b.style.visibility='hidden',Ja(a,b),e=j('tbody tr:eq(0)>td',b),e.length===0&&(e=j('thead tr:eq(0)>th',b));for(f=c=0;f<a.aoColumns.length;f++)a.aoColumns[f].bVisible&&(d=j(e[c]).outerWidth(),d!==null&&d>0&&(a.aoColumns[f].sWidth=v(d)),c++);a.nTable.style.width=v(j(b).outerWidth()),b.parentNode.removeChild(b)}}function Ja(a,b){a.oScroll.sX===''&&a.oScroll.sY!==''?(j(b).width(),b.style.width=v(j(b).outerWidth()-a.oScroll.iBarWidth)):a.oScroll.sX!==''&&(b.style.width=v(j(b).outerWidth()))}function Ia(a,b,c){if(typeof c=='undefined'||c)return c=Ka(a,b),b=M(a,b),c<0?null:a.aoData[c].nTr.getElementsByTagName('td')[b];var d=-1,e,f;c=-1;var g=p.createElement('div');g.style.visibility='hidden',g.style.position='absolute',p.body.appendChild(g),e=0;for(f=a.aoData.length;e<f;e++)g.innerHTML=a.aoData[e]._aData[b],g.offsetWidth>d&&(d=g.offsetWidth,c=e);p.body.removeChild(g);if(c>=0){b=M(a,b);if(a=a.aoData[c].nTr.getElementsByTagName('td')[b])return a}return null}function Ka(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=a.aoData[e]._aData[b];f.length>c&&(c=f.length,d=e)}return d}function v(a){if(a===null)return'0px';if(typeof a=='number')return a<0?'0px':a+'px';var b=a.charCodeAt(a.length-1);return b<48||b>57?a:a+'px'}function Oa(a,b){if(a.length!=b.length)return 1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return 2;return 0}function aa(a){for(var b=n.aTypes,c=b.length,d=0;d<c;d++){var e=b[d](a);if(e!==null)return e}return'string'}function A(a){for(var b=0;b<D.length;b++)if(D[b].nTable==a)return D[b];return null}function V(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++)b.push(a.aoData[d]._aData);return b}function R(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++)b.push(a.aoData[d].nTr);return b}function Z(a){var b=R(a),c=[],d,e=[],f,g,h,i;f=0;for(g=b.length;f<g;f++){c=[],h=0;for(i=b[f].childNodes.length;h<i;h++)d=b[f].childNodes[h],d.nodeName.toUpperCase()=='TD'&&c.push(d);h=d=0;for(i=a.aoColumns.length;h<i;h++)a.aoColumns[h].bVisible?e.push(c[h-d]):(e.push(a.aoData[f]._anHidden[h]),d++)}return e}function la(a){return a.replace(new RegExp('(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)','g'),'\\$1')}function ma(a,b){for(var c=-1,d=0,e=a.length;d<e;d++)a[d]==b?c=d:a[d]>b&&a[d]--;c!=-1&&a.splice(c,1)}function va(a,b){b=b.split(',');for(var c=[],d=0,e=a.aoColumns.length;d<e;d++)for(var f=0;f<e;f++)if(a.aoColumns[d].sName==b[f]){c.push(f);break}return c}function ca(a){for(var b='',c=0,d=a.aoColumns.length;c<d;c++)b+=a.aoColumns[c].sName+',';return b.length==d?'':b.slice(0,-1)}function H(a,b,c){a=a.sTableId===''?'DataTables warning: '+c:'DataTables warning (table id = \''+a.sTableId+'\'): '+c;if(b===0){if(n.sErrMode!='alert')throw a;alert(a)}else typeof console!='undefined'&&typeof console.log!='undefined'&&console.log(a)}function da(a){a.aoData.splice(0,a.aoData.length),a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length),a.aiDisplay.splice(0,a.aiDisplay.length),E(a)}function na(a){if(!!a.oFeatures.bStateSave&&typeof a.bDestroying=='undefined'){var b,c,d,e='{';e+='"iCreate":'+(new Date).getTime()+',',e+='"iStart":'+a._iDisplayStart+',',e+='"iEnd":'+a._iDisplayEnd+',',e+='"iLength":'+a._iDisplayLength+',',e+='"sFilter":"'+encodeURIComponent(a.oPreviousSearch.sSearch)+'",',e+='"sFilterEsc":'+!a.oPreviousSearch.bRegex+',',e+='"aaSorting":[ ';for(b=0;b<a.aaSorting.length;b++)e+='['+a.aaSorting[b][0]+',"'+a.aaSorting[b][1]+'"],';e=e.substring(0,e.length-1),e+='],',e+='"aaSearchCols":[ ';for(b=0;b<a.aoPreSearchCols.length;b++)e+='["'+encodeURIComponent(a.aoPreSearchCols[b].sSearch)+'",'+!a.aoPreSearchCols[b].bRegex+'],';e=e.substring(0,e.length-1),e+='],',e+='"abVisCols":[ ';for(b=0;b<a.aoColumns.length;b++)e+=a.aoColumns[b].bVisible+',';e=e.substring(0,e.length-1),e+=']',b=0;for(c=a.aoStateSave.length;b<c;b++)d=a.aoStateSave[b].fn(a,e),d!==''&&(e=d);e+='}',La(a.sCookiePrefix+a.sInstance,e,a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)}}function Ma(a,b){if(a.oFeatures.bStateSave){var c,d,f;d=oa(a.sCookiePrefix+a.sInstance);if(d!==null&&d!==''){try{c=typeof j.parseJSON=='function'?j.parseJSON(d.replace(/'/g,'"')):eval('('+d+')')}catch(e){return}d=0;for(f=a.aoStateLoad.length;d<f;d++)if(!a.aoStateLoad[d].fn(a,c))return;a.oLoadedState=j.extend(!0,{},c),a._iDisplayStart=c.iStart,a.iInitDisplayStart=c.iStart,a._iDisplayEnd=c.iEnd,a._iDisplayLength=c.iLength,a.oPreviousSearch.sSearch=decodeURIComponent(c.sFilter),a.aaSorting=c.aaSorting.slice(),a.saved_aaSorting=c.aaSorting.slice(),typeof c.sFilterEsc!='undefined'&&(a.oPreviousSearch.bRegex=!c.sFilterEsc);if(typeof c.aaSearchCols!='undefined')for(d=0;d<c.aaSearchCols.length;d++)a.aoPreSearchCols[d]={sSearch:decodeURIComponent(c.aaSearchCols[d][0]),bRegex:!c.aaSearchCols[d][1]};if(typeof c.abVisCols!='undefined'){b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++)b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d]}}}}function La(a,b,c,d,f){var e=new Date;e.setTime(e.getTime()+c*1e3),c=ra.location.pathname.split('/'),a=a+'_'+c.pop().replace(/[\/:]/g,'').toLowerCase();var i;f!==null?(i=typeof j.parseJSON=='function'?j.parseJSON(b):eval('('+b+')'),b=f(a,i,e.toGMTString(),c.join('/')+'/')):b=a+'='+encodeURIComponent(b)+'; expires='+e.toGMTString()+'; path='+c.join('/')+'/',f='',e=9999999999999;if((oa(a)!==null?p.cookie.length:b.length+p.cookie.length)+10>4096){a=p.cookie.split(';');for(var h=0,k=a.length;h<k;h++)if(a[h].indexOf(d)!=-1){var l=a[h].split('=');try{i=eval('('+decodeURIComponent(l[1])+')')}catch(q){continue}typeof i.iCreate!='undefined'&&i.iCreate<e&&(f=l[0],e=i.iCreate)}f!==''&&(p.cookie=f+'=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path='+c.join('/')+'/')}p.cookie=b}function oa(a){var b=ra.location.pathname.split('/');a=a+'_'+b[b.length-1].replace(/[\/:]/g,'').toLowerCase()+'=',b=p.cookie.split(';');for(var c=0;c<b.length;c++){for(var d=b[c];d.charAt(0)==' ';)d=d.substring(1,d.length);if(d.indexOf(a)===0)return decodeURIComponent(d.substring(a.length,d.length))}return null}function fa(a){a=a.getElementsByTagName('tr');if(a.length==1)return a[0].getElementsByTagName('th');var b=[],c=[],d,e,f,g,h,i,j=function(a,b,c){for(;typeof a[b][c]!='undefined';)c++;return c},k=function(a){typeof b[a]=='undefined'&&(b[a]=[])};d=0;for(g=a.length;d<g;d++){k(d);var l=0,m=[];e=0;for(h=a[d].childNodes.length;e<h;e++)(a[d].childNodes[e].nodeName.toUpperCase()=='TD'||a[d].childNodes[e].nodeName.toUpperCase()=='TH')&&m.push(a[d].childNodes[e]);e=0;for(h=m.length;e<h;e++){var n=m[e].getAttribute('colspan')*1,o=m[e].getAttribute('rowspan')*1;if(!n||n===0||n===1){i=j(b,d,l),b[d][i]=m[e].nodeName.toUpperCase()=='TD'?4:m[e];if(o||o===0||o===1)for(f=1;f<o;f++)k(d+f),b[d+f][i]=2;l++}else{i=j(b,d,l);for(f=0;f<n;f++)b[d][i+f]=3;l+=n}}}d=0;for(g=b.length;d<g;d++){e=0;for(h=b[d].length;e<h;e++)typeof b[d][e]=='object'&&typeof c[e]=='undefined'&&(c[e]=b[d][e])}return c}function Na(){var a=p.createElement('p'),b=a.style;b.width='100%',b.height='200px';var c=p.createElement('div');return b=c.style,b.position='absolute',b.top='0px',b.left='0px',b.visibility='hidden',b.width='200px',b.height='150px',b.overflow='hidden',c.appendChild(a),p.body.appendChild(c),b=a.offsetWidth,c.style.overflow='scroll',a=a.offsetWidth,b==a&&(a=c.clientWidth),p.body.removeChild(c),b-a}function L(a,b,c){for(var d=0,e=b.length;d<e;d++)for(var f=0,g=b[d].childNodes.length;f<g;f++)b[d].childNodes[f].nodeType==1&&(typeof c!='undefined'?a(b[d].childNodes[f],c[d].childNodes[f]):a(b[d].childNodes[f]))}function o(a,b,c,d){typeof d=='undefined'&&(d=c),typeof b[c]!='undefined'&&(a[d]=b[c])}this.oApi={},this.fnDraw=function(a){var b=A(this[n.iApiIndex]);typeof a!='undefined'&&a===!1?(E(b),C(b)):W(b)},this.fnFilter=function(a,b,c,d,e){var f=A(this[n.iApiIndex]);if(f.oFeatures.bFilter){typeof c=='undefined'&&(c=!1),typeof d=='undefined'&&(d=!0),typeof e=='undefined'&&(e=!0);if(typeof b=='undefined'||b===null){P(f,{sSearch:a,bRegex:c,bSmart:d},1);if(e&&typeof f.aanFeatures.f!='undefined'){b=f.aanFeatures.f,c=0;for(d=b.length;c<d;c++)j('input',b[c]).val(a)}}else f.aoPreSearchCols[b].sSearch=a,f.aoPreSearchCols[b].bRegex=c,f.aoPreSearchCols[b].bSmart=d,P(f,f.oPreviousSearch,1)}},this.fnSettings=function(){return A(this[n.iApiIndex])},this.fnVersionCheck=n.fnVersionCheck,this.fnSort=function(a){var b=A(this[n.iApiIndex]);b.aaSorting=a,O(b)},this.fnSortListener=function(a,b,c){ba(A(this[n.iApiIndex]),a,b,c)},this.fnAddData=function(a,b){if(a.length===0)return[];var c=[],d,e=A(this[n.iApiIndex]);if(typeof a[0]=='object')for(var f=0;f<a.length;f++){d=u(e,a[f]);if(d==-1)return c;c.push(d)}else{d=u(e,a);if(d==-1)return c;c.push(d)}return e.aiDisplay=e.aiDisplayMaster.slice(),(typeof b=='undefined'||b)&&W(e),c},this.fnDeleteRow=function(a,b,c){var d=A(this[n.iApiIndex]);a=typeof a=='object'?Q(d,a):a;var e=d.aoData.splice(a,1),f=j.inArray(a,d.aiDisplay);d.asDataSearch.splice(f,1),ma(d.aiDisplayMaster,a),ma(d.aiDisplay,a),typeof b=='function'&&b.call(this,d,e),d._iDisplayStart>=d.aiDisplay.length&&(d._iDisplayStart-=d._iDisplayLength,d._iDisplayStart<0&&(d._iDisplayStart=0));if(typeof c=='undefined'||c)E(d),C(d);return e},this.fnClearTable=function(a){var b=A(this[n.iApiIndex]);da(b),(typeof a=='undefined'||a)&&C(b)},this.fnOpen=function(a,b,c){var d=A(this[n.iApiIndex]);this.fnClose(a);var e=p.createElement('tr'),f=p.createElement('td');return e.appendChild(f),f.className=c,f.colSpan=S(d),f.innerHTML=b,b=j('tr',d.nTBody),j.inArray(a,b)!=-1&&j(e).insertAfter(a),d.aoOpenRows.push({nTr:e,nParent:a}),e},this.fnClose=function(a){for(var b=A(this[n.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0;return 1},this.fnGetData=function(a){var b=A(this[n.iApiIndex]);return typeof a!='undefined'?(a=typeof a=='object'?Q(b,a):a,(aRowData=b.aoData[a])?aRowData._aData:null):V(b)},this.fnGetNodes=function(a){var b=A(this[n.iApiIndex]);return typeof a!='undefined'?(aRowData=b.aoData[a])?aRowData.nTr:null:R(b)},this.fnGetPosition=function(a){var b=A(this[n.iApiIndex]);if(a.nodeName.toUpperCase()=='TR')return Q(b,a);if(a.nodeName.toUpperCase()=='TD')for(var c=Q(b,a.parentNode),d=0,e=0;e<b.aoColumns.length;e++)if(b.aoColumns[e].bVisible){if(b.aoData[c].nTr.getElementsByTagName('td')[e-d]==a)return[c,e-d,e]}else d++;return null},this.fnUpdate=function(a,b,c,d,e){var f=A(this[n.iApiIndex]),g,h;b=typeof b=='object'?Q(f,b):b;if(typeof a!='object')h=a,f.aoData[b]._aData[c]=h,f.aoColumns[c].fnRender!==null&&(h=f.aoColumns[c].fnRender({iDataRow:b,iDataColumn:c,aData:f.aoData[b]._aData,oSettings:f}),f.aoColumns[c].bUseRendered&&(f.aoData[b]._aData[c]=h)),g=M(f,c),g!==null?f.aoData[b].nTr.getElementsByTagName('td')[g].innerHTML=h:f.aoData[b]._anHidden[c].innerHTML=h;else{if(a.length!=f.aoColumns.length)return H(f,0,'An array passed to fnUpdate must have the same number of columns as the table in question - in this case '+f.aoColumns.length),1;for(c=0;c<a.length;c++)h=a[c],f.aoData[b]._aData[c]=h,f.aoColumns[c].fnRender!==null&&(h=f.aoColumns[c].fnRender({iDataRow:b,iDataColumn:c,aData:f.aoData[b]._aData,oSettings:f}),f.aoColumns[c].bUseRendered&&(f.aoData[b]._aData[c]=h)),g=M(f,c),g!==null?f.aoData[b].nTr.getElementsByTagName('td')[g].innerHTML=h:f.aoData[b]._anHidden[c].innerHTML=h}return a=j.inArray(b,f.aiDisplay),f.asDataSearch[a]=ka(f,f.aoData[b]._aData),(typeof e=='undefined'||e)&&X(f),(typeof d=='undefined'||d)&&W(f),0},this.fnSetColumnVis=function(a,b,c){var d=A(this[n.iApiIndex]),e,f;f=d.aoColumns.length;var g,h,i,k,l;if(d.aoColumns[a].bVisible!=b){k=j('>tr',d.nTHead)[0],g=j('>tr',d.nTFoot)[0],l=[],h=[];for(e=0;e<f;e++)l.push(d.aoColumns[e].nTh),h.push(d.aoColumns[e].nTf);if(b){for(e=b=0;e<a;e++)d.aoColumns[e].bVisible&&b++;if(b>=S(d)){k.appendChild(l[a]),k=j('>tr',d.nTHead),e=1;for(f=k.length;e<f;e++)k[e].appendChild(d.aoColumns[a].anThExtra[e-1]);if(g){g.appendChild(h[a]),k=j('>tr',d.nTFoot),e=1;for(f=k.length;e<f;e++)k[e].appendChild(d.aoColumns[a].anTfExtra[e-1])}e=0;for(f=d.aoData.length;e<f;e++)g=d.aoData[e]._anHidden[a],d.aoData[e].nTr.appendChild(g)}else{for(e=a;e<f;e++){i=M(d,e);if(i!==null)break}k.insertBefore(l[a],k.getElementsByTagName('th')[i]),k=j('>tr',d.nTHead),e=1;for(f=k.length;e<f;e++)l=j(k[e]).children(),k[e].insertBefore(d.aoColumns[a].anThExtra[e-1],l[i]);if(g){g.insertBefore(h[a],g.getElementsByTagName('th')[i]),k=j('>tr',d.nTFoot),e=1;for(f=k.length;e<f;e++)l=j(k[e]).children(),k[e].insertBefore(d.aoColumns[a].anTfExtra[e-1],l[i])}Z(d),e=0;for(f=d.aoData.length;e<f;e++)g=d.aoData[e]._anHidden[a],d.aoData[e].nTr.insertBefore(g,j('>td:eq('+i+')',d.aoData[e].nTr)[0])}d.aoColumns[a].bVisible=!0}else{k.removeChild(l[a]),e=0;for(f=d.aoColumns[a].anThExtra.length;e<f;e++)i=d.aoColumns[a].anThExtra[e],i.parentNode.removeChild(i);if(g){g.removeChild(h[a]),e=0;for(f=d.aoColumns[a].anTfExtra.length;e<f;e++)i=d.aoColumns[a].anTfExtra[e],i.parentNode.removeChild(i)}h=Z(d),e=0;for(f=d.aoData.length;e<f;e++)g=h[e*d.aoColumns.length+a*1],d.aoData[e]._anHidden[a]=g,g.parentNode.removeChild(g);d.aoColumns[a].bVisible=!1}e=0;for(f=d.aoOpenRows.length;e<f;e++)d.aoOpenRows[e].nTr.colSpan=S(d);if(typeof c=='undefined'||c)X(d),C(d);na(d)}},this.fnPageChange=function(a,b){var c=A(this[n.iApiIndex]);ea(c,a),E(c),(typeof b=='undefined'||b)&&C(c)},this.fnDestroy=function(){var a=A(this[n.iApiIndex]),b=a.nTableWrapper.parentNode,c=a.nTBody,d,e;a.bDestroying=!0,j(a.nTableWrapper).find('*').andSelf().unbind('.DT'),d=0;for(e=a.aoColumns.length;d<e;d++)a.aoColumns[d].bVisible===!1&&this.fnSetColumnVis(d,!0);j('tbody>tr>td.'+a.oClasses.sRowEmpty,a.nTable).parent().remove(),a.nTable!=a.nTHead.parentNode&&(j('>thead',a.nTable).remove(),a.nTable.appendChild(a.nTHead)),a.nTFoot&&a.nTable!=a.nTFoot.parentNode&&(j('>tfoot',a.nTable).remove(),a.nTable.appendChild(a.nTFoot)),a.nTable.parentNode.removeChild(a.nTable),j(a.nTableWrapper).remove(),a.aaSorting=[],a.aaSortingFixed=[],T(a),j(R(a)).removeClass(a.asStripClasses.join(' ')),a.bJUI?(j('th',a.nTHead).removeClass([n.oStdClasses.sSortable,n.oJUIClasses.sSortableAsc,n.oJUIClasses.sSortableDesc,n.oJUIClasses.sSortableNone].join(' ')),j('th span',a.nTHead).remove()):j('th',a.nTHead).removeClass([n.oStdClasses.sSortable,n.oStdClasses.sSortableAsc,n.oStdClasses.sSortableDesc,n.oStdClasses.sSortableNone].join(' ')),b.appendChild(a.nTable),d=0;for(e=a.aoData.length;d<e;d++)c.appendChild(a.aoData[d].nTr);a.nTable.style.width=v(a.sDestroyWidth),j('>tr:even',c).addClass(a.asDestoryStrips[0]),j('>tr:odd',c).addClass(a.asDestoryStrips[1]),d=0;for(e=D.length;d<e;d++)D[d]==a&&D.splice(d,1)},this.fnAdjustColumnSizing=function(a){var b=A(this[n.iApiIndex]);X(b),typeof a=='undefined'||a?this.fnDraw(!1):(b.oScroll.sX!==''||b.oScroll.sY!=='')&&this.oApi._fnScrollDraw(b)};for(var pa in n.oApi)pa&&(this[pa]=r(pa));this.oApi._fnExternApiFunc=r,this.oApi._fnInitalise=s,this.oApi._fnLanguageProcess=y,this.oApi._fnAddColumn=F,this.oApi._fnColumnOptions=x,this.oApi._fnAddData=u,this.oApi._fnGatherData=z,this.oApi._fnDrawHead=U,this.oApi._fnDraw=C,this.oApi._fnReDraw=W,this.oApi._fnAjaxUpdate=ta,this.oApi._fnAjaxUpdateDraw=ua,this.oApi._fnAddOptionsHtml=sa,this.oApi._fnFeatureHtmlTable=za,this.oApi._fnScrollDraw=Ca,this.oApi._fnAjustColumnSizing=X,this.oApi._fnFeatureHtmlFilter=xa,this.oApi._fnFilterComplete=P,this.oApi._fnFilterCustom=Fa,this.oApi._fnFilterColumn=Ea,this.oApi._fnFilter=Da,this.oApi._fnBuildSearchArray=ha,this.oApi._fnBuildSearchRow=ka,this.oApi._fnFilterCreateSearch=ia,this.oApi._fnDataToSearch=ja,this.oApi._fnSort=O,this.oApi._fnSortAttachListener=ba,this.oApi._fnSortingClasses=T,this.oApi._fnFeatureHtmlPaginate=Ba,this.oApi._fnPageChange=ea,this.oApi._fnFeatureHtmlInfo=Aa,this.oApi._fnUpdateInfo=Ga,this.oApi._fnFeatureHtmlLength=wa,this.oApi._fnFeatureHtmlProcessing=ya,this.oApi._fnProcessingDisplay=K,this.oApi._fnVisibleToColumnIndex=ga,this.oApi._fnColumnIndexToVisible=M,this.oApi._fnNodeToDataIndex=Q,this.oApi._fnVisbleColumns=S,this.oApi._fnCalculateEnd=E,this.oApi._fnConvertToWidth=Ha,this.oApi._fnCalculateColumnWidths=$,this.oApi._fnScrollingWidthAdjust=Ja,this.oApi._fnGetWidestNode=Ia,this.oApi._fnGetMaxLenString=Ka,this.oApi._fnStringToCss=v,this.oApi._fnArrayCmp=Oa,this.oApi._fnDetectType=aa,this.oApi._fnSettingsFromNode=A,this.oApi._fnGetDataMaster=V,this.oApi._fnGetTrNodes=R,this.oApi._fnGetTdNodes=Z,this.oApi._fnEscapeRegex=la,this.oApi._fnDeleteIndex=ma,this.oApi._fnReOrderIndex=va,this.oApi._fnColumnOrdering=ca,this.oApi._fnLog=H,this.oApi._fnClearTable=da,this.oApi._fnSaveState=na,this.oApi._fnLoadState=Ma,this.oApi._fnCreateCookie=La,this.oApi._fnReadCookie=oa,this.oApi._fnGetUniqueThs=fa,this.oApi._fnScrollBarWidth=Na,this.oApi._fnApplyToChildren=L,this.oApi._fnMap=o;var qa=this;return this.each(function(){var a=0,b,c,d,e;a=0;for(b=D.length;a<b;a++){if(D[a].nTable==this){if(typeof g=='undefined'||typeof g.bRetrieve!='undefined'&&g.bRetrieve===!0)return D[a].oInstance;if(typeof g.bDestroy!='undefined'&&g.bDestroy===!0){D[a].oInstance.fnDestroy();break}H(D[a],0,'Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).');return}if(D[a].sTableId!==''&&D[a].sTableId==this.getAttribute('id')){D.splice(a,1);break}}var f=new m;D.push(f);var h=!1,i=!1;a=this.getAttribute('id'),a!==null?(f.sTableId=a,f.sInstance=a):f.sInstance=n._oExternConfig.iNextUnique++;if(this.nodeName.toLowerCase()!='table')H(f,0,'Attempted to initialise DataTables on a node which is not a table: '+this.nodeName);else{f.nTable=this,f.oInstance=qa.length==1?qa:j(this).dataTable(),f.oApi=qa.oApi,f.sDestroyWidth=j(this).width();if(typeof g!='undefined'&&g!==null){f.oInit=g,o(f.oFeatures,g,'bPaginate'),o(f.oFeatures,g,'bLengthChange'),o(f.oFeatures,g,'bFilter'),o(f.oFeatures,g,'bSort'),o(f.oFeatures,g,'bInfo'),o(f.oFeatures,g,'bProcessing'),o(f.oFeatures,g,'bAutoWidth'),o(f.oFeatures,g,'bSortClasses'),o(f.oFeatures,g,'bServerSide'),o(f.oScroll,g,'sScrollX','sX'),o(f.oScroll,g,'sScrollXInner','sXInner'),o(f.oScroll,g,'sScrollY','sY'),o(f.oScroll,g,'bScrollCollapse','bCollapse'),o(f.oScroll,g,'bScrollInfinite','bInfinite'),o(f.oScroll,g,'iScrollLoadGap','iLoadGap'),o(f.oScroll,g,'bScrollAutoCss','bAutoCss'),o(f,g,'asStripClasses'),o(f,g,'fnRowCallback'),o(f,g,'fnHeaderCallback'),o(f,g,'fnFooterCallback'),o(f,g,'fnCookieCallback'),o(f,g,'fnInitComplete'),o(f,g,'fnServerData'),o(f,g,'fnFormatNumber'),o(f,g,'aaSorting'),o(f,g,'aaSortingFixed'),o(f,g,'aLengthMenu'),o(f,g,'sPaginationType'),o(f,g,'sAjaxSource'),o(f,g,'iCookieDuration'),o(f,g,'sCookiePrefix'),o(f,g,'sDom'),o(f,g,'oSearch','oPreviousSearch'),o(f,g,'aoSearchCols','aoPreSearchCols'),o(f,g,'iDisplayLength','_iDisplayLength'),o(f,g,'bJQueryUI','bJUI'),o(f.oLanguage,g,'fnInfoCallback'),typeof g.fnDrawCallback=='function'&&f.aoDrawCallback.push({fn:g.fnDrawCallback,sName:'user'}),typeof g.fnStateSaveCallback=='function'&&f.aoStateSave.push({fn:g.fnStateSaveCallback,sName:'user'}),typeof g.fnStateLoadCallback=='function'&&f.aoStateLoad.push({fn:g.fnStateLoadCallback,sName:'user'}),f.oFeatures.bServerSide&&f.oFeatures.bSort&&f.oFeatures.bSortClasses&&f.aoDrawCallback.push({fn:T,sName:'server_side_sort_classes'}),typeof g.bJQueryUI!='undefined'&&g.bJQueryUI&&(f.oClasses=n.oJUIClasses,typeof g.sDom=='undefined'&&(f.sDom='<"H"lfr>t<"F"ip>'));if(f.oScroll.sX!==''||f.oScroll.sY!=='')f.oScroll.iBarWidth=Na();typeof g.iDisplayStart!='undefined'&&typeof f.iInitDisplayStart=='undefined'&&(f.iInitDisplayStart=g.iDisplayStart,f._iDisplayStart=g.iDisplayStart),typeof g.bStateSave!='undefined'&&(f.oFeatures.bStateSave=g.bStateSave,Ma(f,g),f.aoDrawCallback.push({fn:na,sName:'state_save'})),typeof g.aaData!='undefined'&&(i=!0),typeof g!='undefined'&&typeof g.aoData!='undefined'&&(g.aoColumns=g.aoData),typeof g.oLanguage!='undefined'&&(typeof g.oLanguage.sUrl!='undefined'&&g.oLanguage.sUrl!==''?(f.oLanguage.sUrl=g.oLanguage.sUrl,j.getJSON(f.oLanguage.sUrl,null,function(a){y(f,a,!0)}),h=!0):y(f,g.oLanguage,!1))}else g={};typeof g.asStripClasses=='undefined'&&(f.asStripClasses.push(f.oClasses.sStripOdd),f.asStripClasses.push(f.oClasses.sStripEven)),c=!1,d=j('>tbody>tr',this),a=0;for(b=f.asStripClasses.length;a<b;a++)if(d.filter(':lt(2)').hasClass(f.asStripClasses[a])){c=!0;break}c&&(f.asDestoryStrips=['',''],j(d[0]).hasClass(f.oClasses.sStripOdd)&&(f.asDestoryStrips[0]+=f.oClasses.sStripOdd+' '),j(d[0]).hasClass(f.oClasses.sStripEven)&&(f.asDestoryStrips[0]+=f.oClasses.sStripEven),j(d[1]).hasClass(f.oClasses.sStripOdd)&&(f.asDestoryStrips[1]+=f.oClasses.sStripOdd+' '),j(d[1]).hasClass(f.oClasses.sStripEven)&&(f.asDestoryStrips[1]+=f.oClasses.sStripEven),d.removeClass(f.asStripClasses.join(' '))),a=this.getElementsByTagName('thead'),c=a.length===0?[]:fa(a[0]);var k;if(typeof g.aoColumns=='undefined'){k=[],a=0;for(b=c.length;a<b;a++)k.push(null)}else k=g.aoColumns;a=0;for(b=k.length;a<b;a++)typeof g.saved_aoColumns!='undefined'&&g.saved_aoColumns.length==b&&(k[a]===null&&(k[a]={}),k[a].bVisible=g.saved_aoColumns[a].bVisible),F(f,c?c[a]:null);if(typeof g.aoColumnDefs!='undefined')for(a=g.aoColumnDefs.length-1;a>=0;a--){var l=g.aoColumnDefs[a].aTargets;j.isArray(l)||H(f,1,'aTargets must be an array of targets, not a '+typeof l),c=0;for(d=l.length;c<d;c++)if(typeof l[c]=='number'&&l[c]>=0){for(;f.aoColumns.length<=l[c];)F(f);x(f,l[c],g.aoColumnDefs[a])}else if(typeof l[c]=='number'&&l[c]<0)x(f,f.aoColumns.length+l[c],g.aoColumnDefs[a]);else if(typeof l[c]=='string'){b=0;for(e=f.aoColumns.length;b<e;b++)(l[c]=='_all'||f.aoColumns[b].nTh.className.indexOf(l[c])!=-1)&&x(f,b,g.aoColumnDefs[a])}}if(typeof k!='undefined'){a=0;for(b=k.length;a<b;a++)x(f,a,k[a])}a=0;for(b=f.aaSorting.length;a<b;a++){f.aaSorting[a][0]>=f.aoColumns.length&&(f.aaSorting[a][0]=0),k=f.aoColumns[f.aaSorting[a][0]],typeof f.aaSorting[a][2]=='undefined'&&(f.aaSorting[a][2]=0),typeof g.aaSorting=='undefined'&&typeof f.saved_aaSorting=='undefined'&&(f.aaSorting[a][1]=k.asSorting[0]),c=0;for(d=k.asSorting.length;c<d;c++)if(f.aaSorting[a][1]==k.asSorting[c]){f.aaSorting[a][2]=c;break}}T(f),this.getElementsByTagName('thead').length===0&&this.appendChild(p.createElement('thead')),this.getElementsByTagName('tbody').length===0&&this.appendChild(p.createElement('tbody')),f.nTHead=this.getElementsByTagName('thead')[0],f.nTBody=this.getElementsByTagName('tbody')[0],this.getElementsByTagName('tfoot').length>0&&(f.nTFoot=this.getElementsByTagName('tfoot')[0]);if(i)for(a=0;a<g.aaData.length;a++)u(f,g.aaData[a]);else z(f);f.aiDisplay=f.aiDisplayMaster.slice(),f.bInitialised=!0,h===!1&&s(f)}})}}(jQuery,window,document),define('jquery.dataTables.min',function(){}),define('jquery.datatable.twitter.bs.pagination',['jquery-wrapper','jquery.dataTables.min'],function(a){var b=function(){a.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:a._iDisplayLength===-1?0:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:a._iDisplayLength===-1?0:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}},a.extend(a.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(b,c,d){var e=b.oLanguage.oPaginate,f=function(a){a.preventDefault(),b.oApi._fnPageChange(b,a.data.action)&&d(b)},g=b.oInstance.fnPagingInfo(),h=g.iTotalPages,i=a('<ul><li class="first paginate_button table_paginate disabled"><a href="#"> <span class="fl-icon-first"></span> </a></li><li class="prev previous paginate_button table_paginate disabled"><a href="#" rel="prev"> <span class="fl-icon-prev"></span> </a></li><li class="next paginate_button table_paginate disabled"><a href="#" rel="next"> <span class="fl-icon-next"></span> </a></li><li class="last paginate_button table_paginate disabled"><a href="#"> <span class="fl-icon-last"></span> </a></li></ul>');a(c).addClass('pagination').append(i);var j=a('a',c);a(j[0]).bind('click.DT',{action:'first'},f),a(j[1]).bind('click.DT',{action:'previous'},f),a(j[2]).bind('click.DT',{action:'next'},f),a(j[3]).bind('click.DT',{action:'last'},f)},fnUpdate:function(b,c){var d=5,e=b.oInstance.fnPagingInfo(),f=b.aanFeatures.p,g,h,i,j,k,l,m=Math.floor(d/2);e.iTotalPages<d?(k=1,l=e.iTotalPages):e.iPage<=m?(k=1,l=d):e.iPage>=e.iTotalPages-m?(k=e.iTotalPages-d+1,l=e.iTotalPages):(k=e.iPage-m+1,l=k+d-1),window.projectPagintorUrlValues=window.projectPagintorUrlValues||{};if(typeof projectPagintorUrlValues!='undefined'&&projectPagintorUrlValues.urlBase&&projectPagintorUrlValues.urlPreNumber){var n=projectPagintorUrlValues.urlBase+projectPagintorUrlValues.urlPreNumber;a('li.first.paginate_button a').attr('href',n),a('li.last.paginate_button a').attr('href',n+e.iTotalPages);var o=e.iPage+2,p=e.iPage;o>e.iTotalPages&&(o=e.iTotalPages),p<=1&&(p=''),a('li.next.paginate_button a').attr('href',n+o),a('li.previous.paginate_button a').attr('href',n+p),projectPagintorUrlValues.currentPageNum=e.iPage+1,projectPagintorUrlValues.lastPageNum=e.iTotalPages}for(h=0,iLen=f.length;h<iLen;h++){a('li:gt(0)',f[h]).filter(':not(.next)').filter(':not(.prev)').filter(':not(.last)').remove();for(i=k;i<=l;i++){g='id = \'pagination_bottom_'+i+'\' ',j=i==e.iPage+1?'class="active table_paginate number paginate_button"':'class="number table_paginate paginate_button"';var q=a('<li '+g+j+'><a href="#">'+i+'</a></li>');q.insertBefore(a('li.next',f[h])[0]).bind('click',function(d){d.preventDefault(),b._iDisplayStart=(parseInt(a('a',this).text(),10)-1)*e.iLength,c(b)});if(typeof projectPagintorUrlValues!='undefined'&&projectPagintorUrlValues.urlBase&&projectPagintorUrlValues.urlPreNumber){var n=projectPagintorUrlValues.urlBase+projectPagintorUrlValues.urlPreNumber;i>1&&(n+=i),q.find('a').attr('href',n)}}e.iPage===0?(a('li.prev',f[h]).addClass('disabled'),a('li.first',f[h]).addClass('disabled')):(a('li.prev',f[h]).removeClass('disabled'),a('li.first',f[h]).removeClass('disabled')),e.iPage===e.iTotalPages-1||e.iTotalPages===0?(a('li.next',f[h]).addClass('disabled'),a('li.last',f[h]).addClass('disabled')):(a('li.next',f[h]).removeClass('disabled'),a('li.last',f[h]).removeClass('disabled'))}}}})};return b}),function(a){function f(b){this.$element=a(b),this.original_text=this.$element.html(),this.settings=a.extend({},a.fn.trunk8.defaults)}function g(){var b=this.data('trunk8'),d=b.settings,f=d.width,g=d.side,h=d.fill,i=c.getLineHeight(this)*d.lines,j=b.original_text,k=j.length,l='',m,n,o,p,q;this.html(j),q=this.text();if(f===e.auto){if(this.height()<=i)return;m=0,n=k-1;while(m<=n)o=m+(n-m>>1),p=c.eatStr(j,g,k-o,h),this.html(p),this.height()>i?n=o-1:(m=o+1,l=l.length>p.length?l:p);this.html(''),this.html(l),d.tooltip&&this.attr('title',q)}else isNaN(f)?a.error('Invalid width "'+f+'".'):(o=k-f,p=c.eatStr(j,g,o,h),this.html(p),d.tooltip&&this.attr('title',j))}var b,c,d={center:'center',left:'left',right:'right'},e={auto:'auto'};f.prototype.updateSettings=function(b){this.settings=a.extend(this.settings,b)},b={init:function(b){return this.each(function(){var c=a(this),d=c.data('trunk8');d||c.data('trunk8',d=new f(this)),d.updateSettings(b),g.call(c)})},update:function(b){return this.each(function(){var c=a(this);b&&(c.data('trunk8').original_text=b),g.call(c)})},revert:function(){return this.each(function(){var b=a(this).data('trunk8').original_text;a(this).html(b)})},getSettings:function(){return a(this.get(0)).data('trunk8').settings}},c={eatStr:function(b,e,f,g){var h=b.length,i=c.eatStr.generateKey.apply(null,arguments),j,k;if(c.eatStr.cache[i])return c.eatStr.cache[i];(typeof b!='string'||h===0)&&a.error('Invalid source string "'+b+'".');if(f<0||f>h)a.error('Invalid bite size "'+f+'".');else if(f===0)return b;typeof (g+'')!='string'&&a.error('Fill unable to be converted to a string.');switch(e){case d.right:return c.eatStr.cache[i]=a.trim(b.substr(0,h-f))+g;case d.left:return c.eatStr.cache[i]=g+a.trim(b.substr(f));case d.center:return j=h>>1,k=f>>1,c.eatStr.cache[i]=a.trim(c.eatStr(b.substr(0,h-j),d.right,f-k,''))+g+a.trim(c.eatStr(b.substr(h-j),d.left,k,''));default:a.error('Invalid side "'+e+'".')}},getLineHeight:function(b){var c=a(b).css('float');c!=='none'&&a(b).css('float','none');var d=a(b).css('position');d==='absolute'&&a(b).css('position','static');var e=a(b).html(),f='line-height-test',g;return a(b).html('i').wrap('<div id="'+f+'" />'),g=a('#'+f).innerHeight(),a(b).html(e).css({'float':c,position:d}).unwrap(),g}},c.eatStr.cache={},c.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,'')},a.fn.trunk8=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=='object'||!c)return b.init.apply(this,arguments);a.error('Method '+c+' does not exist on jQuery.trunk8')},a.fn.trunk8.defaults={fill:'&hellip;',lines:1,side:d.right,tooltip:!0,width:e.auto}}(jQuery),define('utils/trunk8',function(){}),function(){Math.easeIn=function(a,b,c){return a/=c,a=(c-b)*Math.pow(a,2.5),Math.round(a+b)},Math.easeOut=function(a,b,c){return a=Math.pow((a-b)/(c-b),.4),Math.round(a*c)};var a={init:function(a){this.range_sliders(a),this.edit_skills_bt(a)},get_range:function(a,b,c){return a[0]=Math.easeIn(a[0],b,c),a[1]=Math.easeIn(a[1],b,c),a},range_sliders:function(a){var b=this;jQuery.each(a.find('.range-slider'),function(){var a,c,d,e,f;a=jQuery(this),c=a.next(),d=a.data('currency'),e=a.data('min'),f=a.data('max'),a.slider({range:!0,min:e,max:f,step:a.data('step'),values:[0,parseInt(a.data('max'))],change:function(a,g){var h=b.get_range(g.values,e,f);c.val(d+h[0]+' - '+d+h[1])},slide:function(a,g){var h=b.get_range(g.values,e,f);c.val(d+h[0]+' - '+d+h[1])},stop:function(c,d){var g=b.get_range(d.values,e,f);a.attr('id')==='budget'?(window.searchOptions.setSearchSource('budget filter'),window.searchOptions.set({budget_min:e===g[0]?!1:Math.floor(g[0]*exchangeRate),budget_max:f===g[1]?!1:Math.ceil(g[1]*exchangeRate)})):a.attr('id')==='hourly-rate'?(window.searchOptions.setSearchSource('hourly rate filter'),window.searchOptions.set({hourlyrate_min:e===g[0]?!1:Math.floor(g[0]*exchangeRate),hourlyrate_max:f===g[1]?!1:Math.ceil(g[1]*exchangeRate)})):a.attr('id')==='contest-budget'&&(window.searchOptions.setSearchSource('contest budget filter'),window.searchOptions.set({contest_budget_min:e===g[0]?!1:Math.floor(g[0]*exchangeRate),contest_budget_max:f===g[1]?!1:Math.ceil(g[1]*exchangeRate)}))}});var g=b.get_range(a.slider('values'),e,f);c.val(d+g[0]+' - '+d+g[1])})},edit_skills_bt:function(a){a.find('#skills-filter').find('.icon-search-new').on('click',function(){return a.find('#skills-select').select2('open'),!1})}},b={init:function(a){this.tooltip_init()},tooltip_init:function(){jQuery('[data-toggle="popover"]').popover_legacy({html:!0,trigger:'hover'})}},c={descriptionTransition:b,tableFilters:a};return define('table/browse-projects',['jquery-wrapper','utils/trunk8'],c)}(),function(){var a=['Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.4.0'],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!='undefined'&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,''),f=d&&location.hostname,g=d&&(location.port||undefined),h=[];define('text',[],function(){var i,j;return i={version:'1.0.8',strip:function(a){if(a){a=a.replace(b,'');var d=a.match(c);d&&(a=d[1])}else a='';return a},jsEscape:function(a){return a.replace(/(['\\])/g,'\\$1').replace(/[\f]/g,'\\f').replace(/[\b]/g,'\\b').replace(/[\n]/g,'\\n').replace(/[\t]/g,'\\t').replace(/[\r]/g,'\\r')},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!='undefined')return new XMLHttpRequest;if(typeof ActiveXObject!='undefined')for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}return b},parseName:function(a){var b=!1,c=a.indexOf('.'),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf('!'),c!==-1&&(b=e.substring(c+1,e.length),b=b==='strip',e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=i.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(':'),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d,e){c=b?i.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText){c();return}var j=i.parseName(a),k=j.moduleName+'.'+j.ext,l=b.toUrl(k),m=h&&h.text&&h.text.useXhr||i.useXhr;!d||m(l,e,f,g)?i.get(l,function(b){i.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){i.finishLoad(j.moduleName+'.'+j.ext,j.strip,a,c,h)})},write:function(a,b,c,d){if(h.hasOwnProperty(b)){var e=i.jsEscape(h[b]);c.asModule(a+'!'+b,'define(function () { return \''+e+'\';});\n')}},writeFile:function(a,b,c,d,e){var f=i.parseName(b),g=f.moduleName+'.'+f.ext,h=c.toUrl(f.moduleName+'.'+f.ext)+'.js';i.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},i.write(a,g,c,e)},e)}},i.createXhr()?i.get=function(a,b){var c=i.createXhr();c.open('GET',a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!='undefined'&&process.versions&&!!process.versions.node?(j=require.nodeRequire('fs'),i.get=function(a,b){var c=j.readFileSync(a,'utf8');c.indexOf('')===0&&(c=c.substring(1)),b(c)}):typeof Packages!='undefined'&&(i.get=function(a,b){var c='utf-8',d=new java.io.File(a),e=java.lang.System.getProperty('line.separator'),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i='';try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}),i})}(),define('text!templates/projectbrowse/projectName.htm',[],function(){return'<ul class="promotion-flags promotions">\n    <% for (i = 0 ; i < icon_array.length; i++) { %>\n        <li class="promotion-<%- icon_label[i] %>" data-promotion="<%- icon_label[i] %>"><%- icon_array[i] %>\n    <% } %>\n</ul>\n<h2 class="ProjectTable-title">\n    <% if (projectType === \'c\') { %>\n        <span class="ProjectTable-titleIcon is-ProjectTable-titleIcon-contest">\n            <%= fliconTrophy %>\n        </span>\n    <% } else { %>\n        <span class="ProjectTable-titleIcon is-ProjectTable-titleIcon-project">\n            <%= fliconDesktop %>\n        </span>\n    <% } %>\n    <a href="<%- seo_url %>"><%= name %></a>\n</h2>\n<p class="ProjectTable-description"><%= description %></p>\n<span class="ProjectTable-skills"><%= skills %></span>\n<% if (typeof projectLocation !== \'undefined\') { %>\n    <p><%= projectLocation %>\n    <% if (typeof distance !== \'undefined\') { %>\n        - (<strong><%= distance %></strong>)</p>\n    <% } else { %>\n        </p>\n    <% } %>\n<% } %>\n'}),define('text!templates/projectbrowse/projectDescr.htm',[],function(){return'<% if (typeof loggedIn != \'undefined\' && loggedIn == true && type == \'p\') {\n    if (eligible) { %>\n        <a class="btn btn-success btn-mini bid-now ProjectTable-control"\n            href=\'/projects/view_new.php?id=<%- projectId %>#placebid\' data-id="<%- projectId %>">\n            <%- T_("Bid Now") %>\n        </a>\n    <% } %>\n<% } %>\n<% if (typeof isFreelancer == \'undefined\' || isFreelancer === false) { %>\n    <% if (type == \'p\' && (typeof hideRepostButton === \'undefined\' || !hideRepostButton))  { %>\n        <% if (typeof loggedIn != \'undefined\' && loggedIn == true) { %>\n            <a class="btn btn-primary btn-mini repost ProjectTable-control"\n                data-ttref="PostProject_ProjectListingLoggedIn"\n                data-qts="PostProject" data-id="<%- projectId %>"\n                href=\'<%- SSL_BASE_URL %>/buyers/repost.php?id=<%- projectId %>\'>\n                <%- buttonLabel %>\n            </a>\n        <% } else if (typeof loggedIn == \'undefined\' && isPrivate !== "true") { %>\n            <a class="btn btn-primary btn-mini repost ProjectTable-control"\n                data-ttref="PostProject_ProjectListingLoggedOut"\n                data-qts="PostProject" data-id="<%- projectId %>"\n                href=\'<%- SSL_BASE_URL %>/buyers/repost.php?id=<%- projectId %>\'>\n                <%- buttonLabel %>\n            </a>\n        <% } %>\n    <% }  else if (type == \'c\') {\n        if (typeof loggedIn != \'undefined\' && loggedIn == true ) { %>\n            <a class="btn btn-primary btn-mini repost ProjectTable-control"\n                data-ttref="Contest_ProjectListingLoggedInRepost"\n                data-qts="PostContest" data-id="<%- projectId %>"\n                href=\'<%- SSL_BASE_URL %>/contest/repost-preview.php?id=<%- projectId %>\'>\n                <%- buttonLabel %>\n            </a>\n        <% } else if (typeof loggedIn == \'undefined\' && isPrivate !== "true") { %>\n            <a class="btn btn-primary btn-mini repost ProjectTable-control"\n                data-ttref="Contest_ProjectListingLoggedOutRepost"\n                data-qts="PostContest" data-id="<%- projectId %>"\n                href=\'<%- SSL_BASE_URL %>/contest/repost-preview.php?id=<%- projectId %>\'>\n                <%- buttonLabel %>\n            </a>\n        <% } %>\n     <% } %>\n<% } %>\n'}),define('text!templates/projectbrowse/projectBids.htm',[],function(){return'<div class="bids-col-inner" data-bids="<%- bidsCount %>">\n<% if (type == \'c\') { %>\n    <span class="fl-icon-trophy" aria-hidden="true" style=""></span>\n    <strong>\n<% } %>\n<%- bidsCount %>\n<% if (type == \'c\') { %>\n    </strong>\n    <small class="ProjectTable-bidsCaption table-label"><%- T_("Entries") %></small>\n<% } %>\n</div>\n'}),define('text!templates/projectbrowse/projectBookmark.htm',[],function(){return'<% if(typeof(abTestBookmarkColor) !== "undefined" && abTestBookmarkColor) { %>\n<div class="alert alert-success BookmarkAlert">\n<% } else { %>\n<div class="alert alert-error BookmarkAlert">\n<% } %>\n    <%= msg%>\n</div>\n'}),define('text!templates/projectbrowse/searchPaginationTemplate.htm',[],function(){return'<% if (last > 0) { %>\n<ul class="Pagination">\n    <li class="Pagination-item">\n        <a href="<%- urlBase %><%- urlPreNumber %>" id="pagination_top_first"\n           class="btn first paginate_button Pagination-link">\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="flicon-pagination-first">\n                    <path d="M10 11L5 6l5-5M2.5 11c-.28 0-.5-.22-.5-.5v-9c0-.28.22-.5.5-.5s.5.22.5.5v9c0 .28-.22.5-.5.5z"></path>\n                </svg>\n            </span>\n        </a>\n    </li>\n    <li class="Pagination-item">\n        <a href="<%- urlBase %><%- urlPreNumber %><% if (currentPageNum-1 > 1) { %><%- currentPageNum-1 %><% } %>"\n           id="pagination_top_prev" class="btn previous paginate_button Pagination-link">\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="flicon-pagination-prev">\n                    <path d="M8 11L3 6l5-5v10z"></path>\n                </svg>\n            </span>\n        </a>\n    </li>\n    <% for (var index = start; index <= last; index++) { %>\n    <li class="Pagination-item">\n        <a href="<%- urlBase %><%- urlPreNumber %><% if (index > 1) { %><%- index %><% } %>"\n           id="pagination_top_<%- index %>" class="btn number paginate_button Pagination-link"><%- index %></a>\n    </li>\n    <% } %>\n    <li class="Pagination-item">\n        <a href="<%- urlBase %><%- urlPreNumber %><% if (currentPageNum+1 < lastPageNum)\n           { %><%- currentPageNum+1 %><% } else { %><%- lastPageNum %><% } %>" id="pagination_top_next"\n           class="btn next paginate_button Pagination-link">\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="flicon-pagination-next">\n                    <path d="M4 1l5 5-5 5"></path>\n                </svg>\n            </span>\n        </a>\n    </li>\n    <li class="Pagination-item">\n        <a href="<%- urlBase %><%- urlPreNumber %><%- lastPageNum %>" id="pagination_top_last"\n           class="btn last paginate_button Pagination-link">\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" class="flicon-pagination-last">\n                    <path d="M2 1l5 5-5 5M9.5 1c.28 0 .5.22.5.5v9c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-9c0-.28.22-.5.5-.5z"></path>\n                </svg>\n            </span>\n        </a>\n    </li>\n</ul>\n<% } %>\n'}),function(){typeof define=='function'&&define.amd?define('project/browse/projectAndContestDataTable',['jquery-wrapper','text!templates/projectbrowse/projectName.htm','text!templates/projectbrowse/projectDescr.htm','text!templates/projectbrowse/projectBids.htm','text!templates/projectbrowse/projectBookmark.htm','text!templates/projectbrowse/searchPaginationTemplate.htm'],function(a,b,c,d,e,f){window.name_tmpl=b,window.descr_tmpl=c,window.bids_tmpl=d,window.bookmark_tmpl=e,window.pagination_tmpl=f}):jQuery(document).ready(function(){window.name_tmpl=jq('#projectNameTemplate').html(),window.descr_tmpl=jq('#projectDescrTemplate').html(),window.bids_tmpl=jq('#projectBidsTemplate').html(),window.bookmark_tmpl=jq('#projectBookmarkTemplate').html(),window.pagination_tmpl=jq('#projectPaginationTemplate').html()})}(),function(a){a.fn.slideto=function(b){var c={slide_duration:'slow',highlight_duration:3e3,highlight:!0,highlight_color:'#FFFF99',offset:0},b=a.extend(c,b);return this.each(function(){var c=!1;obj=a(this),a('html,body').animate({scrollTop:obj.offset().top+b.offset},b.slide_duration,function(){c==0&&(b.highlight&&a.ui.version&&obj.effect('highlight',{color:b.highlight_color},b.highlight_duration),c=!0)})})}}(jQuery),define('jquery.slideto.min',function(){}),define('project/browse/view/project-table-view',['jquery-wrapper','underscore-wrapper','backbone-wrapper','table/browse-projects','project/browse/projectAndContestDataTable','jquery.slideto.min'],function(a,b,c,d){var e=c.View.extend({el:'#browse-project-table',events:{'click tr.project-details':'project_redirect','mousedown td.title-col a':'ttref_track','mousedown tr.project-description button.bid-now':'ttref_track'},openNewBackgroundTab:function(b){var c=document.createElement('a');c.href=a(b.currentTarget).find('td.title-col a').attr('href');var d=document.createEvent('MouseEvents');d.initMouseEvent('click',!0,!0,window,0,0,0,0,0,!0,!1,!1,!1,0,null),c.dispatchEvent(d)},project_redirect:function(b){typeof history.pushState=='function'&&history.pushState('','',window.location.pathname+'#'+a(b.currentTarget).attr('id'));if(!a(b.target).closest('td').hasClass('bookmark-col')&&b.target.tagName!='A'){this.ttref_track();var c=navigator.userAgent.toLowerCase().indexOf('chrome')>-1;c?this.openNewBackgroundTab(b):window.open(a(b.currentTarget).find('td.title-col a').attr('href'),'_blank')}},ttref_track:function(){_ttref.push(['_clearEntrypoint','Project']),typeof ttref_ep=='string'?_ttref.push(['_setEntrypoint','Project_'+ttref_ep]):_ttref.push(['_setEntrypoint','Project_UndefinedJobContest'])},initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render')},qts_track:function(b,c,d,e,f){var g=window.searchOptions.attributes,h=JSON.parse(JSON.stringify(g)),i=a('#project_table').dataTable(),j=a('#project_table tr.project-details').length,k=i.fnSettings().fnRecordsTotal(),l=a('#browse-projects-pagination a.paginate_active').text(),m=l?l:1,n=e,o=f.data('ttref');_ttref.push(['_setCookie',o]),_lt.push(['search_action',{section:d,keyword:g.keyword,subsection:n,reference:'project_id',reference_id:b,label:c,filters:JSON.stringify(h),items_displayed:j,items_count:k,items_page:m}])},render:function(){window.browseProjectLib=d;var b=this;return a(document).ready(function(){for(var c=tableNamesJSON.length-1;c>=0;c--)window['build_'+tableNamesJSON[c]]();d.descriptionTransition.init(a('#project_table'));if(typeof window.location.hash!='undefined'&&window.location.hash!='')try{var e=a(window.location.hash);e.slideto(),e.trigger('mouseover')}catch(f){window.ErrorHandler.report(f,'Caught error on project table.')}a('#browse-project-table').on('click','.alert-error a',function(a){a.stopPropagation()});var g=null;pushStateRoot.match(/^\/work.*/)?g='WorkTable':pushStateRoot.match(/^\/jobs.*/)&&(g='JobTable'),a('#browse-project-table').on('click','a.bid-now',function(){var c=a(this),d=c.closest('a').data('id'),e=c.closest('tr.project-details'),f=parseInt(a('#project_table tr.project-details').index(e),10)+1;b.qts_track(d,'Bid',g,f,c)}),a('#browse-project-table').on('click','a.repost',function(){var c=a(this),d=c.data('id'),e=a(this).closest('tr.project-details'),f=parseInt(a('#project_table tr.project-details').index(e),10)+1;b.qts_track(d,'Repost',g,f,c)});var h=['.project-details > td.title-col','.project-details > td.bids-col','.project-details > td.started-col','.project-details > td.price-col'];a('#browse-project-table').on('click',h.join(','),function(){var c=a(this),d=c.parents('tr.project-details').attr('id'),e=c.parents('tr.project-details'),f=parseInt(a('#project_table tr.project-details').index(e),10)+1;b.qts_track(d,'PVP',g,f,c)}),a('#browse-project-table').on('click','.project-details > td.skills-col',function(){var c=a(this),d=c.parents('tr.project-details').attr('id'),e=c.parents('tr.project-details'),f=parseInt(a('#project_table tr.project-details').index(e),10)+1;b.qts_track(d,'Skills',g,f,c)}),a('#browse-project-table').on('click','.project-details .flicon-bookmark',function(){var c=a(this),d=c.parents('a').data('project-id'),e=c.parents('tr.project-details'),f=parseInt(a('#project_table tr.project-details').index(e),10)+1;b.qts_track(d,'Bookmark',g,f,c)})}),this}});return e}),function(a){a.fn.each2===void 0&&a.fn.extend({each2:function(b){for(var c=a([0]),d=-1,e=this.length;e>++d&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){function c(a,b){for(var c=0,e=b.length;e>c;c+=1)if(d(a,b[c]))return c;return-1}function d(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+''==c+'':c.constructor===String?c+''==a+'':!1}function e(b,c){var d,e,f;if(null===b||1>b.length)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function f(a){return a.outerWidth(!1)-a.width()}function g(c){var d='keyup-change-value';c.bind('keydown',function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.bind('keyup',function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger('keyup-change'))})}function h(c){c.bind('mousemove',function(c){var d=F;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger('mousemove-filtered',c)})}function i(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function j(a){var b,c=!1;return function(){return c===!1&&(b=a(),c=!0),b}}function k(a,b){var d=i(a,function(a){b.trigger('scroll-debounced',a)});b.bind('scroll',function(a){c(a.target,b.get())>=0&&d(a)})}function l(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,c=a[0],d=a.val().length;a.focus(),a.is(':visible')&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function m(a){a.preventDefault(),a.stopPropagation()}function n(a){a.preventDefault(),a.stopImmediatePropagation()}function o(b){if(!E){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);E=a(document.createElement('div')).css({position:'absolute',left:'-10000px',top:'-10000px',display:'none',fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:'nowrap'}),E.attr('class','select2-sizer'),a('body').append(E)}return E.text(b.val()),E.width()}function p(b,c,d){var e,f,g=[];e=b.attr('class'),e&&(e=''+e,a(e.split(' ')).each2(function(){0===this.indexOf('select2-')&&g.push(this)})),e=c.attr('class'),e&&(e=''+e,a(e.split(' ')).each2(function(){0!==this.indexOf('select2-')&&(f=d(this),f&&g.push(this))})),b.attr('class',g.join(' '))}function q(a,c,d,e){var f=a.toUpperCase().indexOf(c.toUpperCase()),g=c.length;return 0>f?(d.push(e(a)),b):(d.push(e(a.substring(0,f))),d.push('<span class=\'select2-match\'>'),d.push(e(a.substring(f,f+g))),d.push('</span>'),d.push(e(a.substring(f+g,a.length))),b)}function r(b){var c,d=0,e=null,f=b.quietMillis||100,g=b.url,h=this;return function(i){window.clearTimeout(c),c=window.setTimeout(function(){d+=1;var c=d,f=b.data,j=g,k=b.transport||a.ajax,l=b.type||'GET',m={};f=f?f.call(h,i.term,i.page,i.context):null,j='function'==typeof j?j.call(h,i.term,i.page,i.context):j,null!==e&&e.abort(),b.params&&(a.isFunction(b.params)?a.extend(m,b.params.call(h)):a.extend(m,b.params)),a.extend(m,{url:j,dataType:b.dataType,data:f,type:l,cache:!1,success:function(a){if(!(d>c)){var e=b.results(a,i.page);i.callback(e)}}}),e=k.call(h,m)},f)}}function s(c){var d,e,f=c,g=function(a){return''+a.text};a.isArray(f)&&(e=f,f={results:e}),a.isFunction(f)===!1&&(e=f,f=function(){return e});var h=f();return h.text&&(g=h.text,a.isFunction(g)||(d=f.text,g=function(a){return a[d]})),function(c){var d,e=c.term,h={results:[]};return''===e?(c.callback(f()),b):(d=function(b,f){var h,i;if(b=b[0],b.children){h={};for(i in b)b.hasOwnProperty(i)&&(h[i]=b[i]);h.children=[],a(b.children).each2(function(a,b){d(b,h.children)}),(h.children.length||c.matcher(e,g(h),b))&&f.push(h)}else c.matcher(e,g(b),b)&&f.push(b)},a(f().results).each2(function(a,b){d(b,h.results)}),c.callback(h),b)}}function t(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]};a(d?c():c).each(function(){var a=this.text!==b,c=a?this.text:this;(''===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g)}}function u(b){if(a.isFunction(b))return!0;if(!b)return!1;throw Error('formatterName must be a function or a falsy value')}function v(b){return a.isFunction(b)?b():b}function w(b){var c=0;return a.each(b,function(a,b){b.children?c+=w(b.children):c++}),c}function x(a,c,e,f){var g,h,i,j,k,l=a,m=!1;if(!f.createSearchChoice||!f.tokenSeparators||1>f.tokenSeparators.length)return b;for(;;){for(h=-1,i=0,j=f.tokenSeparators.length;j>i&&(k=f.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(0>h)break;if(g=a.substring(0,h),a=a.substring(h+k.length),g.length>0&&(g=f.createSearchChoice(g,c),g!==b&&null!==g&&f.id(g)!==b&&null!==f.id(g))){for(m=!1,i=0,j=c.length;j>i;i++)if(d(f.id(g),f.id(c[i]))){m=!0;break}m||e(g)}}return l!==a?a:b}function y(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var z,A,B,C,D,E,F,G;z={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case z.LEFT:case z.RIGHT:case z.UP:case z.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case z.SHIFT:case z.CTRL:case z.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},G=a(document),D=function(){var a=1;return function(){return a++}}(),G.bind('mousemove',function(a){F={x:a.pageX,y:a.pageY}}),A=y(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f='.select2-results';this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data('select2')!==b&&null!==c.element.data('select2')&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId='s2id_'+(c.element.attr('id')||'autogen'+D()),this.containerSelector='#'+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1'),this.container.attr('id',this.containerId),this.body=j(function(){return c.element.closest('body')}),p(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(v(c.containerCss)),this.container.addClass(v(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr('tabIndex'),this.opts.element.data('select2',this).addClass('select2-offscreen').bind('focus.select2',function(){a(this).select2('focus')}).attr('tabIndex','-1').before(this.container),this.container.data('select2',this),this.dropdown=this.container.find('.select2-drop'),this.dropdown.addClass(v(c.dropdownCssClass)),this.dropdown.data('select2',this),this.results=d=this.container.find(f),this.search=e=this.container.find('input.select2-input'),e.attr('tabIndex',this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),h(this.results),this.dropdown.delegate(f,'mousemove-filtered touchstart touchmove touchend',this.bind(this.highlightUnderEvent)),k(80,this.results),this.dropdown.delegate(f,'scroll-debounced',this.bind(this.loadMoreIfNeeded)),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),m(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),m(a))}),g(e),e.bind('keyup-change input paste',this.bind(this.updateResults)),e.bind('focus',function(){e.addClass('select2-focused')}),e.bind('blur',function(){e.removeClass('select2-focused')}),this.dropdown.delegate(f,'mouseup',this.bind(function(b){a(b.target).closest('.select2-result-selectable').length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.bind('click mouseup mousedown',function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(c.element.is(':disabled')||c.element.is('[readonly=\'readonly\']'))&&this.disable()},destroy:function(){var a=this.opts.element.data('select2');this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),a!==b&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeClass('select2-offscreen').removeData('select2').unbind('.select2').attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(c){var f,g,h,i;if(f=c.element,'select'===f.get(0).tagName.toLowerCase()&&(this.select=g=c.element),g&&a.each(['id','multiple','ajax','query','createSearchChoice','initSelection','data','tags'],function(){if(this in c)throw Error('Option \''+this+'\' is not allowed for Select2 when attached to a <select> element.')}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id,i=this;g=function(d,e,j){var k,l,m,n,o,p,q,r,s,t;for(d=c.sortResults(d,e,f),k=0,l=d.length;l>k;k+=1)m=d[k],o=m.disabled===!0,n=!o&&h(m)!==b,p=m.children&&m.children.length>0,q=a('<li></li>'),q.addClass('select2-results-dept-'+j),q.addClass('select2-result'),q.addClass(n?'select2-result-selectable':'select2-result-unselectable'),o&&q.addClass('select2-disabled'),p&&q.addClass('select2-result-with-children'),q.addClass(i.opts.formatResultCssClass(m)),r=a(document.createElement('div')),r.addClass('select2-result-label'),t=c.formatResult(m,r,f,i.opts.escapeMarkup),t!==b&&r.html(t),q.append(r),p&&(s=a('<ul></ul>'),s.addClass('select2-result-sub'),g(m.children,s,j+1),q.append(s)),q.data('select2-data',m),e.append(q)},g(e,d,0)}},a.fn.select2.defaults,c),'function'!=typeof c.id&&(h=c.id,c.id=function(a){return a[h]}),a.isArray(c.element.data('select2Tags'))){if('tags'in c)throw'tags specified as both an attribute \'data-select2-tags\' and in options of Select2 '+c.element.attr('id');c.tags=c.element.data('select2Tags')}if(g?(c.query=this.bind(function(c){var e,g,h,i={results:[],more:!1},j=c.term;h=function(a,b){var e;a.is('option')?c.matcher(j,a.text(),a)&&b.push({id:a.attr('value'),text:a.text(),element:a.get(),css:a.attr('class'),disabled:d(a.attr('disabled'),'disabled')}):a.is('optgroup')&&(e={text:a.attr('label'),children:[],element:a.get(),css:a.attr('class')},a.children().each2(function(a,b){h(b,e.children)}),e.children.length>0&&b.push(e))},e=f.children(),this.getPlaceholder()!==b&&e.length>0&&(g=e[0],''===a(g).text()&&(e=e.not(g))),e.each2(function(a,b){h(b,i.results)}),c.callback(i)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):'query'in c||('ajax'in c?(i=c.element.data('ajax-url'),i&&i.length>0&&(c.ajax.url=i),c.query=r.call(c.element,c.ajax)):'data'in c?c.query=s(c.data):'tags'in c&&(c.query=t(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(a){return{id:a,text:a}}),c.initSelection===b&&(c.initSelection=function(f,g){var h=[];a(e(f.val(),c.separator)).each(function(){var e=this,f=this,g=c.tags;a.isFunction(g)&&(g=g()),a(g).each(function(){return d(this.id,e)?(f=this.text,!1):b}),h.push({id:e,text:f})}),g(h)}))),'function'!=typeof c.query)throw'query function not defined for Select2 '+c.element.attr('id');return c},monitorSource:function(){var a,b=this.opts.element;b.bind('change.select2',this.bind(function(){this.opts.element.data('select2-change-triggered')!==!0&&this.initSelection()})),a=this.bind(function(){var a,b;a='disabled'!==this.opts.element.attr('disabled'),b='readonly'===this.opts.element.attr('readonly'),a=a&&!b,this.enabled!==a&&(a?this.enable():this.disable()),p(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(v(this.opts.containerCssClass)),p(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(v(this.opts.dropdownCssClass))}),b.bind('propertychange.select2 DOMAttrModified.select2',a),'undefined'!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(b){b.forEach(a)}),this.propertyObserver.observe(b.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:'change',val:this.val()}),this.opts.element.data('select2-change-triggered',!0),this.opts.element.trigger(b),this.opts.element.data('select2-change-triggered',!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass('select2-container-disabled'),this.opts.element.removeAttr('disabled'))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass('select2-container-disabled'),this.opts.element.attr('disabled','disabled'))},opened:function(){return this.container.hasClass('select2-dropdown-open')},positionDropdown:function(){var b,c,d,e=this.container.offset(),f=this.container.outerHeight(!1),g=this.container.outerWidth(!1),h=this.dropdown.outerHeight(!1),i=a(window).scrollLeft()+a(window).width(),j=a(window).scrollTop()+a(window).height(),k=e.top+f,l=e.left,m=j>=k+h,n=e.top-h>=this.body().scrollTop(),o=this.dropdown.outerWidth(!1),p=i>=l+o,q=this.dropdown.hasClass('select2-drop-above');'static'!==this.body().css('position')&&(b=this.body().offset(),k-=b.top,l-=b.left),q?(c=!0,!n&&m&&(c=!1)):(c=!1,!m&&n&&(c=!0)),p||(l=e.left+g-o),c?(k=e.top-h,this.container.addClass('select2-drop-above'),this.dropdown.addClass('select2-drop-above')):(this.container.removeClass('select2-drop-above'),this.dropdown.removeClass('select2-drop-above')),d=a.extend({top:k,left:l,width:g},v(this.opts.dropdownCss)),this.dropdown.css(d)},shouldOpen:function(){var b;return this.opened()?!1:(b=a.Event('opening'),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass('select2-drop-above'),this.dropdown.removeClass('select2-drop-above')},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){function b(){return{width:Math.max(document.documentElement.scrollWidth,a(window).width()),height:Math.max(document.documentElement.scrollHeight,a(window).height())}}var c,d=this.containerId,e='scroll.'+d,f='resize.'+d,g='orientationchange.'+d;this.clearDropdownAlignmentPreference(),this.container.addClass('select2-dropdown-open').addClass('select2-container-active'),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),c=a('#select2-drop-mask'),0==c.length&&(c=a(document.createElement('div')),c.attr('id','select2-drop-mask').attr('class','select2-drop-mask'),c.hide(),c.appendTo(this.body()),c.bind('mousedown touchstart',function(){var b,c=a('#select2-drop');c.length>0&&(b=c.data('select2'),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close())})),this.dropdown.prev()[0]!==c[0]&&this.dropdown.before(c),a('#select2-drop').removeAttr('id'),this.dropdown.attr('id','select2-drop'),c.css(b()),c.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass('select2-drop-active'),this.ensureHighlightVisible();var h=this;this.container.parents().add(window).each(function(){a(this).bind(f+' '+e+' '+g,function(){a('#select2-drop-mask').css(b()),h.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var b=this.containerId,c='scroll.'+b,d='resize.'+b,e='orientationchange.'+b;this.container.parents().add(window).each(function(){a(this).unbind(c).unbind(d).unbind(e)}),this.clearDropdownAlignmentPreference(),a('#select2-drop-mask').hide(),this.dropdown.removeAttr('id'),this.dropdown.hide(),this.container.removeClass('select2-dropdown-open'),this.results.empty(),this.clearSearch(),this.search.removeClass('select2-active'),this.opts.element.trigger(a.Event('close'))}},clearSearch:function(){},getMaximumSelectionSize:function(){return v(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,j=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return j.scrollTop(0),b;c=this.findHighlightableChoices(),e=a(c[d]),f=e.offset().top+e.outerHeight(!0),d===c.length-1&&(i=j.find('li.select2-more-results'),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=j.offset().top+j.outerHeight(!0),f>g&&j.scrollTop(j.scrollTop()+(f-g)),h=e.offset().top-j.offset().top,0>h&&'none'!=e.css('display')&&j.scrollTop(j.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find('.select2-result-selectable:not(.select2-selected):not(.select2-disabled)'),this.results.find('.select2-result-selectable:not(.select2-selected):not(.select2-disabled)')},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&c.length>d;){d+=b;var e=a(c[d]);if(e.hasClass('select2-result-selectable')&&!e.hasClass('select2-disabled')&&!e.hasClass('select2-selected')){this.highlight(d);break}}},highlight:function(d){var e,f,g=this.findHighlightableChoices();return 0===arguments.length?c(g.filter('.select2-highlighted')[0],g.get()):(d>=g.length&&(d=g.length-1),0>d&&(d=0),this.results.find('.select2-highlighted').removeClass('select2-highlighted'),e=a(g[d]),e.addClass('select2-highlighted'),this.ensureHighlightVisible(),f=e.data('select2-data'),f&&this.opts.element.trigger({type:'highlight',val:this.id(f),choice:f}),b)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest('.select2-result-selectable');if(c.length>0&&!c.is('.select2-highlighted')){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.results.find('.select2-highlighted').removeClass('select2-highlighted')},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find('li.select2-more-results'),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),this.opts.loadMorePadding>=a&&(c.addClass('select2-active'),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),e.postprocessResults(a,!1,!1),a.more===!0?(c.detach().appendTo(b).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d,e.context=a.context)})})))},tokenize:function(){},updateResults:function(c){function e(){j.scrollTop(0),i.removeClass('select2-active'),l.positionDropdown()}function f(a){j.html(a),e()}var g,h,i=this.search,j=this.results,k=this.opts,l=this,m=i.val(),n=a.data(this.container,'select2-last-term');if((c===!0||!n||!d(m,n))&&(a.data(this.container,'select2-last-term',m),c===!0||this.showSearchInput!==!1&&this.opened())){var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&u(k.formatSelectionTooBig,'formatSelectionTooBig')))return f('<li class=\'select2-selection-limit\'>'+k.formatSelectionTooBig(o)+'</li>'),b;if(i.val().length<k.minimumInputLength)return u(k.formatInputTooShort,'formatInputTooShort')?f('<li class=\'select2-no-results\'>'+k.formatInputTooShort(i.val(),k.minimumInputLength)+'</li>'):f(''),b;if(k.maximumInputLength&&i.val().length>k.maximumInputLength)return u(k.formatInputTooLong,'formatInputTooLong')?f('<li class=\'select2-no-results\'>'+k.formatInputTooLong(i.val(),k.maximumInputLength)+'</li>'):f(''),b;k.formatSearching&&0===this.findHighlightableChoices().length&&f('<li class=\'select2-searching\'>'+k.formatSearching()+'</li>'),i.addClass('select2-active'),h=this.tokenize(),h!=b&&null!=h&&i.val(h),this.resultsPage=1,k.query({element:k.element,term:i.val(),page:this.resultsPage,context:null,matcher:k.matcher,callback:this.bind(function(g){var h;return this.opened()?(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&''!==i.val()&&(h=this.opts.createSearchChoice.call(null,i.val(),g.results),h!==b&&null!==h&&l.id(h)!==b&&null!==l.id(h)&&0===a(g.results).filter(function(){return d(l.id(this),l.id(h))}).length&&g.results.unshift(h)),0===g.results.length&&u(k.formatNoMatches,'formatNoMatches')?(f('<li class=\'select2-no-results\'>'+k.formatNoMatches(i.val())+'</li>'),b):(j.empty(),l.opts.populateResults.call(this,j,g.results,{term:i.val(),page:this.resultsPage,context:null}),g.more===!0&&u(k.formatLoadMore,'formatLoadMore')&&(j.append('<li class=\'select2-more-results\'>'+l.opts.escapeMarkup(k.formatLoadMore(this.resultsPage))+'</li>'),window.setTimeout(function(){l.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),e(),this.opts.element.trigger({type:'loaded',data:g}),b)):(this.search.removeClass('select2-active'),b)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass('select2-container-active'),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find('.select2-search-choice-focus').removeClass('select2-search-choice-focus')},focusSearch:function(){l(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find('.select2-highlighted'),d=c.closest('.select2-result').data('select2-data');d&&(this.highlight(b),this.onSelect(d,a))},getPlaceholder:function(){return this.opts.element.attr('placeholder')||this.opts.element.attr('data-placeholder')||this.opts.element.data('placeholder')||this.opts.placeholder},initContainerWidth:function(){function c(){var c,d,e,f,g;if('off'===this.opts.width)return null;if('element'===this.opts.width)return 0===this.opts.element.outerWidth(!1)?'auto':this.opts.element.outerWidth(!1)+'px';if('copy'===this.opts.width||'resolve'===this.opts.width){if(c=this.opts.element.attr('style'),c!==b)for(d=c.split(';'),f=0,g=d.length;g>f;f+=1)if(e=d[f].replace(/\s/g,'').match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==e&&e.length>=1)return e[1];return'resolve'===this.opts.width?(c=this.opts.element.css('width'),c.indexOf('%')>0?c:0===this.opts.element.outerWidth(!1)?'auto':this.opts.element.outerWidth(!1)+'px'):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css('width',d)}}),B=y(A,{createContainer:function(){var b=a(document.createElement('div')).attr({'class':'select2-container'}).html(['<a href=\'javascript:void(0)\' onclick=\'return false;\' class=\'select2-choice\' tabindex=\'-1\'>','   <span></span><abbr class=\'select2-search-choice-close fl-icon-close\' style=\'display:none;\'></abbr>','   <div><b></b></div>','</a>','<input class=\'select2-focusser select2-offscreen\' type=\'text\'/>','<div class=\'select2-drop\' style=\'display:none\'>','   <div class=\'select2-search\'>','       <input type=\'text\' autocomplete=\'off\' class=\'select2-input\'/>','   </div>','   <ul class=\'select2-results\'>','   </ul>','</div>'].join(''));return b},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr('disabled','disabled'))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr('disabled'))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr('disabled','disabled'),this.opts.element.trigger(a.Event('open'))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr('disabled'),l(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr('disabled'),this.focusser.focus())},isFocused:function(){return this.container.hasClass('select2-container-active')},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr('disabled'),this.focusser.focus()},initContainer:function(){var c,d=this.container,e=this.dropdown,f=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=c=d.find('.select2-choice'),this.focusser=d.find('.select2-focusser'),this.focusser.attr('id','s2id_autogen'+D()),a('label[for=\''+this.opts.element.attr('id')+'\']').attr('for',this.focusser.attr('id')),this.search.bind('keydown',this.bind(function(a){if(this.enabled){if(a.which===z.PAGE_UP||a.which===z.PAGE_DOWN)return m(a),b;switch(a.which){case z.UP:case z.DOWN:return this.moveHighlight(a.which===z.UP?-1:1),m(a),b;case z.TAB:case z.ENTER:return this.selectHighlighted(),m(a),b;case z.ESC:return this.cancel(a),m(a),b}}})),this.search.bind('blur',this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind('keydown',this.bind(function(a){return!this.enabled||a.which===z.TAB||z.isControl(a)||z.isFunctionKey(a)||a.which===z.ESC?b:this.opts.openOnEnter===!1&&a.which===z.ENTER?(m(a),b):a.which==z.DOWN||a.which==z.UP||a.which==z.ENTER&&this.opts.openOnEnter?(this.open(),m(a),b):a.which==z.DELETE||a.which==z.BACKSPACE?(this.opts.allowClear&&this.clear(),m(a),b):b})),g(this.focusser),this.focusser.bind('keyup-change input',this.bind(function(a){this.opened()||(this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(''),m(a))})),c.delegate('abbr','mousedown',this.bind(function(a){this.enabled&&(this.clear(),n(a),this.close(),this.selection.focus())})),c.bind('mousedown',this.bind(function(a){f=!0,this.opened()?this.close():this.enabled&&this.open(),m(a),f=!1})),e.bind('mousedown',this.bind(function(){this.search.focus()})),c.bind('focus',this.bind(function(a){m(a)})),this.focusser.bind('focus',this.bind(function(){this.container.addClass('select2-container-active')})).bind('blur',this.bind(function(){this.opened()||this.container.removeClass('select2-container-active')})),this.search.bind('focus',this.bind(function(){this.container.addClass('select2-container-active')})),this.initContainerWidth(),this.setPlaceholder()},clear:function(a){var b=this.selection.data('select2-data');b&&(this.opts.element.val(''),this.selection.find('span').empty(),this.selection.removeData('select2-data'),this.setPlaceholder(),a!==!1&&(this.opts.element.trigger({type:'removed',val:this.id(b),choice:b}),this.triggerChange({removed:b})))},initSelection:function(){if(''===this.opts.element.val()&&''===this.opts.element.text())this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder())})}},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return'select'===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(b,c){var d=b.find(':selected');a.isFunction(c)&&c({id:d.attr('value'),text:d.text(),element:d})}:'data'in b&&(b.initSelection=b.initSelection||function(c,e){var f=c.val(),g=null;b.query({matcher:function(a,c,e){var h=d(f,b.id(e));return h&&(g=e),h},callback:a.isFunction(e)?function(){e(g)}:a.noop})}),b},getPlaceholder:function(){return this.select&&''!==this.select.find('option').first().text()?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(''===this.opts.element.val()&&a!==b){if(this.select&&''!==this.select.find('option:first').text())return;this.selection.find('span').html(this.opts.escapeMarkup(a)),this.selection.addClass('select2-default'),this.selection.find('abbr').hide()}},postprocessResults:function(a,c,e){var f=0,g=this,h=!0;if(this.findHighlightableChoices().each2(function(a,c){return d(g.id(c.data('select2-data')),g.opts.element.val())?(f=a,!1):b}),e!==!1&&this.highlight(f),c===!0){var i=this.opts.minimumResultsForSearch;h=0>i?!1:w(a.results)>=i,this.showSearch(h)}},showSearch:function(b){this.showSearchInput=b,this.dropdown.find('.select2-search')[b?'removeClass':'addClass']('select2-search-hidden'),a(this.dropdown,this.container)[b?'addClass':'removeClass']('select2-with-searchbox')},onSelect:function(a,b){var c=this.opts.element.val();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:'selected',val:this.id(a),choice:a}),this.close(),b&&b.noFocus||this.selection.focus(),d(c,this.id(a))||this.triggerChange()},updateSelection:function(a){var c,d=this.selection.find('span');this.selection.data('select2-data',a),d.empty(),c=this.opts.formatSelection(a,d),c!==b&&d.append(this.opts.escapeMarkup(c)),this.selection.removeClass('select2-default'),this.opts.allowClear&&this.getPlaceholder()!==b&&this.selection.find('abbr').show()},val:function(){var a,c=!1,d=null,e=this;if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find(':selected').each2(function(a,b){return d={id:b.attr('value'),text:b.text(),element:b.get(0)},!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange();else{if(this.opts.initSelection===b)throw Error('cannot call val() if initSelection() is not defined');if(!a&&0!==a)return this.clear(c),c&&this.triggerChange(),b;this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):''),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange()})}},clearSearch:function(){this.search.val(''),this.focusser.val('')},data:function(a){var c;return 0===arguments.length?(c=this.selection.data('select2-data'),c==b&&(c=null),c):(a&&''!==a?(this.opts.element.val(a?this.id(a):''),this.updateSelection(a)):this.clear(),b)}}),C=y(A,{createContainer:function(){var b=a(document.createElement('div')).attr({'class':'select2-container select2-container-multi'}).html(['    <ul class=\'select2-choices\'>','  <li class=\'select2-search-field\'>','    <input type=\'text\' autocomplete=\'off\' class=\'select2-input\'>','  </li>','</ul>','<div class=\'select2-drop select2-drop-multi\' style=\'display:none;\'>','   <ul class=\'select2-results\'>','   </ul>','</div>'].join(''));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return'select'===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var c=[];a.find(':selected').each2(function(a,b){c.push({id:b.attr('value'),text:b.text(),element:b[0]})}),b(c)}:'data'in b&&(b.initSelection=b.initSelection||function(c,f){var g=e(c.val(),b.separator),h=[];b.query({matcher:function(c,e,f){var i=a.grep(g,function(a){return d(a,b.id(f))}).length;return i&&h.push(f),i},callback:a.isFunction(f)?function(){f(h)}:a.noop})}),b},initContainer:function(){var c,d='.select2-choices';this.searchContainer=this.container.find('.select2-search-field'),this.selection=c=this.container.find(d),this.search.attr('id','s2id_autogen'+D()),a('label[for=\''+this.opts.element.attr('id')+'\']').attr('for',this.search.attr('id')),this.search.bind('input paste',this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind('keydown',this.bind(function(a){if(this.enabled){if(a.which===z.BACKSPACE&&''===this.search.val()){this.close();var d,e=c.find('.select2-search-choice-focus');if(e.length>0)return this.unselect(e.first()),this.search.width(10),m(a),b;d=c.find('.select2-search-choice:not(.select2-locked)'),d.length>0&&d.last().addClass('select2-search-choice-focus')}else c.find('.select2-search-choice-focus').removeClass('select2-search-choice-focus');if(this.opened())switch(a.which){case z.UP:case z.DOWN:return this.moveHighlight(a.which===z.UP?-1:1),m(a),b;case z.ENTER:case z.TAB:return this.selectHighlighted(),m(a),b;case z.ESC:return this.cancel(a),m(a),b}if(a.which!==z.TAB&&!z.isControl(a)&&!z.isFunctionKey(a)&&a.which!==z.BACKSPACE&&a.which!==z.ESC){if(a.which===z.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===z.PAGE_UP||a.which===z.PAGE_DOWN)&&m(a),a.which===z.ENTER&&m(a)}}})),this.search.bind('keyup',this.bind(this.resizeSearch)),this.search.bind('blur',this.bind(function(a){this.container.removeClass('select2-container-active'),this.search.removeClass('select2-focused'),this.opened()||this.clearSearch(),a.stopImmediatePropagation()})),this.container.delegate(d,'mousedown',this.bind(function(b){this.enabled&&(a(b.target).closest('.select2-search-choice').length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.delegate(d,'focus',this.bind(function(){this.enabled&&(this.container.addClass('select2-container-active'),this.dropdown.addClass('select2-drop-active'),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr('disabled'))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr('disabled',!0))},initSelection:function(){if(''===this.opts.element.val()&&''===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||''!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();a!==b&&0===this.getVal().length&&this.search.hasClass('select2-focused')===!1?(this.search.val(a).addClass('select2-default'),this.search.width(this.getMaxSearchWidth())):this.search.val('').width(10)},clearPlaceholder:function(){this.search.hasClass('select2-default')&&this.search.val('').removeClass('select2-default')},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.opts.element.trigger(a.Event('open'))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass('select2-focused')},updateSelection:function(b){var d=[],e=[],f=this;a(b).each(function(){0>c(f.id(this),d)&&(d.push(f.id(this)),e.push(this))}),b=e,this.selection.find('.select2-search-choice').remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,b){this.addSelectedChoice(a),this.opts.element.trigger({type:'selected',val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),b&&b.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var d,e=!c.locked,f=a('<li class=\'select2-search-choice\'>    <div></div>    <a href=\'#\' onclick=\'return false;\' class=\'select2-search-choice-close fl-icon-close\' tabindex=\'-1\'></a></li>'),g=a('<li class=\'select2-search-choice select2-locked\'><div></div></li>'),h=e?f:g,i=this.id(c),j=this.getVal();d=this.opts.formatSelection(c,h.find('div')),d!=b&&h.find('div').replaceWith('<div>'+this.opts.escapeMarkup(d)+'</div>'),e&&h.find('.select2-search-choice-close').bind('mousedown',m).bind('click dblclick',this.bind(function(b){this.enabled&&(a(b.target).closest('.select2-search-choice').fadeOut('fast',this.bind(function(){this.unselect(a(b.target)),this.selection.find('.select2-search-choice-focus').removeClass('select2-search-choice-focus'),this.close(),this.focusSearch()})).dequeue(),m(b))})).bind('focus',this.bind(function(){this.enabled&&(this.container.addClass('select2-container-active'),this.dropdown.addClass('select2-drop-active'))})),h.data('select2-data',c),h.insertBefore(this.searchContainer),j.push(i),this.setVal(j)},unselect:function(a){var b,d,e=this.getVal();if(a=a.closest('.select2-search-choice'),0===a.length)throw'Invalid argument: '+a+'. Must be .select2-search-choice';b=a.data('select2-data'),b&&(d=c(this.id(b),e),d>=0&&(e.splice(d,1),this.setVal(e),this.select&&this.postprocessResults()),a.remove(),this.opts.element.trigger({type:'removed',val:this.id(b),choice:b}),this.triggerChange({removed:b}))},postprocessResults:function(){var a=this.getVal(),b=this.results.find('.select2-result'),d=this.results.find('.select2-result-with-children'),e=this;b.each2(function(b,d){var f=e.id(d.data('select2-data'));c(f,a)>=0&&(d.addClass('select2-selected'),d.find('.select2-result-selectable').addClass('select2-selected'))}),d.each2(function(a,b){b.is('.select2-result-selectable')||0!==b.find('.select2-result-selectable:not(.select2-selected)').length||b.addClass('select2-selected')}),-1==this.highlight()&&e.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-f(this.search)},resizeSearch:function(){var a,b,c,d,e,g=f(this.search);a=o(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-g,a>e&&(e=c-g),40>e&&(e=c-g),0>=e&&(e=a),this.search.width(e)},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),e(a,this.opts.separator))},setVal:function(b){var d;this.select?this.select.val(b):(d=[],a(b).each(function(){0>c(this,d)&&d.push(this)}),this.opts.element.val(0===d.length?'':d.join(this.opts.separator)))},val:function(){var c,d=!1,e=this;if(0===arguments.length)return this.getVal();if(c=arguments[0],arguments.length>1&&(d=arguments[1]),!c&&0!==c)return this.opts.element.val(''),this.updateSelection([]),this.clearSearch(),d&&this.triggerChange(),b;if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange();else{if(this.opts.initSelection===b)throw Error('val() cannot be called if initSelection() is not defined');this.opts.initSelection(this.opts.element,function(b){var c=a(b).map(e.id);e.setVal(c),e.updateSelection(b),e.clearSearch(),d&&e.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error('Sorting of elements is not supported when attached to <select>. Attach to <input type=\'hidden\'/> instead.');this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find('.select2-search-choice').each(function(){b.push(c.opts.id(a(this).data('select2-data')))}),this.setVal(b),this.triggerChange()},data:function(c){var d,e=this;return 0===arguments.length?this.selection.find('.select2-search-choice').map(function(){return a(this).data('select2-data')}).get():(c||(c=[]),d=a.map(c,function(a){return e.opts.id(a)}),this.setVal(d),this.updateSelection(c),this.clearSearch(),b)}}),a.fn.select2=function(){var d,e,f,g,h=Array.prototype.slice.call(arguments,0),i=['val','destroy','opened','open','close','focus','isFocused','container','onSortStart','onSortEnd','enable','disable','positionDropdown','data'];return this.each(function(){if(0===h.length||'object'==typeof h[0])d=0===h.length?{}:a.extend({},h[0]),d.element=a(this),'select'===d.element.get(0).tagName.toLowerCase()?g=d.element.attr('multiple'):(g=d.multiple||!1,'tags'in d&&(d.multiple=g=!0)),e=g?new C:new B,e.init(d);else{if('string'!=typeof h[0])throw'Invalid arguments to select2 plugin: '+h;if(0>c(h[0],i))throw'Unknown method: '+h[0];if(f=b,e=a(this).data('select2'),e===b)return;if(f='container'===h[0]?e.container:e[h[0]].apply(e,h.slice(1)),f!==b)return!1}}),f===b?this:f},a.fn.select2.defaults={width:'copy',loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:'',dropdownCssClass:'',formatResult:function(a,b,c,d){var e=[];return q(a.text,c.term,e,d),e.join('')},formatSelection:function(a){return a?a.text:b},sortResults:function(a){return a},formatResultCssClass:function(){return b},formatNoMatches:function(){return'No matches found'},formatInputTooShort:function(a,b){var c=b-a.length;return'Please enter '+c+' more character'+(1==c?'':'s')},formatInputTooLong:function(a,b){var c=a.length-b;return'Please delete '+c+' character'+(1==c?'':'s')},formatSelectionTooBig:function(a){return'You can only select '+a+' item'+(1==a?'':'s')},formatLoadMore:function(){return'Loading more results...'},formatSearching:function(){return'Searching...'},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return(''+b).toUpperCase().indexOf((''+a).toUpperCase())>=0},separator:',',tokenSeparators:[],tokenizer:x,escapeMarkup:function(a){var b={'\\':'&#92;','&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&apos;','/':'&#47;'};return(a+'').replace(/[&<>"'\/\\]/g,function(a){return b[a[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:r,local:s,tags:t},util:{debounce:i,markMatch:q},'class':{'abstract':A,single:B,multi:C}}}}(jQuery),define('select2-v3.3',function(){}),function(a,b,c){function e(a){return a}function f(a){return g(decodeURIComponent(a.replace(d,' ')))}function g(a){return a.indexOf('"')===0&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\')),a}function h(a){return i.json?JSON.parse(a):a}var d=/\+/g,i=a.cookie=function(d,g,j){if(g!==c){j=a.extend({},i.defaults,j),g===null&&(j.expires=-1);if(typeof j.expires=='number'){var k=j.expires,l=j.expires=new Date;l.setDate(l.getDate()+k)}return g=i.json?JSON.stringify(g):String(g),b.cookie=[encodeURIComponent(d),'=',i.raw?g:encodeURIComponent(g),j.expires?'; expires='+j.expires.toUTCString():'',j.path?'; path='+j.path:'',j.domain?'; domain='+j.domain:'',j.secure?'; secure':''].join('')}var m=i.raw?e:f,n=b.cookie.split('; '),o=d?null:{};for(var p=0,q=n.length;p<q;p++){var r=n[p].split('='),s=m(r.shift()),t=m(r.join('='));if(d&&d===s){o=h(t);break}d||(o[s]=h(t))}return o};i.defaults={},a.removeCookie=function(b,c){return a.cookie(b)!==null?(a.cookie(b,null,c),!0):!1}}(jQuery,document),define('lib/jquery/jquery.cookie',function(){}),define('async',[],function(){function c(a){var b,c;b=document.createElement('script'),b.type='text/javascript',b.async=!0,b.src=a,c=document.getElementsByTagName('script')[0],c.parentNode.insertBefore(b,c)}function d(b,c){var d=/!(.+)/,e=b.replace(d,''),f=d.test(b)?b.replace(/.+!/,''):a;return e+=e.indexOf('?')<0?'?':'&',e+f+'='+c}function e(){return b+=1,'__async_req_'+b+'__'}var a='callback',b=0;return{load:function(a,b,f,g){if(g.isBuild)f(null);else{var h=e();window[h]=f,c(d(b.toUrl(a),h))}}}}),define('googlemaps',['async'],function(a){function e(){}var b=this,c={load:function(a,b,c,e){var f,g=e||{};if(g.isBuild){c(null);return}f=new d(b,c,g.googlemaps||{}),f.load()}},d=function(b,c,f){this.require_=b,this.onload_=c||e,this.baseUrl_=f.url||d.DEFAULT_BASE_URL,this.async_=f.async||a,this.params_=this.normalizeParams_(f.params)};return d.prototype.load=function(){this.isGoogleMapsLoaded_()?this.resolveWith_(this.getGlobalGoogleMaps_()):this.loadGoogleMaps_()},d.prototype.loadGoogleMaps_=function(){var a=this,b=function(){a.resolveWithGoogleMaps_(a)};b.onerror=this.onload_.onerror,this.async_.load(this.getGoogleUrl_(),this.require_,b,{})},d.prototype.getGoogleUrl_=function(){return this.baseUrl_+'?'+this.serializeParams_()},d.prototype.resolveWithGoogleMaps_=function(){if(!this.isGoogleMapsLoaded_()){this.reject_();return}this.resolveWith_(this.getGlobalGoogleMaps_())},d.prototype.serializeParams_=function(){var a=[];for(var b in this.params_)if(this.params_.hasOwnProperty(b)){var c=this.params_[b],d=typeof c=='object',e=encodeURIComponent(b)+'='+encodeURIComponent(c),f=d?this.serializeParams_(c,b):e;a.push(f)}return a.join('&')},d.prototype.normalizeParams_=function(a){var b={sensor:!1};return a||(a={}),a.sensor=a.sensor==void 0?b.sensor:a.sensor,a},d.prototype.isGoogleMapsLoaded_=function(){return b.google&&b.google.maps},d.prototype.getGlobalGoogleMaps_=function(){return b.google?b.google.maps:undefined},d.prototype.resolveWith_=function(a){this.onload_.apply(b,arguments)},d.prototype.reject_=function(a){var c=a||new Error('Failed to load Google Maps library.');if(!this.onload_.onerror)throw c;this.onload_.onerror.call(b,c)},d.DEFAULT_BASE_URL='https://maps.googleapis.com/maps/api/js',c}),define('geocoding/module-geocoding',['jquery-wrapper','underscore-wrapper','googlemaps!'],function(a,b,c){var d={config:{}},e;return d.init=function(b){d.config=b,e=new c.places.Autocomplete(document.getElementById(d.config.autoCompleteElement),{}),c.event.addListener(e,'place_changed',function(){typeof d.config.autoCompleteCallback=='function'&&d.config.autoCompleteCallback(d.getSelectedAddressGeoInfo())}),typeof d.config.reverseGeocodingElement!='undefined'&&a('#'+d.config.reverseGeocodingElement).off('click').on('click',function(a){a.preventDefault();if('geolocation'in navigator){var b={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};navigator.geolocation.getCurrentPosition(function(a){d.getReverseGeoInfo(a.coords.latitude,a.coords.longitude)},function(a){typeof d.config.reverseGeocodingErrorCallback=='function'&&d.config.reverseGeocodingErrorCallback('Failed to determine current location: '+a.toString())},b)}})},d.formatGeoInfo=function(a){var b={administrative_area_level_1:'',country:'',formatted_address:'',lat:'',lng:'',vicinity:''},c={administrative_area_level_1:'short_name',country:'long_name',locality:'long_name'};for(var d=0;d<a.address_components.length;d++){var e=a.address_components[d].types[0];c[e]&&(b[e]=a.address_components[d][c[e]])}return b.formatted_address=a.formatted_address,b.lat=a.geometry.location.lat(),b.lng=a.geometry.location.lng(),b.vicinity=a.vicinity||b.locality||b.administrative_area_level_1||b.country||'',b},d.getSelectedAddressGeoInfo=function(){var a=e.getPlace();return d.formatGeoInfo(a)},d.getReverseGeoInfo=function(b,e){var f=new c.Geocoder,g=new c.LatLng(b,e);f.geocode({latLng:g},function(b,e){if(e===c.GeocoderStatus.OK){var f=d.formatGeoInfo(b[0]);a('#'+d.config.autoCompleteElement).val(f.formatted_address),typeof d.config.reverseGeocodingSuccessCallback=='function'&&d.config.reverseGeocodingSuccessCallback(f)}else typeof d.config.reverseGeocodingErrorCallback=='function'&&d.config.reverseGeocodingErrorCallback(e)})},{init:d.init}}),define('geocoding/module-gmap',['jquery-wrapper','underscore-wrapper','googlemaps!'],function(a,b,c){var d=[],e=[],f,g=function(a){f=undefined;var b=document.getElementById(a.canvas),d;a.center?d=new c.LatLng(a.center.lat,a.center.lon):d=new c.LatLng(-33.87,151.21);var e={center:d,mapTypeId:a.mapTypeId?a.mapTypeId:c.MapTypeId.ROADMAP,zoom:a.zoom?a.zoom:16,panControl:a.panControl?a.panControl:!0,zoomControl:a.zoomControl?a.zoomControl:!0,mapTypeControl:a.mapTypeControl?a.mapTypeControl:!1,scaleControl:a.scaleControl?a.scaleControl:!0,streetViewControl:a.streetViewControl?a.streetViewControl:!1,overviewMapControl:a.overviewMapControl?a.overviewMapControl:!0};f=new c.Map(b,e)},h=function(){return f!==undefined},i=function(a){if(!h())return;var b=new c.LatLng(a.lat,a.lon);f.setOptions({center:b})},j=function(b){if(!h())return;var g=new c.LatLng(b.lat,b.lon),i=new c.Marker({position:g,map:f,title:b.title,icon:b.icon});d.push(i);if(b.infowindowHTML){var j=new c.InfoWindow({content:b.infowindowHTML});e.push(j),c.event.addListener(i,'click',function(){a.each(e,function(a,b){b.close()}),j.open(f,i)})}(typeof b.removeAdjustZoom=='undefined'||b.removeAdjustZoom!==!0)&&k()},k=function(){if(!h())return;var a=new c.LatLngBounds;for(var b=0;b<d.length;b++)a.extend(d[b].getPosition());f.fitBounds(a)},l=function(){d=[],e=[]};return{init:g,setCenter:i,addMarker:j,clearMarkers:l}}),define('text!templates/projectbrowse/searchPanelTemplate.htm',[],function(){return'<section class="ProjectFilters">\n    <% if (typeof useLocalJobsLayout !== \'undefined\' && useLocalJobsLayout === true) { %>\n    <div class="ProjectFilters-section hide">\n    <% } else { %>\n    <div class="ProjectFilters-section">\n    <% } %>\n        <form class="fl-form ProjectFilters-row">\n            <label class="ProjectFilters-rowLabel">\n                <%- T_("Search") %>\n                <span class="fl-icon-checkmark form-valid-icon"></span>\n                <span class="fl-icon-close form-invalid-icon"></span>\n            </label>\n            <div class="ProjectFilters-item">\n                <div class="input-icon">\n                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve" class="flicon-search">\n                        <g>\n                        <circle fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" cx="10.2" cy="10.9" r="8.1"></circle>\n                        <line fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="15.9" y1="16.6" x2="21.8" y2="22.5"></line>\n                        </g>\n                    </svg>\n                    <input name="search" type="text" class="search-query" placeholder="<%- T_("Search for projects and contests") %>">\n                </div>\n                <div class="form-error"></div>\n            </div>\n        </form>\n    </div>\n\n    <% if (typeof useLocalJobsLayout !== \'undefined\' && useLocalJobsLayout === true) { %>\n    <div class="ProjectFilters-section hide">\n    <% } else { %>\n    <div class="ProjectFilters-section">\n    <% } %>\n        <form class="fl-form ProjectFilters-row">\n            <label class="ProjectFilters-rowLabel">\n                <%- T_("Skills") %>\n                <span class="fl-icon-checkmark form-valid-icon"></span>\n                <span class="fl-icon-close form-invalid-icon"></span>\n            </label>\n            <div class="ProjectFilters-item">\n                <select id="skills-select" multiple="multiple" class="select2 search-panel-control"\n                        placeholder="<%- T_("Type to filter projects and contests by skills ...") %>"></select>\n                <div class="form-error"></div>\n            </div>\n        </form>\n    </div>\n\n    <% if (typeof useLocalJobsLayout !== \'undefined\' && useLocalJobsLayout === true) { %>\n    <div class="ProjectFilters-section hide">\n    <% } else { %>\n    <div class="ProjectFilters-section">\n    <% } %>\n        <form class="fl-form ProjectFilters-row">\n            <label class="ProjectFilters-rowLabel">\n                <%- T_("Job Types") %>\n                <span class="fl-icon-checkmark form-valid-icon"></span>\n                <span class="fl-icon-close form-invalid-icon"></span>\n            </label>\n            <div class="ProjectFilters-item">\n                <div class="ProjectFilters-row ProjectFilters-row--JobTypes">\n                    <div class="ProjectFilters-item ProjectFilters-item--JobType">\n                        <label class="ProjectFilters-checkbox" for="Fixed">\n                          <input type="checkbox" id="Fixed" value="fixed" checked="true"> <%- T_("Fixed Price Projects") %>\n                        </label>\n                        <div class="filter-to-hide hide">\n                            <div id="budget" class="range-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"\n                                 data-min="30" data-max="5000" data-currency="$">\n                                <a class="ui-slider-handle ui-state-default ui-corner-all"href="#" style="left: 0%;"></a>\n                                <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;"></a>\n                            </div>\n                            <input type="text" id="budget-range-text" class="range-value" readonly="" disabled="">\n                            <div class="form-error"></div>\n                        </div>\n                    </div>\n                    <div class="ProjectFilters-item ProjectFilters-item--JobType">\n                        <label class="ProjectFilters-checkbox" for="Hourly">\n                          <input type="checkbox" id="Hourly" value="hourly" checked="true"> <%- T_("Hourly Projects") %>\n                        </label>\n                        <div class="filter-to-hide hide">\n                            <div id="hourly-rate" class="range-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"\n                                 data-min="2" data-max="100" data-currency="$">\n                                <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a>\n                                <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;"></a>\n                            </div>\n                            <input type="text" id="hourly-rate-text" class="range-value" readonly="" disabled="">\n                            <div class="ProjectFilters-duration filter-to-hide hide">\n                                <label for="duration-select" class="ProjectFilters-durationLabel">\n                                    <%- T_("Duration") %>\n                                </label>\n                                <span class="ProjectFilters-durationControl">\n                                    <select name="duration-select" class="select search-panel-control"\n                                            id="duration-select" placeholder="<%- T_("Duration of the project") %>">\n                                        <option value="false"><%- T_("All Duration") %></option>\n                                        <option value="1"><%- T_("Less than 1 week") %></option>\n                                        <option value="2"><%- T_("1 week to 4 weeks") %></option>\n                                        <option value="3"><%- T_("1 month to 3 months") %></option>\n                                        <option value="4"><%- T_("3 months to 6 months") %></option>\n                                        <option value="5"><%- T_("Over 6 months / Ongoing") %></option>\n                                        <option value="6"><%- T_("Unspecific") %></options>\n                                    </select>\n                                </span>\n                            </div>\n                            <div class="form-error"></div>\n                        </div>\n                    </div>\n                    <div class="ProjectFilters-item ProjectFilters-item--JobType">\n                        <label class="ProjectFilters-checkbox" for="Contests">\n                          <input type="checkbox" id="Contests" value="contests" checked="true"> <%- T_("Contests") %>\n                        </label>\n                        <div class="filter-to-hide hide">\n                            <div id="contest-budget" class="range-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"\n                                 data-min="10" data-max="5000" data-currency="$">\n                                <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a>\n                                <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;"></a>\n                            </div>\n                            <input type="text" id="contest-budget-text" class="range-value" readonly="" disabled="">\n                            <div class="form-error"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n\n    <div class="ProjectFilters-section filter-to-hide hide">\n        <form class="fl-form ProjectFilters-row">\n            <label class="ProjectFilters-rowLabel">\n                <%- T_("Listing types") %>\n                <span class="fl-icon-checkmark form-valid-icon"></span>\n                <span class="fl-icon-close form-invalid-icon"></span>\n            </label>\n            <div class="ProjectFilters-item">\n                <select multiple="multiple" class="select2 search-panel-control"\n                        id="listing-type" placeholder="<%- T_("Type to filter project listing types ...") %>"></select>\n                <div class="form-error"></div>\n            </div>\n        </form>\n    </div>\n\n\n    <div class="ProjectFilters-section filter-to-hide hide">\n        <form class="fl-form ProjectFilters-row">\n            <label class="ProjectFilters-rowLabel">\n                <%- T_("Languages") %>\n                <span class="fl-icon-checkmark form-valid-icon"></span>\n                <span class="fl-icon-close form-invalid-icon"></span>\n            </label>\n            <div class="ProjectFilters-item">\n                <select multiple="multiple" class="select2 search-panel-control" id="languages-select" placeholder="<%- T_("Languages") %>"></select>\n                <div class="form-error"></div>\n            </div>\n        </form>\n    </div>\n\n    <% if (typeof useLocalJobsLayout !== \'undefined\' && useLocalJobsLayout === true) { %>\n    <div class="ProjectFilters-section">\n    <% } else { %>\n    <div class="ProjectFilters-section filter-to-hide hide">\n    <% } %>\n        <form class="fl-form ProjectFilters-row">\n            <label class="ProjectFilters-rowLabel">\n                <%- T_("Location") %>\n                <span class="fl-icon-checkmark form-valid-icon"></span>\n                <span class="fl-icon-close form-invalid-icon"></span>\n            </label>\n            <div class="ProjectFilters-item">\n                <div class="input-btn-combo" action="">\n                    <input type="text" class="default-input location-query" id="user-location-input"\n                           placeholder="<%- T_("Type to filter project by location")%>">\n                    <a id="btn-set-location" class="ProjectFilters-locationButton btn" type=\'button\'>\n                        <%= loadSvg(\'flicon-pin\') %>\n                    </a>\n                </div>\n            </div>\n        </form>\n    </div>\n\n    <div class="ProjectFilters-section">\n        <div class="ProjectFilters-row">\n             <div class="ProjectFilters-primaryControls">\n            <% if (typeof useLocalJobsLayout === \'undefined\' || !useLocalJobsLayout) { %>\n                <button class="ProjectFilters-optionsToggle btn" id="toggle-filter-btn" data-option-hidden="true">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="flicon-settings-alt">\n                      <path fill="#4a5362" d="M3 3h1v17H3V3z"/>\n                      <path fill="#4a5362" d="M2 5h3v3H2V5zM9 3h1v17H9V3z"/>\n                      <path fill="#4a5362" d="M8 11h3v3H8v-3zM15 3h1v17h-1V3z"/>\n                      <path fill="#4a5362" d="M14 9h3v3h-3V9zM21 3h1v17h-1V3z"/>\n                      <path fill="#4a5362" d="M20 9h3v3h-3V9z"/>\n                    </svg>\n                    <span class="option-less hide">\n                    <%- T_("Less Options") %>\n                    </span>\n                    <span class="option-more">\n                    <%- T_("More Options") %>\n                    </span>\n                </button>\n                <button id="clear-btn" class="ProjectFilters-clearButton btn"><%- T_("Clear Filters") %></button>\n            <% } %>\n            </div>\n\n            <div class="ProjectFilters-secondaryControls">\n                <div class="ProjectFilters-quantity">\n                    <label for="filter-length" class="ProjectFilters-quantityLabel"><%- T_("Results per page") %></label>\n                    <select name="filter-length" id="quantity-selector"\n                            class="ProjectFilters-quantitySelector default-select" data-id="filter-length">\n                        <option selected>20</option>\n                        <option>50</option>\n                        <option>100</option>\n                    </select>\n                </div>\n                <% if (typeof useLocalJobsLayout === \'undefined\' || !useLocalJobsLayout) { %>\n                <div id="browse-projects-pagination"\n                     class="ProjectFilters-pagination dataTables_paginate paging_full_numbers browse-projects-pagination">\n                </div>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\'project-map-canvas\' class="project-map-canvas">\n</div>\n'}),define('text!templates/projectbrowse/searchPanelSelect2OptionTemplate.htm',[],function(){return'<%\n_.each(array, function(element) {\n    element.value = element[valueTextPlaceHolder];\n    element.name  = element[nameTextPlaceHolder];\n%>\n<option <% if (typeof canDisable != \'undefined\' && element.disabled) { %> " disabled <% } %> value="<%- element.value %>"><%- element.name %></option>\n<% });%>\n'}),define('text!templates/projectbrowse/skillsTemplate.htm',[],function(){return'<%if (typeof myskills != \'undefined\' && myskills != false) { %>\n    <optgroup label="<%- T_("My Skills") %>">\n    <%_.each(myskills, function(element) {%>\n        <option value="<%- element.id %>"><%- element.name %></option>\n    <% });%>\n    </optgroup>\n<% } %>\n<%if (typeof myskills != \'undefined\' && myskills != false) { %>\n<optgroup label="<%- T_("More Skills") %>">\n<% } %>\n<%_.each(others, function(element) {%>\n    <option value="<%- element.id %>"><%- element.name %></option>\n<% });%>\n<%if (typeof myskills != \'undefined\' && myskills != false) { %>\n</optgroup>\n<% } %>\n'}),define('text!templates/projectbrowse/project-infowindow.htm',[],function(){return'<div class="popover top pin-popover--project">\n    <div class="popover-content">\n        <span class="popover--project-title"><%- templateData.name %></span>\n        <span class="popover--project-location"><%- templateData.address %></span>\n        <% if(templateData.hourly) { %>\n        <span class="popover--project-value">$<%- Math.round(templateData.budget.minbudget_usd) %> -\n         $<%- Math.round(templateData.budget.maxbudget_usd) %> / hr</span>\n        <% } else { %>\n        <span class="popover--project-value">$<%- Math.round(templateData.budget.minbudget_usd) %> -\n         $<%- Math.round(templateData.budget.maxbudget_usd) %></span>\n        <% } %>\n        <span class="popover--project-link">\n            <a href="<%= templateData.seo_url %>"><%- T_("See project details") %></a>\n        </span>\n    </div>\n</div>\n'}),define('text!templates/projectbrowse/alerts/reviewWarningAlert.htm',[],function(){return'<div id="alert-202" class="alert alert-block">\n    <strong><%- T_("Warning!") %></strong> <%- T_("Projects to create fraudulent or fake reviews are in violation of our Terms and Conditions. Posting such projects may result in your account being suspended or terminated.") %>\n</div>\n'}),define('project/browse/model/search-options',['jquery-wrapper','underscore-wrapper','backbone-wrapper','table/browse-projects'],function(a,b,c,d){var e=c.Model.extend({defaults:{keyword:'',featured:!1,fulltime:!1,nda:!1,qualified:!1,sealed:!1,urgent:!1,guaranteed:!1,highlight:!1,'private':!1,top:!1,type:'all',budget_min:!1,budget_max:!1,contest_budget_min:!1,contest_budget_max:!1,hourlyrate_min:!1,hourlyrate_max:!1,skills_chosen:!1,verified_employer:!1,bidding_ends:'N/A',bookmarked:!1,type:!1,countries:!1,languages:!1,hourlyProjectDuration:!1,advancedFilterPanelView:null,disablePushState:!1,pushStateRoot:!1,lat:!1,lon:!1,local:!1,location:!1},initialize:function(a){this.constructor.__super__.initialize.call(this,a),this.attributes.pushStateRoot=pushStateRoot,this.bind('change',this.update)},disablePushState:function(){this.attributes.disablePushState=!0},reset:function(){this.clear().set(this.defaults)},searchProject:function(){redrawProject_table(!0);var a=this;clearTimeout(window.t),window.t=setTimeout(function(){a.advancedFilterPanelView.qtsPushForSearch()},2e3)},setSearchSource:function(a){this.advancedFilterPanelView&&(this.advancedFilterPanelView.searchSource=a)},setAdvancedFilterPanelView:function(a){this.advancedFilterPanelView=a},searchProjectWithTimeOutOn:function(){var a=this;this.advancedFilterPanelView&&this.advancedFilterPanelView.prepareSearch(),clearTimeout(window.t),window.t=setTimeout(function(){a.searchProject()},700)},update:function(){this.pushState();if(typeof localJobs=='object'&&this.attributes.lat===!1&&this.attributes.lon===!1){if(typeof this.attributes.local=='boolean')localJobs.localFilterOff=this.attributes.local===!1;else{var a=JSON.parse(this.attributes.local);localJobs.localFilterOff=a.localFilterOff}this.attributes.local=JSON.stringify(localJobs)}else localJobs===!0&&(this.attributes.inLocalJobsPage=!0);this.searchProjectWithTimeOutOn(),this.advancedFilterPanelView&&(this.advancedFilterPanelView.saveToCookie(),this.advancedFilterPanelView.updateTitle())},updateMin:function(){this.pushState(),this.searchProject(),window.browseProjectLib=d},pushState:function(){this.attributes.disablePushState==0&&typeof history.pushState=='function'&&history.pushState('','',this.generatePushStateURL(pushStateRoot))},generatePushStateURL:function(a){var b='',c='',d='',e=this.attributes;e.type=='h'?d='hourly':e.type=='f'?d='fixed':e.type=='c'?d='contest':e.type=='p'?d='fixed-hourly':e.type=='fc'?d='fixed-contest':e.type=='hc'&&(d='hourly-contest');var f=[];if(e.skills_chosen&&e.skills_chosen!=''){f=e.skills_chosen.split(',');if(f)if(f.length==1)b='/'+mapped_jobs['s'+f[0]].seo_url;else{b='/s-';for(var g in f)b+=mapped_jobs['s'+f[g]].seo_url+'-';b=b.slice(0,-1)}}d&&d!==''&&(b?b+='-j-'+d:b='/j-'+d);var h='';if(e.featured||e.fulltime||e.sealed||e.private||e.qualified||e.nda||e.highlight||e.guaranteed||e.guaranteed||e.urgent||e.top||e.local)h='t',e.featured&&(h+='-featured'),e.fulltime&&(h+='-fulltime'),e.sealed&&(h+='-sealed'),e.private&&(h+='-private'),e.qualified&&(h+='-qualified'),e.nda&&(h+='-nda'),e.highlight&&(h+='-highlight'),e.guaranteed&&(h+='-guaranteed'),e.urgent&&(h+='-urgent'),e.top&&(h+='-top'),e.local&&(h+='-local');e.location&&(e.lat=e.location.lat,e.lon=e.location.lon),b==''&&h!=''?b='/'+h:h!=''&&f.length!=1?b+='-'+h:(d!=''||h!='')&&f.length==1&&(b='/s-'+b.substr(1)+(h!=''?'-'+h:''));var i='';if(e.countries&&e.countries!=''){var j=e.countries.split(',');if(j){i='c-';for(var g in j)i+=j[g].replace(/[^\w+]/,'_');i=i.slice(0,-1)}}var k='';if(e.languages&&e.languages!=''){var l=e.languages.split(',');if(l){k='l-';for(var g in l)k+=l[g]+'-';k=k.slice(0,-1)}}j&&j.length>0?(c=i,e.languages&&(c+='-'+k)):l&&l.length>0&&(c=k),b==''&&c!=''&&(b='/regions');var m=a+b;return a==='/jobs'&&c?m+='/?cl='+c:c?m+='/'+c+'/':m+='/',window.localJobs===!0&&(m=window.location.pathname),m+=window.location.hash,m},convertToArray:function(){var a=this.attributes,b=a.type;if(b==='h'||b==='f'||b==='p')a.contest_budget_min=!1,a.contest_budget_max=!1;if(b==='h'||b==='c'||b==='hc')a.budget_min=!1,a.budget_max=!1;if(b==='f'||b==='c'||b==='fc')a.hourlyProjectDuration=!1,a.hourlyrate_max=!1,a.hourlyrate_min=!1;var c=[];for(var d in a)c.push({name:d,value:a[d]});return typeof window.user_language!='undefined'&&c.push({name:'ul',value:window.user_language}),typeof window.user_currency!='undefined'&&c.push({name:'uc',value:window.user_currency}),c},updateListingType:function(b){var d=new c.Model(window.searchOptions.toJSON()),e=d.attributes;e.featured=!1,e.fulltime=!1,e.urgent=!1,e.qualified=!1,e.sealed=!1,e.private=!1,e.guaranteed=!1,e.highlight=!1,e.nda=!1,e.top=!1,e.local=!1,a.each(b,function(a,b){var b=b.toLowerCase();b=='featured'&&(e.featured=!0),b=='fulltime'&&(e.fulltime=!0),b=='urgent'&&(e.urgent=!0),b=='qualified'&&(e.qualified=!0),b=='sealed'&&(e.sealed=!0),b=='private'&&(e.private=!0),b=='guaranteed'&&(e.guaranteed=!0),b=='highlight'&&(e.highlight=!0),b=='nda'&&(e.nda=!0),b=='top'&&(e.top=!0),b=='local'&&(e.local=!0)}),e.featured||this.removeTag('featured'),e.fulltime||this.removeTag('fulltime'),e.urgent||this.removeTag('urgent'),e.qualified||this.removeTag('qualified'),e.sealed||this.removeTag('sealed'),e.private||this.removeTag('private'),e.guaranteed||this.removeTag('guaranteed'),e.highlight||this.removeTag('highlight'),e.nda||this.removeTag('nda'),e.top||this.removeTag('top'),e.local||this.removeTag('local'),this.setSearchSource('listing type filter'),window.searchOptions.set(d.toJSON())},removeTag:function(b){a('.tag.listingType').each(function(){var a=jQuery(this).data('value');a==b&&jQuery(this).closest('li').remove()}),this.setSearchSource('listing type filter')},updateSkills:function(a){window.searchOptions.set({skills_chosen:a.join()}),this.setSearchSource('skills filter')},updateCountries:function(a){window.searchOptions.set({countries:a.join()}),this.setSearchSource('country filter')},updateLanguages:function(a){window.searchOptions.set({languages:a.join()}),this.setSearchSource('languages filter')},updateDurations:function(a){window.searchOptions.set({hourlyProjectDuration:a}),this.setSearchSource('duration filter')}});return e}),define('qtsbinds',['jquery-wrapper'],function(a){window.qtsv={timeout:!1,defaults:{},page:{},nav:{}},window.qtsv.defaults={pageContainer:'.gaf-container:first',navContainer:'.header-and-nav'};var b=function(a,b){if(typeof b=='boolean'&&b)for(var c in a)window.qtsv.nav[c]=a[c];else for(var c in a)window.qtsv.page[c]=a[c];window.qtsv.timeout=!1},c=function(a,b,c){var d=window.qtsv;if(!d.timeout){var e=typeof c=='undefined'?JSON.parse(JSON.stringify(d.page)):JSON.parse(JSON.stringify(d.nav));if(typeof a=='object')for(var f in a)f!='eventName'&&(e[f]=a[f]);else typeof a=='string'&&(e.label=a);typeof a.eventName!='undefined'?_t.push([a.eventName,e]):_t.push(['user_action',e]),setTimeout(function(){typeof b=='string'&&(window.location=b)},1e3),setTimeout(function(){d.timeout=!1},100),d.timeout=!0}},d=function(b,c,d){var e=window.qtsv;c=c||{};var f=e.defaults.pageContainer,g='[data-qts]';typeof b=='string'?g=b:typeof b=='object'&&(g=b.id,a(g).attr('data-qtcon',b.con),a(g).attr('data-qt0',b.falsy),a(g).attr('data-qt1',b.truthy)),typeof d=='string'?f=d:typeof d=='boolean'&&d==1&&(f=e.defaults.navContainer),a(f).on('click',g,function(b){b.preventDefault();var f=typeof d=='undefined'?JSON.parse(JSON.stringify(e.page)):JSON.parse(JSON.stringify(e.nav)),g=a(b.currentTarget),h=!1;typeof g.attr('href')!='undefined'&&(h=!0);if(!window.qtsv.timeout){for(var i in c)i!='eventName'&&(f[i]=c[i]);var j=g.data('qts');typeof g.data('qts')!='undefined'&&(f.label=g.data('qts'),typeof f.label!='undefined'?f.label=g.data('qts'):c.label=='undefined'&&(f.label=g.data('qts')));var k=typeof g.data('qtcon')!='undefined'?!0:!1;k&&(g.data('qtcon')==0?(f.label=g.data('qt1'),g.data('qtcon',!0)):(f.label=g.data('qt0'),g.data('qtcon',!1))),typeof f.action=='undefined'&&(f.action='click'),typeof j!=''&&(typeof c.eventName!='undefined'?_t.push([c.eventName,f]):_lt.push(['user_action',f])),window.qtsv.timer=setTimeout(function(){window.qtsv.timeout=!1,h&&(window.location=g.attr('href'))},1e3),window.qtsv.timeout=!0,window.qtsv.timerRun=0,window.qtsv.timer}})};return window.qtsv.push=c,{init:b,bind:d,push:c}}),define('project/browse/view/advanced-filter-panel-view',['jquery-wrapper','underscore-wrapper','backbone-wrapper','table/browse-projects','select2-v3.3','lib/jquery/jquery.cookie','qtsbinds','geocoding/module-geocoding','geocoding/module-gmap','text!templates/projectbrowse/searchPanelTemplate.htm','text!templates/projectbrowse/searchPanelSelect2OptionTemplate.htm','text!templates/projectbrowse/skillsTemplate.htm','text!templates/projectbrowse/searchPaginationTemplate.htm','text!templates/projectbrowse/project-infowindow.htm','text!templates/projectbrowse/alerts/reviewWarningAlert.htm'],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=window.useLocalJobsLayout,q=c.View.extend({el:'#advanced-search-wrapper',compileTemplate:b.template(j),compileOptionTemplate:b.template(k),compilePaginationTemplate:b.template(m),compileSkillsTemplate:b.template(l),compileInfowindoTemplate:b.template(n),hourly:!0,fixed:!0,contest:!0,budget_min:30,budget_max:5e3,contest_budget_min:10,contest_budget_max:5e3,hourlyrate_min:2,hourlyrate_max:100,step:10,hourlyStep:2,COOKIE_BASE:'BROWSE_PROJECT_LISTING_',other_skills:null,sort:'start-down',searchSource:'page load',LANGUAGE_FILTER_COOKIE:'USER_LANGUAGE_SEARCH_FILTER',LANGUAGE_FILTER_EXPIRY:30,$durationControl:!1,$paginationControl:!1,$languagesControl:!1,$skillsControl:!1,$listingTypeControl:!1,$fixedControl:!1,$hourlyControl:!1,$contestControl:!1,$hourlyRateControl:!1,$hourlyDurationControl:!1,$budgetControl:!1,$contestBudgetControl:!1,alertArray:{202:o},events:{'change #Fixed':'toggleFixedProjectFilter','change #Hourly':'toggleHourlyProjectFilter','change #Contests':'toggleContestsFilter','click  #search-btn':'search','click  .filter-display':'updateItemsInTable','change #quantity-selector':'updateItemsInTable','click #browse-projects-pagination a.paginate_button':'navigate','keypress .search-query':'searchFromKeyword','keypress .location-query':'searchFromLocation','click #clear-btn':'clearFilters','click #toggle-filter-btn':'toggleFilters','click .btn.icon-search-new':'searchFromButton','click #basic-search-btn':'searchFromButton','click .project-table-length ul.dropdown-menu a':'trackTableLengthChange'},updateBudget:function(){window.searchOptions.set({budget_min:this.$budgetControl.slider('values',0),budget_max:this.$budgetControl.slider('values',1),contest_budget_min:this.$contestBudgetControl.slider('values',0),contest_budget_max:this.$contestBudgetControl.slider('values',1)})},updateProjectType:function(a,b){if(typeof a=='undefined'||typeof b=='undefined')return;var c;switch(a){case'fixed':this.fixed=b,c=this.$fixedControl;break;case'hourly':this.hourly=b,c=this.$hourlyControl;break;case'contest':this.contest=b,c=this.$contestControl}typeof c!='undefined'&&c&&(b==1?c.attr('checked','checked'):c.attr('checked',!1))},updateListingType:function(b,c){if(typeof b=='undefined'||typeof c=='undefined')return;var d=this.$listingTypeControl.select2('val'),e=a.inArray(b,d);e>=0&&c==0?d.splice(e,1):e<0&&c==1&&d.push(b),this.$listingTypeControl.select2('val',d)},resetSliderFilterView:function(a){if(typeof a=='undefined')return;var b;switch(a){case'hourlyRate':b=this.$hourlyRateControl;break;case'contestBudget':b=this.$contestBudgetControl;break;case'budget':b=this.$budgetControl}if(typeof b!='undefined'&&b){var c=b.slider('option','min'),d=b.slider('option','max');b.slider({values:[c,d]});var e=b.data('currency');b.next().val(e+c+' - '+e+d)}},reRenderSelect2FilterView:function(a,b){if(typeof a=='undefined'||typeof b=='undefined')return;var c;switch(a){case'skills_chosen':c=this.$skillsControl;break;case'languages':c=this.$languagesControl;break;case'hourlyProjectDuration':c=this.$durationControl}typeof c!='undefined'&&c&&c.select2('val',b)},clearFilters:function(b){return b.preventDefault(),this.$fixedControl.prop('checked',!0),this.$hourlyControl.prop('checked',!0),this.$contestControl.prop('checked',!0),this.$skillsControl.select2('data',null),this.$durationControl.select2('val','false'),this.$languagesControl.select2('data',null),this.$listingTypeControl.select2('data',null),this.resetSliderFilterView('budget'),this.resetSliderFilterView('contestBudget'),this.resetSliderFilterView('hourlyRate'),a(this.el).find('.search-query').val(''),a(this.el).find('.location-query').val(''),this.hourly=!0,this.contest=!0,this.contest=!0,this.setProjectType(),this.renderListingType(),a.removeCookie('keyword',{path:pushStateRoot}),a.removeCookie('duration',{path:pushStateRoot}),a.removeCookie('budget_min',{path:pushStateRoot}),a.removeCookie('budget_max',{path:pushStateRoot}),a.removeCookie('contest_budget_min',{path:pushStateRoot}),a.removeCookie('contest_budget_max',{path:pushStateRoot}),a.removeCookie('hourlyrate_min',{path:pushStateRoot}),a.removeCookie('hourlyrate_max',{path:pushStateRoot}),a.removeCookie('budget_min_locale',{path:pushStateRoot}),a.removeCookie('budget_max_locale',{path:pushStateRoot}),a.removeCookie('contest_budget_min_locale',{path:pushStateRoot}),a.removeCookie('contest_budget_max_locale',{path:pushStateRoot}),a.removeCookie('hourlyrate_min_locale',{path:pushStateRoot}),a.removeCookie('hourlyrate_max_locale',{path:pushStateRoot}),a.removeCookie('currencycode',{path:pushStateRoot}),a.removeCookie(this.LANGUAGE_FILTER_COOKIE,{path:'/'}),window.searchOptions.reset(),window.searchOptions.update(),g.push({label:'ClearFilter'}),!1},toggleFilters:function(b){a('#toggle-filter-btn').data('option-hidden')?(a('.filter-to-hide').show(),a('#toggle-filter-btn .option-less').show(),a('#toggle-filter-btn .option-more').hide(),a('#toggle-filter-btn').data('option-hidden',!1)):(a('.filter-to-hide').hide(),a('#toggle-filter-btn .option-less').hide(),a('#toggle-filter-btn .option-more').show(),a('#toggle-filter-btn').data('option-hidden',!0))},updateTitle:function(){try{if(pushStateRoot=='/jobs'){var c='',d=this.$skillsControl.select2('data');for(var e=b.size(d)-1;e>=0;e--)c+=d[e].text+' ';a('title').text(c+'Jobs and Contests || Freelancer.com')}}catch(f){}},getBudgetRange:function(){if(this.hasSliderMaxed(this.$budgetControl)&&this.hasSliderMined(this.$budgetControl))return'';var b=a(this.el).find('#budget').data('max'),c=a(this.el).find('#budget').slider('values',1);return b==c?a(this.el).find('input#budget-range-text').val()+'+':a(this.el).find('input#budget-range-text').val()},getContestBudgetRange:function(){if(this.hasSliderMaxed(this.$contestBudgetControl)&&this.hasSliderMined(this.$contestBudgetControl))return'';var b=a(this.el).find('#contest-budget').data('max'),c=a(this.el).find('#contest-budget').slider('values',1);return b===c?a(this.el).find('input#contest-budget-text').val()+'+':a(this.el).find('input#contest-budget-text').val()},getHourlyRateRange:function(){if(this.hasSliderMaxed(this.$hourlyRateControl)&&this.hasSliderMined(this.$hourlyRateControl))return'';var b=a(this.el).find('div#hourly-rate').data('max'),c=a(this.el).find('#hourly-rate').slider('values',1);return b==c?a(this.el).find('input#hourly-rate-text').val()+'+':a(this.el).find('input#hourly-rate-text').val()},getDuration:function(){var b=a(this.el).find('#duration-select').select2('data');return b.id=='false'?'':a(this.el).find('#duration-select').select2('data')},getLanguages:function(){return a(this.el).find('#languages-select').select2('data')},getListingTypes:function(){return a(this.el).find('#listing-type').select2('data')},getSkills:function(){return a(this.el).find('#skills-select').select2('data')},trackTableLengthChange:function(){this.searchSource='project table length';var a=this;window.t=setTimeout(function(){a.qtsPushForSearch()},500)},navigate:function(b){var c=a(b.currentTarget);if(c.hasClass('number')){var d=c.text(),e=a('#pagination_bottom_'+d);e.click()}else c.hasClass('first')?a('.table_paginate.first a').click():c.hasClass('previous')?a('.table_paginate.previous a').click():c.hasClass('next')?a('.table_paginate.next a').click():c.hasClass('last')&&a('.table_paginate.last a').click();a(this.el).find('.number.paginate_button').removeClass('paginate_active');var f=a('.paginate_button.active a').text();return a(this.el).find('#pagination_top_'+f).addClass('paginate_active'),b.preventDefault(),!1},updateItemsInTable:function(b){var c;if(a('#quantity-selector').length>0)c=a('#quantity-selector').val();else{c=a(b.currentTarget).find('span.text').text();if(!c||c==='')c=a(b.currentTarget).text()}var d=jq(project_table).dataTable();d.fnSettings()._iDisplayLength=parseInt(c),d.fnDraw(),a(this.el).find('.filter-option').text(c),g.push({label:'ShowFilter',action:'filter',filter_value:c})},hasSliderMaxed:function(a){var b=a.data('max'),c=a.slider('values',1);return b==c?!0:!1},hasSliderMined:function(a){var b=a.data('min'),c=a.slider('values',0);return b==c?!0:!1},isSliderDisabled:function(a){return a.slider('option','disabled')},prepareSearch:function(){this.toggleBudgetHRAndDuration();var b=a(this.el).find('div#budget'),c=a(this.el).find('div#hourly-rate'),d=a(this.el).find('div#contest-budget'),e=this.hasSliderMaxed(b),f=this.hasSliderMined(b),g=this.isSliderDisabled(b),h=this.hasSliderMaxed(d),i=this.hasSliderMined(d),j=this.isSliderDisabled(d),k=this.hasSliderMaxed(c),l=this.hasSliderMined(c),m=this.isSliderDisabled(c),n=window.searchOptions.attributes,o;f||g?n.budget_min=!1:(o=Math.easeIn(b.slider('values',0),b.data('min'),b.data('max')),n.budget_min=Math.floor(o*exchangeRate)),i||j?n.contest_budget_min=!1:(o=Math.easeIn(d.slider('values',0),d.data('min'),d.data('max')),n.contest_budget_min=Math.floor(o*exchangeRate)),l||m?n.hourlyrate_min=!1:(o=Math.easeIn(c.slider('values',0),c.data('min'),c.data('max')),n.hourlyrate_min=Math.floor(o*exchangeRate)),e||g?n.budget_max=!1:(o=Math.easeIn(b.slider('values',1),b.data('min'),b.data('max')),n.budget_max=Math.ceil(o*exchangeRate)),h||j?n.contest_budget_max=!1:(o=Math.easeIn(d.slider('values',1),d.data('min'),d.data('max')),n.contest_budget_max=Math.ceil(o*exchangeRate)),k||m?n.hourlyrate_max=!1:(o=Math.easeIn(c.slider('values',1),c.data('min'),c.data('max')),n.hourlyrate_max=Math.ceil(o*exchangeRate)),n.keyword=a('.search-query').val()},search:function(a){this.prepareSearch(),this.saveToCookie(),a.preventDefault(),window.searchOptions.update()},searchFromKeyword:function(b){if(b.which==13){b.preventDefault();var c=a(b.currentTarget).val();window.searchOptions.set({keyword:c}),window.searchOptions.update(),this.searchSource='keyword',this.saveToCookie()}},searchFromLocation:function(a){a.which===13&&a.preventDefault()},qtsPushForSearch:function(b){this.prepareSearch();var c,d=window.searchOptions.attributes,e=JSON.parse(JSON.stringify(d));pushStateRoot.match(/^\/work.*/)?c='Work Search':pushStateRoot.match(/^\/jobs.*/)&&(c='Jobs Page Search');if(c){var f=a('#project_table').dataTable(),h=a('#project_table tr.project-details').length,i=f.fnSettings().fnRecordsTotal(),j=a('#browse-projects-pagination a.paginate_active').text()?a('#browse-projects-pagination a.paginate_active').text():1,k=e.keyword;delete e.keyword,_lt.push({event:c,source:this.searchSource,keyword:k,filters:JSON.stringify(e),items_displayed:h,items_count:i,items_page:j,sort:this.sort})}setTimeout(function(){g.push({label:'ProjectSearch',action:'filter'})},100)},searchFromButton:function(b){b.preventDefault();var c=a(b.currentTarget).prev().val();window.searchOptions.set({keyword:c}),window.searchOptions.update(),this.searchSource='search button',this.saveToCookie()},saveToCookie:function(){var b=window.searchOptions.attributes;a.cookie(this.COOKIE_BASE+'keyword',b.keyword,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'duration',b.hourlyProjectDuration,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'budget_min',b.budget_min,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'budget_max',b.budget_max,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'hourlyrate_min',b.hourlyrate_min,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'hourlyrate_max',b.hourlyrate_max,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'budget_min_locale',Math.easeIn(this.$budgetControl.slider('values',0),this.$budgetControl.data('min'),this.$budgetControl.data('max')),{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'budget_max_locale',Math.easeIn(this.$budgetControl.slider('values',1),this.$budgetControl.data('min'),this.$budgetControl.data('max')),{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'hourlyrate_min_locale',Math.easeIn(this.$hourlyRateControl.slider('values',0),this.$hourlyRateControl.data('min'),this.$hourlyRateControl.data('max')),{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'hourlyrate_max_locale',Math.easeIn(this.$hourlyRateControl.slider('values',1),this.$hourlyRateControl.data('min'),this.$hourlyRateControl.data('max')),{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'currencycode',currencyCodeSign.code,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'contest_budget_min',b.contest_budget_min,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'contest_budget_max',b.contest_budget_max,{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'contest_budget_min_locale',Math.easeIn(this.$contestBudgetControl.slider('values',0),this.$contestBudgetControl.data('min'),this.$contestBudgetControl.data('max')),{expires:1,path:pushStateRoot}),a.cookie(this.COOKIE_BASE+'contest_budget_max_locale',Math.easeIn(this.$contestBudgetControl.slider('values',1),this.$contestBudgetControl.data('min'),this.$contestBudgetControl.data('max')),{expires:1,path:pushStateRoot})},toggleFixedProjectFilter:function(b){return a(b.currentTarget).is(':checked')?this.fixed=!0:this.fixed=!1,this.setProjectType(),this.searchSource='fixed project filter',!1},toggleContestsFilter:function(b){return a(b.currentTarget).is(':checked')?this.contest=!0:this.contest=!1,this.setProjectType(),this.searchSource='contests filter',!1},toggleHourlyProjectFilter:function(b){return a(b.currentTarget).is(':checked')?this.hourly=!0:this.hourly=!1,this.setProjectType(),this.searchSource='hourly filter',!1},refreshControl:function(){this.renderListingType(),this.toggleBudgetHRAndDuration()},setProjectType:function(){this.hourly?this.fixed?this.contest?window.searchOptions.set({type:!1}):window.searchOptions.set({type:'p'}):this.contest?window.searchOptions.set({type:'hc'}):window.searchOptions.set({type:'h'}):this.fixed?this.contest?window.searchOptions.set({type:'fc'}):window.searchOptions.set({type:'f'}):this.contest?window.searchOptions.set({type:'c'}):window.searchOptions.set({type:!1}),this.refreshControl()},prepareListingType:function(a){var b={0:{disabled:!1,name:T_('Featured'),value:'featured'},1:{disabled:!1,name:T_('Sealed'),value:'sealed'},2:{disabled:a=='project'||a=='all'?!1:!0,name:T_('Fulltime'),value:'fulltime'},3:{disabled:!1,name:T_('Urgent'),value:'urgent'},4:{disabled:a=='project'||a=='all'?!1:!0,name:T_('Qualified'),value:'qualified'},5:{disabled:!1,name:T_('NDA'),value:'nda'},6:{disabled:a=='contest'||a=='all'?!1:!0,name:T_('Guaranteed'),value:'guaranteed'},7:{disabled:a=='contest'||a=='all'?!1:!0,name:T_('Highlight'),value:'highlight'},8:{disabled:a==='contest'||a==='all'?!1:!0,name:T_('Top Contest'),value:'top'},9:{disabled:a==='project'||a==='all'?!1:!0,name:T_('Local Jobs'),value:'local'}};return b},toggleBudgetHRAndDuration:function(){var a=window.searchOptions.get('type'),b=window.searchOptions.attributes;b.hourlyProjectDuration=this.$hourlyDurationControl.select2('val');switch(a){case'h':this.sliderUpdate('disable','disable','enable','enable');break;case'f':this.sliderUpdate('enable','disable','disable','disable'),b.hourlyProjectDuration=!1;break;case'c':this.sliderUpdate('disable','enable','disable','disable'),b.hourlyProjectDuration=!1;break;case'p':this.sliderUpdate('enable','disable','enable','enable');break;case'fc':this.sliderUpdate('enable','enable','disable','disable'),b.hourlyProjectDuration=!1;break;case'hc':this.sliderUpdate('disable','enable','enable','enable');break;default:this.sliderUpdate('enable','enable','enable','enable')}},sliderUpdate:function(a,b,c,d){this.$budgetControl.slider(a),this.$hourlyDurationControl.select2(c,c),this.$hourlyRateControl.slider(d),b&&this.$contestBudgetControl.slider(b)},renderListingType:function(){var b=window.searchOptions.get('type'),c=null;this.$listingTypeControl=a(this.el).find('#listing-type');var d=this.$listingTypeControl.select2('data');this.$listingTypeControl.select2(),b=='c'?c=this.prepareListingType('contest'):b=='p'||b=='f'||b=='h'?c=this.prepareListingType('project'):c=this.prepareListingType('all'),this.$listingTypeControl.html(this.compileOptionTemplate({array:c,valueTextPlaceHolder:'value',nameTextPlaceHolder:'name',canDisable:!0}));var e=this.$listingTypeControl.select2('data',d),f=this.$listingTypeControl.select2('val');this.$listingTypeControl.select2('val',f),window.searchOptions.updateListingType(f),this.$listingTypeControl.select2().off().on('change',function(a){window.searchOptions.updateListingType(a.val),typeof a.removed=='object'&&g.push({label:'RemoveListingFilter',action:'filter',filter_value:a.removed.text}),typeof a.added=='object'&&g.push({label:'AddListingFilter',action:'filter',filter_value:a.added.text})})},renderSkills:function(){this.$skillsControl=a(this.el).find('#skills-select'),this.$skillsControl.html(this.compileSkillsTemplate({myskills:seller_jobs,others:this.other_skills}));var c=this;this.$skillsControl.select2().on('change',function(d){window.searchOptions.updateSkills(d.val),a('#job-alert-section').html(''),b.each(d.val,function(d,e){typeof c.alertArray[d]!='undefined'&&a('#job-alert-section').append(b.template(c.alertArray[d]))}),typeof d.removed=='object'&&g.push({label:'RemoveSkillFilter',action:'filter',filter_value:d.removed.text}),typeof d.added=='object'&&g.push({label:'AddSkillFilter',action:'filter',filter_value:d.added.text})})},renderLanguages:function(){this.$languagesControl=a(this.el).find('#languages-select'),this.$languagesControl.html(this.compileOptionTemplate({array:languages,valueTextPlaceHolder:'code',nameTextPlaceHolder:'name'}));var b=this;this.$languagesControl.select2().on('change',function(c){window.searchOptions.updateLanguages(c.val),typeof c.removed=='object'&&g.push({label:'RemoveLanguageFilter',action:'filter',filter_value:c.removed.text}),typeof c.added=='object'&&g.push({label:'AddLanguageFilter',action:'filter',filter_value:c.added.text});var d=c.val.join();a.cookie(b.LANGUAGE_FILTER_COOKIE,d,{expires:b.LANGUAGE_FILTER_EXPIRY,path:'/'})})},renderDurations:function(){this.$durationControl=a(this.el).find('#duration-select'),this.$durationControl.select2({minimumResultsForSearch:-1}).on('change',function(a){window.searchOptions.updateDurations(a.val)}),this.$durationControl.select2().on('close',function(a){var b=isNaN(a.currentTarget.value)?0:parseInt(a.currentTarget.value),c=a.currentTarget[b].text;g.push({label:'DurationFilter',action:'filter',filter_value:c})})},bindLocation:function(){var b=a(this.el).find('.location'),c=window.searchOptions.attributes,d={};c.location={lat:!1,lon:!1},a('#project-map-canvas').bind('clear',function(){i.clearMarkers()});var e=this.compileInfowindoTemplate;a('#project-map-canvas').bind('add',function(a,b){var c={};b.sign=currencyCodeSign.sign;var d=e({templateData:b});c.lat=b.lat,c.lon=b.lon,c.title=b.name,c.icon='/static/css/images/ProjectPin48px.png',c.infowindowHTML=d,i.addMarker(c)});var f=function(a){c.location.lat=a.lat,c.location.lon=a.lng,window.searchOptions.update(),d.canvas='project-map-canvas',d.center={lat:a.lat,lon:a.lng},i.init(d),jq('#project-map-canvas').show();var b,e=jQuery('#listing-type');b=e.find('option[value="local"]')[0];if('undefined'!=typeof b){var f=e.val();f==null&&(f=[]),f.push('local'),e.select2('val',f),window.searchOptions.updateListingType(f)}};h.init({autoCompleteElement:'user-location-input',reverseGeocodingElement:'btn-set-location',autoCompleteCallback:f,reverseGeocodingSuccessCallback:f}),a('#user-location-input',b).focusout(function(b){if(a(this).val()!=='')return;c.location.lat=!1,c.location.lon=!1,window.searchOptions.update(),jq('#project-map-canvas').hide()}),a('#btn-change-location',b).click(function(a){a.preventDefault()})},loadPrefilledOptions:function(b){if(!b)return!1;var c=window.searchOptions.attributes;b.keyword&&(a(this.el).find('.basic-search .search-query').val(b.keyword),c.keyword=b.keyword),b.languages&&(this.$languagesControl.select2('val',b.languages),c.languages=b.languages.join()),b.skills_chosen&&(this.$skillsControl.select2('val',b.skills_chosen),c.skills_chosen=b.skills_chosen.join());var d=b.type,e=d==='c',f=d==='p'||d==='f'||d==='h',g=[];b.featured&&(g.push('featured'),c.featured=!0),b.fulltime&&!e&&(g.push('fulltime'),c.fulltime=!0),b.private&&(g.push('private'),c.private=!0),b.guaranteed&&!f&&(g.push('guaranteed'),c.guaranteed=!0),b.sealed&&(g.push('sealed'),c.sealed=!0),b.highlight&&!f&&(g.push('highlight'),c.highlight=!0),b.nda&&(g.push('nda'),c.nda=!0),b.urgent&&(g.push('urgent'),c.urgent=!0),b.qualified&&!e&&(g.push('qualified'),c.qualified=!0),b.top&&!f&&(g.push('top'),c.top=!0),b.local&&!e&&(g.push('local'),c.local=!0),d=='c'?(this.$fixedControl.attr('checked',!1),this.$hourlyControl.attr('checked',!1),this.fixed=!1,this.hourly=!1):d=='p'?(this.$contestControl.attr('checked',!1),this.contest=!1):d=='f'?(this.$hourlyControl.attr('checked',!1),this.$contestControl.attr('checked',!1),this.hourly=!1,this.contest=!1):d=='h'?(this.$contestControl.attr('checked',!1),this.$fixedControl.attr('checked',!1),this.contest=!1,this.fixed=!1):d=='hc'?(this.$fixedControl.attr('checked',!1),this.fixed=!1):d=='fc'&&(this.$hourlyControl.attr('checked',!1),this.hourly=!1),c.type=d,this.$listingTypeControl.select2('val',g),this.renderListingType(),this.toggleBudgetHRAndDuration(),a.cookie(this.COOKIE_BASE+'currencycode')==currencyCodeSign.code&&(c.hourlyrate_min=b.hourlyrate_min?b.hourlyrate_min:!1,c.hourlyrate_max=b.hourlyrate_max?b.hourlyrate_max:!1,c.budget_min=b.budget_min?b.budget_min:!1,c.budget_max=b.budget_max?b.budget_max:!1,c.contest_budget_min=b.contest_budget_min?b.contest_budget_min:!1,c.contest_budget_max=b.contest_budget_max?b.contest_budget_max:!1),this.$languagesControl.select2('val',b.languages)},initialize:function(){this.constructor.__super__.initialize.call(this),b.bindAll(this,'render'),seller_jobs?this.other_skills=b.reject(mapped_jobs,function(a){return b.indexOf(b.keys(seller_jobs),'s'+a.id)>=0}):this.other_skills=mapped_jobs},assignAdditionalControl:function(){this.$fixedControl=a(this.el).find('#Fixed'),this.$contestControl=a(this.el).find('#Contests'),this.$hourlyControl=a(this.el).find('#Hourly'),this.$hourlyRateControl=a(this.el).find('#hourly-rate'),this.$hourlyDurationControl=a(this.el).find('#duration-select'),this.$budgetControl=a(this.el).find('#budget'),this.$contestBudgetControl=a(this.el).find('#contest-budget')},setBudgetHourlyRateFromCookie:function(){var b=a.cookie(this.COOKIE_BASE+'budget_min_locale'),c=a.cookie(this.COOKIE_BASE+'budget_max_locale'),d=a.cookie(this.COOKIE_BASE+'contest_budget_min_locale'),e=a.cookie(this.COOKIE_BASE+'contest_budget_max_locale'),f=a.cookie(this.COOKIE_BASE+'hourlyrate_min_locale'),g=a.cookie(this.COOKIE_BASE+'hourlyrate_max_locale');b?(b=Math.max(b,this.budget_min),this.$budgetControl.slider('values',0,Math.easeOut(b,this.$budgetControl.data('min'),this.$budgetControl.data('max')))):b=this.$budgetControl.slider('values',0),c?this.$budgetControl.slider('values',1,Math.easeOut(c,this.$budgetControl.data('min'),this.$budgetControl.data('max'))):c=this.$budgetControl.slider('values',1),d?(d=Math.max(d,this.contest_budget_min),this.$contestBudgetControl.slider('values',0,Math.easeOut(d,this.$contestBudgetControl.data('min'),this.$contestBudgetControl.data('max')))):d=this.$contestBudgetControl.slider('values',0),e?this.$contestBudgetControl.slider('values',1,Math.easeOut(e,this.$contestBudgetControl.data('min'),this.$contestBudgetControl.data('max'))):e=this.$contestBudgetControl.slider('values',1),f?(f=Math.max(f,this.hourlyrate_min),this.$hourlyRateControl.slider('values',0,Math.easeOut(f,this.$hourlyRateControl.data('min'),this.$hourlyRateControl.data('max')))):f=this.$hourlyRateControl.slider('values',0),g?this.$hourlyRateControl.slider('values',1,Math.easeOut(g,this.$hourlyRateControl.data('min'),this.$hourlyRateControl.data('max'))):g=this.$hourlyRateControl.slider('values',1);var h=this.$budgetControl.data('currency');this.$budgetControl.next().val(h+b+' - '+h+c),this.$contestBudgetControl.next().val(h+d+' - '+h+e),this.$hourlyRateControl.next().val(h+f+' - '+h+g),this.$durationControl.select2('val',a.cookie(this.COOKIE_BASE+'duration')),a(this.el).find('.search-query').val(a.cookie(this.COOKIE_BASE+'keyword'))},setSort:function(a){this.sort=a},render:function(){var b=this.compileTemplate({useLocalJobsLayout:p});return a(this.el).html(b),window.localJobs===!0&&typeof window.userLocation=='object'&&a(this.el).find('#user-location-input').val(window.userLocation.address),exchangeRate!=='1'&&(this.budget_min=Math.floor(100*this.budget_min/exchangeRate/100),this.budget_max=Math.ceil(100*this.budget_max/exchangeRate/100),this.contest_budget_min=Math.floor(100*this.contest_budget_min/exchangeRate/100),this.contest_budget_max=Math.ceil(100*this.contest_budget_max/exchangeRate/100),this.hourlyrate_min=Math.floor(100*this.hourlyrate_min/exchangeRate/100),this.hourlyrate_max=Math.ceil(100*this.hourlyrate_max/exchangeRate/100),this.step=Math.ceil(this.step/exchangeRate),this.hourlyStep=Math.ceil(this.step/5)),a(this.el).find('#budget').attr('data-min',this.budget_min).attr('data-max',this.budget_max).attr('data-step',this.step).attr('data-currency',currencyCodeSign.sign),a(this.el).find('#contest-budget').attr('data-min',this.contest_budget_min).attr('data-max',this.contest_budget_max).attr('data-step',this.step).attr('data-currency',currencyCodeSign.sign),a(this.el).find('#hourly-rate').attr('data-min',this.hourlyrate_min).attr('data-max',this.hourlyrate_max).attr('data-step',this.hourlyStep).attr('data-currency',currencyCodeSign.sign),d.tableFilters.init(a('#advanced-search-wrapper')),this.renderListingType(),this.renderSkills(),this.renderDurations(),this.renderLanguages(),this.bindLocation(),this.assignAdditionalControl(),a.cookie(this.COOKIE_BASE+'currencycode')==currencyCodeSign.code&&this.setBudgetHourlyRateFromCookie(),this}});return q}),define('text!templates/local-jobs/updateLocationModal.htm',[],function(){return'<div class="lj-update-location-modal modal hide" id="lj-update-location-modal">\n    <div class="modal-header">\n        <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3><%- titleText %></h3>\n    </div>\n    <div class="modal-body">\n        <div class="alert alert-error message-error is-hidden">\n            <span><%- T_("Invalid location")%></span>\n        </div>\n        <div class="alert alert-success message-success is-hidden">\n            <span><%- successMessageText %></span>\n        </div>\n        <div>\n            <span><%- messageText %></span>\n        </div>\n        <br/>\n        <form id="update-location-modal-form">\n            <div class="input-append">\n                <input type="text" class="input-location input-xlarge" id="local-location-modal-input"\n                    placeholder="<%- placeholderText %>" autocomplete="off" style="width: 75%; padding:5px">\n                <a id="local-location-reverse-geocode-modal-btn" class="add-on" style="cursor:pointer;">\n                    <span class="icon-map-marker"></span>\n                </a>\n                <div class="help-inline small profile"></div>\n                <br>\n                <% if (hasEmailOption) { %>\n                    <input id="subscribeCheckBox" type="checkbox" class="input-location input-xlarge" checked>\n                    <%- checkBoxText %>\n                <% } %>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button type="button" id="lj-update-location-modal-save" class="btn btn-primary"><%- saveButtonText %></button>\n        <button type="button" id="lj-update-location-modal-close" class="btn is-hidden"><%- T_("Close") %></button>\n    </div>\n</div>\n'}),define('local-jobs/geocoding',['jquery-wrapper','underscore-wrapper','googlemaps!'],function(a,b,c){var d=function(){var b={config:{}},d;return b.init=function(e){b.config=e,d=new c.places.Autocomplete(document.getElementById(b.config.autoCompleteElement),{}),c.event.addListener(d,'place_changed',function(){typeof b.config.autoCompleteCallback=='function'&&b.config.autoCompleteCallback(b.getSelectedAddressGeoInfo())}),typeof b.config.reverseGeocodingElement!='undefined'&&a('#'+b.config.reverseGeocodingElement).off('click').on('click',function(a){a.preventDefault();if('geolocation'in navigator){var c={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};navigator.geolocation.getCurrentPosition(function(a){b.getReverseGeoInfo(a.coords.latitude,a.coords.longitude)},function(a){typeof b.config.reverseGeocodingErrorCallback=='function'&&b.config.reverseGeocodingErrorCallback('Failed to determine current location: '+a.toString())},c)}})},b.formatGeoInfo=function(a){var b={administrative_area_level_1:'',country:'',formatted_address:'',lat:'',lng:'',vicinity:''},c={administrative_area_level_1:'short_name',country:'long_name',locality:'long_name'};for(var d=0;d<a.address_components.length;d++){var e=a.address_components[d].types[0];c[e]&&(b[e]=a.address_components[d][c[e]])}return b.formatted_address=a.formatted_address,b.lat=a.geometry.location.lat(),b.lng=a.geometry.location.lng(),b.vicinity=a.vicinity||b.locality||b.administrative_area_level_1||b.country||'',b},b.getSelectedAddressGeoInfo=function(){var a=d.getPlace();return b.formatGeoInfo(a)},b.getReverseGeoInfo=function(d,e){var f=new c.Geocoder,g=new c.LatLng(d,e);f.geocode({latLng:g},function(d,e){if(e===c.GeocoderStatus.OK){var f=b.formatGeoInfo(d[0]);a('#'+b.config.autoCompleteElement).val(f.formatted_address),typeof b.config.reverseGeocodingSuccessCallback=='function'&&b.config.reverseGeocodingSuccessCallback(f)}else typeof b.config.reverseGeocodingErrorCallback=='function'&&b.config.reverseGeocodingErrorCallback(e)})},{init:b.init}};return{create:d}}),function(a){if(typeof a.validator=='function')return;a.extend(a.expr[':'],{blank:function(b){return!a.trim(''+b.value)},filled:function(b){return!!a.trim(''+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return arguments.length===1?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp('\\{'+a+'\\}','g'),c)}),b)},a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn('nothing selected, can\'t validate, returning nothing');return}var c=a.data(this[0],'validator');if(c)return c;this.attr('novalidate','novalidate'),c=new a.validator(b,this[0]),a.data(this[0],'validator',c);if(c.settings.onsubmit){var d=this.find('input, button');d.filter('.cancel').click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&d.filter(':submit').click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a('<input type=\'hidden\'/>').attr('name',c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})}return c},valid:function(){if(a(this[0]).is('form'))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,'validator').settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case'add':a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case'remove':if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}var i=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d);if(i.required){var j=i.required;delete i.required,i=a.extend({required:j},i)}return i}}),a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:'error',validClass:'valid',errorElement:'label',focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:':hidden',ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a,b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){b.type==='radio'?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:T_('This field is required.'),remote:T_('Please fix this field.'),email:T_('Please enter a valid email address.'),url:T_('Please enter a valid URL.'),date:T_('Please enter a valid date.'),dateISO:T_('Please enter a valid date (ISO).'),number:T_('Please enter a valid number.'),digits:T_('Please enter only digits.'),creditcard:T_('Please enter a valid credit card number.'),equalTo:T_('Please enter the same value again.'),accept:T_('Please enter a value with a valid extension.'),maxlength:a.validator.format(T_('Please enter no more than {0} characters.')),minlength:a.validator.format(T_('Please enter at least {0} characters.')),rangelength:a.validator.format(T_('Please enter a value between {0} and {1} characters long.')),range:a.validator.format(T_('Please enter a value between {0} and {1}.')),max:a.validator.format(T_('Please enter a value less than or equal to {0}.')),min:a.validator.format(T_('Please enter a value greater than or equal to {0}.'))},autoCreateRanges:!1,prototype:{init:function(){function d(b){var c=a.data(this[0].form,'validator'),d='on'+b.type.replace(/^validate/,'');c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var b=this.groups={};a.each(this.settings.groups,function(c,d){a.each(d.split(/\s/),function(a,d){b[d]=c})});var c=this.settings.rules;a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate('[type=\'text\'], [type=\'password\'], [type=\'file\'], select, textarea, [type=\'number\'], [type=\'search\'] ,[type=\'tel\'], [type=\'url\'], [type=\'email\'], [type=\'datetime\'], [type=\'date\'], [type=\'month\'], [type=\'week\'], [type=\'time\'], [type=\'datetime-local\'], [type=\'range\'], [type=\'color\'] ','focusin focusout keyup',d).validateDelegate('[type=\'radio\'], [type=\'checkbox\'], select, option','click',d),this.settings.invalidHandler&&a(this.currentForm).bind('invalid-form.validate',this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler('invalid-form',[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0;for(var c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(':visible').focus().trigger('focusin')}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(a){return a.element.name==b.name}).length==1&&b},elements:function(){var b=this,c={};return a(this.currentForm).find('input, select, textarea').not(':submit, :reset, :image, [disabled]').not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error('%o has no name assigned',this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+'.'+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var c=a(b).rules(),d=!1;for(var e in c){var f={method:e,parameters:c[e]};try{var g=a.validator.methods[e].call(this,b.value.replace(/\r/g,''),b,f.parameters);if(g=='dependency-mismatch'){d=!0;continue}d=!1;if(g=='pending'){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!g)return this.formatAndAdd(b,f),!1}catch(h){throw this.settings.debug&&window.console&&console.log('exception occurred when checking element '+b.id+', check the \''+f.method+'\' method',h),h}}if(d)return;return this.objectLength(c)&&this.successList.push(b),!0},customMetaMessage:function(b,c){if(!a.metadata)return;var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a];return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],'<strong>Incorrect '+b.name+'</strong>')},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;typeof c=='function'?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,'{$1}'),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(var a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr('generated')&&d.html(c)):(d=a('<'+this.settings.errorElement+'/>').attr({'for':this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||''),this.settings.wrapper&&(d=d.hide().show().wrap('<'+this.settings.wrapper+'/>').parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(''),typeof this.settings.success=='string'?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr('for')==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case'select':return a('option:selected',c).length;case'input':if(this.checkable(c))return this.findByName(c.name).filter(':checked').length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{'boolean':function(a,b){return a},string:function(b,c){return!!a(b,c.form).length},'function':function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&'dependency-mismatch'},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&this.pendingRequest==0&&this.formSubmitted&&(a(this.currentForm).triggerHandler('invalid-form',[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,'previousValue')||a.data(b,'previousValue',{old:null,valid:!0,message:this.defaultMessage(b,'remote')})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr('class');return d&&a.each(d.split(' '),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={},d=a(b);for(var e in a.validator.methods){var f;e==='required'&&typeof a.fn.prop=='function'?f=d.prop(e):f=d.attr(e),f?c[e]=f:d[0].getAttribute('type')===e&&(c[e]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,'validator').settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,'validator');return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1){delete b[d];return}if(e.param||e.depends){var f=!0;switch(typeof e.depends){case'string':f=!!a(e.depends,c.form).length;break;case'function':f=e.depends.call(c,c)}f?b[d]=e.param!==undefined?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(['minlength','maxlength','min','max'],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(['rangelength','range'],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if(typeof b=='string'){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=d!=undefined?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return'dependency-mismatch';switch(c.nodeName.toLowerCase()){case'select':var e=a(c).val();return e&&e.length>0;case'input':if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return'dependency-mismatch';var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d=typeof d=='string'&&{url:d}||d;if(this.pending[c.name])return'pending';if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:'abort',port:'validate'+c.name,dataType:'json',data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else{var i={},j=d||f.defaultMessage(c,'remote');i[c.name]=e.message=a.isFunction(j)?j(b):j,f.showErrors(i)}e.valid=g,f.stopRequest(c,g)}},d)),'pending'},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){var e=this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^([\w\-\+!#%\*\=\?\^\{\}\|~]+(?:\.[\w\-\+!#%\*\=\?\^\{\}\|~]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,10}(?:\.[a-z]{2})?)$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return'dependency-mismatch';if(/[^0-9 -]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,'');for(var f=a.length-1;f>=0;f--){var g=a.charAt(f),d=parseInt(g,10);e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10==0},accept:function(a,b,c){return c=typeof c=='string'?c.replace(/,/g,'|'):'png|jpe?g|gif',this.optional(b)||a.match(new RegExp('.('+c+')$','i'))},equalTo:function(b,c,d){var e=a(d).unbind('.validate-equalTo').bind('blur.validate-equalTo',function(){a(c).valid()});return b==e.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){var e=a.port;a.mode=='abort'&&(b[e]&&b[e].abort(),b[e]=d)});else{var c=a.ajax;a.ajax=function(d){var e=('mode'in d?d:a.ajaxSettings).mode,f=('port'in d?d:a.ajaxSettings).port;return e=='abort'?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:'focusin',blur:'focusout'},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);if(e.is(b))return d.apply(e,arguments)})}})}(jQuery),define('jquery.validate',function(){}),define('local-jobs/updateLocationModal',['jquery-wrapper','underscore-wrapper','text!templates/local-jobs/updateLocationModal.htm','local-jobs/geocoding','jquery.validate'],function(a,b,c,d){function i(){a('#update-location-modal-form').validate({highlight:function(){},success:function(){},errorPlacement:function(){}}),a.validator.addMethod('haslocation',function(){return typeof g.geoInfo!='undefined'&&g.geoInfo!==null&&g.geoInfo.lat&&g.geoInfo.lng?!0:!1}),a('#'+g.geoInput).rules('add',{required:!0,haslocation:[]})}function j(a){o(),g.geoInfo=a}function n(b){if(b===undefined||b==='')return;var c={section:g.section,sub_section:'local-jobs/updateLocationModal',label:b,user_id:g.user_id,project_id:g.project_id||''};a.extend(c,g.geoInfo||{}),window._t.push(['user_action',c])}function o(){a('.message-success',e).addClass('is-hidden'),a('.message-error',e).addClass('is-hidden')}function p(b){a('.message-error span',e).text(b),a('.message-success',e).addClass('is-hidden'),a('.message-error',e).removeClass('is-hidden')}function q(){a('.message-success',e).removeClass('is-hidden'),a('.message-error',e).addClass('is-hidden')}var e,f,g={geoInput:'local-location-modal-input',geocodeElement:'local-location-reverse-geocode-modal-btn',geoInfo:null,csrfToken:null,checkBoxText:T_('Email me when a new project is posted in my area'),titleText:T_('You need to be within a 150km radius of this job'),messageText:T_('Only users based within 150km radius of this job may bid on it. Please confirm your location below.'),saveButtonText:T_('Confirm'),successMessageText:T_('You have successfully updated your location.'),hasEmailOption:!1},h=function(h){a.extend(g,h||{});var k=a('#pinky-container'),n=g.placeholderText?g.placeholderText:T_('Enter a location');e=a(b.template(c,{titleText:g.titleText,messageText:g.messageText,saveButtonText:g.saveButtonText,placeholderText:n,successMessageText:g.successMessageText,checkBoxText:g.checkBoxText,hasEmailOption:g.hasEmailOption})),e.appendTo(k);var p=d.create();p.init({autoCompleteElement:g.geoInput,autoCompleteCallback:j,reverseGeocodingElement:g.geocodeElement,reverseGeocodingSuccessCallback:j}),a('#lj-update-location-modal-save',e).click(function(a){a.preventDefault(),m(g.geoInfo)}),a('#lj-update-location-modal-close',e).click(function(a){a.preventDefault(),typeof f!='undefined'?f.call(g.geoInfo):l()}),i(),a('#'+g.geoInput).keypress(function(a){a.stopPropagation(),g.geoInfo=null,o()})},k=function(b,c){o(),a('#lj-update-location-modal-save').removeClass('is-hidden'),a('#lj-update-location-modal-close').addClass('is-hidden'),a.extend(g,b||{}),f=c,g.geoInfo&&g.geoInfo.formatted_address.length>0&&a('#'+g.geoInput).val(g.geoInfo.formatted_address),e.modal('show');var d=e.css('z-index');a('.pac-container').css('z-index',d),n('view',g.geoInfo)},l=function(){e.modal('hide')},m=function(b){var c={attribute:'location',setLocalJobUser:'true',value:b,csrf_token:g.csrfToken},d=a('#subscribeCheckBox');d.val()==='on'&&(c.subscribeEmail=a('#subscribeCheckBox').is(':checked')),a('.message-success',e).addClass('is-hidden'),a('.message-error',e).addClass('is-hidden'),a('#update-location-modal-form').valid()?(a('#lj-update-location-modal-save',e).attr('disabled','disabled'),a.ajax({url:'/users/profile/onUpdateInfo.php',data:c,dataType:'JSON',method:'POST',success:function(b){return a('#lj-update-location-modal-save',e).attr('disabled',null),a('#lj-update-location-modal-save').addClass('is-hidden'),a('#lj-update-location-modal-close').removeClass('is-hidden'),b.status==='success'?(n('save'),q(),!0):(p(T_('You have entered an invalid location.')),!1)},error:function(){return a('#lj-update-location-modal-save',e).attr('disabled',null),p(T_('Unable to save location.')),!1}})):p('You have entered an invalid location.')};return{init:h,showModal:k,hideModal:l}}),define('project/browse/browse',['jquery-wrapper','underscore-wrapper','backbone-wrapper','jquery.dataTables.min','jquery.datatable.twitter.bs.pagination','project/browse/view/project-table-view','project/browse/view/advanced-filter-panel-view','project/browse/model/search-options','qtsbinds','local-jobs/updateLocationModal'],function(a,b,c,d,e,f,g,h,i,j){var k=function(b,c){a.ajaxSetup({cache:!1}),e(),window.searchOptions=new h,c&&window.searchOptions.disablePushState();var d;if(typeof b=='undefined'||typeof b!='undefined'&&b==0)d=new g,d.render(),d.loadPrefilledOptions(prefillOptions),window.searchOptions.setAdvancedFilterPanelView(d);typeof window.localJobs=='object'&&window.localJobs.isLocalJobsUser?searchOptions.attributes.local=JSON.stringify(localJobs):window.localJobs===!0&&typeof window.userLocation=='object'&&(a('#user-location-input').val(userLocation.address),searchOptions.attributes.lat=userLocation.lat,searchOptions.attributes.lon=userLocation.lon),j.init({titleText:T_('Find work in your area'),hasEmailOption:!0,messageText:T_('Tell us the area you are interested in finding projects'),placeholderText:T_('Start typing city and postcode'),geoInfo:window.userLocation?window.userLocation:null,section:'jobs-localjobs-page'});var k=new f({model:searchOptions});k.render(),i.init({section:'ProjectListing',action:'click'});var l=jq('#project_table');i.bind('th.bids-col',{label:'BidSort',action:'sort'}),i.bind('th.started-col, th.end-col',{label:'DateSort',action:'sort'}),i.bind('th.price-col',{label:'PriceSort',action:'sort'}),i.bind('.bookmark[data-action=on]',{label:'BookmarkProject'}),i.bind('.bookmark[data-action=off]',{label:'UnbookmarkProject'}),i.bind('[data-qts]'),a('#browse-project-table').on('click','th.sorting, th.sorting_desc, th.sorting_asc',function(){var b=a(this).attr('class').split(' ');b.forEach(function(a){d&&a.indexOf('-col')>-1&&(d.searchSource=a)}),d&&setTimeout(function(){d.qtsPushForSearch()},2e3)}),a(document).ready(function(){d&&d.qtsPushForSearch();var b=a('#project_table').dataTable().fnSettings(),c=b.aoColumns,e=a('#browse-projects-pagination a.paginate_active').text()?parseInt(a('#browse-projects-pagination a.paginate_active').text(),10):1;b.fnHeaderCallback=function(){var f=b.aaSorting,g=[];if(!f.length)return;f.sort(function(a,b){return a[0]-b[0]});for(var h=0,i=f.length;h<i;h++){var j=f[h][0];if(!c[j].sClass)continue;var k=c[j].sClass.trim(),l=k.split('-')[0],m=f[h][1]==='asc'?'up':'down';l==='started'?(l='end',m='up'):l==='end'&&(l='started',m='down'),g.push(l+'-'+m)}g=g.join(','),d&&g&&d.setSort(g),setTimeout(function(){var b=a('#browse-projects-pagination a.paginate_active').text()?parseInt(a('#browse-projects-pagination a.paginate_active').text(),10):1;d&&b!==e&&(b!==1||d.searchSource==='pagination')&&(e=b,d.searchSource='pagination',d.qtsPushForSearch())},2e3)},window.showLocationModal&&setTimeout(function(){j.showModal({},function(){j.hideModal(),location.reload()})},1e3)})};return{initialize:k}}),require(['jquery-wrapper','underscore-wrapper','project/browse/browse'],function(a,b,c){a(document).ready(function(){a('.internal-header').on('click','#slide-btn',function(b){var c=a('#job-details');c.hasClass('in')?a(b.currentTarget).html('<i class="icon-th-list" style=""></i> '+T_('Show')):a(b.currentTarget).html('<i class="icon-th-list" style=""></i> '+T_('Hide'))})});var d=null;c.initialize()}),define('project/browse/main',function(){})